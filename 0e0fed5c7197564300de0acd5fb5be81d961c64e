{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "f715e044_90002015",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 12
      },
      "lineNbr": 0,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2023-12-11T00:02:32Z",
      "side": 1,
      "message": "Hi Chris - I\u0027m having fewer design concerns so I think we\u0027re converging on something acceptable. I have a few comments on the structure of the document itself, and another on the content of the blob we retrieve from the secure element.",
      "revId": "0e0fed5c7197564300de0acd5fb5be81d961c64e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6404d783_8216c5fe",
        "filename": "designs/oem/hpe/hpe_hw_detect_no-fru.md",
        "patchSetId": 12
      },
      "lineNbr": 49,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2023-12-11T00:02:32Z",
      "side": 1,
      "message": "Some of the sentences here feel redundant. Can you please reword it?\n\nAlso to pick at a detail, my understanding is that it\u0027s not the case there\u0027s \"no direct BMC access\", that implies to me there\u0027s no hardware connection. Perhaps something like:\n\n\u003e The proprietary, HPE-controlled bootblock firmware communicates with a secure element to retrieve portions of the platform vital product data (VPD). It uses a driver whose implementation is strictly license-controlled and cannot be publicly released. The open source portions of the boot chain must adapt to the bootblock\u0027s reserved memory ABI for providing the VPD from the secure element.\n\nAlso I think it\u0027s worth discussing the extent of the other data provided through this interface. I dug up what I think is the relevant code-path in your u-boot fork:\n\nhttps://github.com/HewlettPackard/gxp-uboot/blob/384fc0fef13dae9c1567c1f1a6cdac491e7e2b90/board/hpe/gxp/gxp_board.c#L211-L216\n\nSo it looks like the GXP and PCA (what\u0027s the PCA?) part number and serial number, NIC MAC addresses? Are there other properties too or is this the set?\n\nBecause, you can exploit the `mac-address` property from the `ethernet-controller` devicetree schema to deal with the MAC metadata:\n\nhttps://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/Documentation/devicetree/bindings/net/ethernet-controller.yaml?h\u003dv6.7-rc5#n20\n\nAm I looking in the right place here?",
      "range": {
        "startLine": 36,
        "startChar": 0,
        "endLine": 49,
        "endChar": 58
      },
      "revId": "0e0fed5c7197564300de0acd5fb5be81d961c64e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1f62a56c_94a9447b",
        "filename": "designs/oem/hpe/hpe_hw_detect_no-fru.md",
        "patchSetId": 12
      },
      "lineNbr": 49,
      "author": {
        "id": 1001354
      },
      "writtenOn": "2023-12-12T22:04:35Z",
      "side": 1,
      "message": "I will reword this part, thanks for the input here.\n\nAnd yes, you\u0027re looking in the right place.\n\nPCA_xx is an ID tied directly to a specific part like the mainboard, while the non-PCA version like \u0027PCA_SerialNumber vs. SerialNumber) is assigned to the assembled unit when it\u0027s put together in the factory.\n\nOther than\n- PartNumber\n- PCA_PartNumber\n- SerialNumber\n- PCA_SerialNumber\n- Mac 1\n- MAC 2\n\nThere\u0027s also Server_id, which comes from a CPLD-based memory device, and is (now) output as device-tree/model\n\nThe main one we care about is server_id (model) since that value remains the same across a given platform, even if different mainboard revisions are used from one unit to another (they\u0027d have different pca_PartNumbers).\n\nSince you mention it, I guess it might make sense to go ahead and include \u0027mac-address\u0027 in the scope of this proposal since it seems like low-hanging fruit re: well-defined device-tree properties. \n\nPresumably, this MAC data is *just* for passing status info to redfish/WebUI -- I don\u0027t believe we plan to rely on d-Bus for any MAC-address-reliant functionality at this time.\n\nI mostly just left it out because I\u0027ve been focused on getting \u0027device-tree/model\u0027 for a system identifier-- but I\u0027m happy to go ahead and include it now if folks feel like it makes sense to do that now instead of worrying about it later.",
      "parentUuid": "6404d783_8216c5fe",
      "range": {
        "startLine": 36,
        "startChar": 0,
        "endLine": 49,
        "endChar": 58
      },
      "revId": "0e0fed5c7197564300de0acd5fb5be81d961c64e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "af7298a1_2e07874b",
        "filename": "designs/oem/hpe/hpe_hw_detect_no-fru.md",
        "patchSetId": 12
      },
      "lineNbr": 49,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2023-12-12T23:12:47Z",
      "side": 1,
      "message": "\u003e Since you mention it, I guess it might make sense to go ahead and include \u0027mac-address\u0027 in the scope of this proposal since it seems like low-hanging fruit re: well-defined device-tree properties. \n\nRight, yeah I think it makes sense to take care of the low-hanging fruit, even if it\u0027s not the primary focus of the document.\n\nI\u0027d appreciate it if you can describe that list of properties in the document itself. Unpacking \"blob\" to \"here\u0027s a handful of concrete properties\" is really helpful for reasoning about the problem we\u0027re trying to solve. I had imagined you had kilobytes of weird metadata, but that\u0027s not the case at all, and it\u0027s relatively well defined.\n\n\u003e I mostly just left it out because I\u0027ve been focused on getting \u0027device-tree/model\u0027 for a system identifier-- but I\u0027m happy to go ahead and include it now if folks feel like it makes sense to do that now instead of worrying about it later.\n\nSounds good!",
      "parentUuid": "1f62a56c_94a9447b",
      "range": {
        "startLine": 36,
        "startChar": 0,
        "endLine": 49,
        "endChar": 58
      },
      "revId": "0e0fed5c7197564300de0acd5fb5be81d961c64e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ef415bbf_0c214d8e",
        "filename": "designs/oem/hpe/hpe_hw_detect_no-fru.md",
        "patchSetId": 12
      },
      "lineNbr": 49,
      "author": {
        "id": 1001354
      },
      "writtenOn": "2024-01-03T23:46:35Z",
      "side": 1,
      "message": "Hope you had a solid holiday and newyears!\n\nI ended up borrowing much of your wording, and also ended up changing instances of \u0027HW ID\u0027 (outside of the problem description) to \u0027VPD\u0027 or \u0027product data\u0027 or \u0027vital product data\u0027 -- hopefully I found a good balance between using the abbreviation, and sometimes not abbreviating to keep things more readable.",
      "parentUuid": "af7298a1_2e07874b",
      "range": {
        "startLine": 36,
        "startChar": 0,
        "endLine": 49,
        "endChar": 58
      },
      "revId": "0e0fed5c7197564300de0acd5fb5be81d961c64e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b9311958_9885d705",
        "filename": "designs/oem/hpe/hpe_hw_detect_no-fru.md",
        "patchSetId": 12
      },
      "lineNbr": 49,
      "author": {
        "id": 1001354
      },
      "writtenOn": "2024-01-12T20:12:57Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ef415bbf_0c214d8e",
      "range": {
        "startLine": 36,
        "startChar": 0,
        "endLine": 49,
        "endChar": 58
      },
      "revId": "0e0fed5c7197564300de0acd5fb5be81d961c64e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "88a98ac1_6725e846",
        "filename": "designs/oem/hpe/hpe_hw_detect_no-fru.md",
        "patchSetId": 12
      },
      "lineNbr": 59,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2023-12-11T00:02:32Z",
      "side": 1,
      "message": "This needs to be in square brackets: `[dt-spec-chap3-root-node]`. If you check the rendered link it\u0027s still not right ðŸ˜Š\n\nhttps://gerrit.openbmc.org/plugins/gitiles/openbmc/docs/+/0e0fed5c7197564300de0acd5fb5be81d961c64e/designs/oem/hpe/hpe_hw_detect_no-fru.md",
      "range": {
        "startLine": 59,
        "startChar": 87,
        "endLine": 59,
        "endChar": 112
      },
      "revId": "0e0fed5c7197564300de0acd5fb5be81d961c64e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "345fcc1a_464db40a",
        "filename": "designs/oem/hpe/hpe_hw_detect_no-fru.md",
        "patchSetId": 12
      },
      "lineNbr": 59,
      "author": {
        "id": 1001354
      },
      "writtenOn": "2023-12-12T22:04:35Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "88a98ac1_6725e846",
      "range": {
        "startLine": 59,
        "startChar": 87,
        "endLine": 59,
        "endChar": 112
      },
      "revId": "0e0fed5c7197564300de0acd5fb5be81d961c64e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "91c5db42_41b58d25",
        "filename": "designs/oem/hpe/hpe_hw_detect_no-fru.md",
        "patchSetId": 12
      },
      "lineNbr": 59,
      "author": {
        "id": 1001354
      },
      "writtenOn": "2024-01-12T20:12:57Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "345fcc1a_464db40a",
      "range": {
        "startLine": 59,
        "startChar": 87,
        "endLine": 59,
        "endChar": 112
      },
      "revId": "0e0fed5c7197564300de0acd5fb5be81d961c64e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8d04a943_b56d4b9d",
        "filename": "designs/oem/hpe/hpe_hw_detect_no-fru.md",
        "patchSetId": 12
      },
      "lineNbr": 90,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2023-12-11T00:02:32Z",
      "side": 1,
      "message": "I think it would help to specifically mention the PDI `Compatible` interface here",
      "range": {
        "startLine": 89,
        "startChar": 0,
        "endLine": 90,
        "endChar": 65
      },
      "revId": "0e0fed5c7197564300de0acd5fb5be81d961c64e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8db35bb4_c7078439",
        "filename": "designs/oem/hpe/hpe_hw_detect_no-fru.md",
        "patchSetId": 12
      },
      "lineNbr": 90,
      "author": {
        "id": 1001354
      },
      "writtenOn": "2023-12-12T22:04:35Z",
      "side": 1,
      "message": "I\u0027m putting together a new draft based on your latest comments (Thanks again for the above and beyond in-depth commentary!) -- but could you clarify what you mean by \"mention the PDI compatible interface\"? I\u0027m drawing a blank on what \u0027PDI\u0027 is in this context.",
      "parentUuid": "8d04a943_b56d4b9d",
      "range": {
        "startLine": 89,
        "startChar": 0,
        "endLine": 90,
        "endChar": 65
      },
      "revId": "0e0fed5c7197564300de0acd5fb5be81d961c64e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "12ccbe7a_89dde785",
        "filename": "designs/oem/hpe/hpe_hw_detect_no-fru.md",
        "patchSetId": 12
      },
      "lineNbr": 90,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2023-12-12T23:12:47Z",
      "side": 1,
      "message": "Oh. Sorry. PDI is [openbmc/phosphor-dbus-interfaces](https://github.com/openbmc/phosphor-dbus-interfaces). The `Compatible` interface is this:\n\nhttps://github.com/openbmc/phosphor-dbus-interfaces/blob/master/yaml/xyz/openbmc_project/Inventory/Decorator/Compatible.interface.yaml",
      "parentUuid": "8db35bb4_c7078439",
      "range": {
        "startLine": 89,
        "startChar": 0,
        "endLine": 90,
        "endChar": 65
      },
      "revId": "0e0fed5c7197564300de0acd5fb5be81d961c64e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7bbe7b34_b89fc179",
        "filename": "designs/oem/hpe/hpe_hw_detect_no-fru.md",
        "patchSetId": 12
      },
      "lineNbr": 90,
      "author": {
        "id": 1001354
      },
      "writtenOn": "2024-01-12T20:12:57Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "12ccbe7a_89dde785",
      "range": {
        "startLine": 89,
        "startChar": 0,
        "endLine": 90,
        "endChar": 65
      },
      "revId": "0e0fed5c7197564300de0acd5fb5be81d961c64e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7a8a45b3_5e8e847f",
        "filename": "designs/oem/hpe/hpe_hw_detect_no-fru.md",
        "patchSetId": 12
      },
      "lineNbr": 113,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2023-12-11T00:02:32Z",
      "side": 1,
      "message": "You need to be careful with your nested bullet points below. The nesting isn\u0027t always entirely correct. Have a look at the rendered version:\n\nhttps://gerrit.openbmc.org/plugins/gitiles/openbmc/docs/+/0e0fed5c7197564300de0acd5fb5be81d961c64e/designs/oem/hpe/hpe_hw_detect_no-fru.md#alternatives-considered\n\nI think this would be much easier to manage with sub-headings and bullet lists that are not nested.",
      "revId": "0e0fed5c7197564300de0acd5fb5be81d961c64e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3a803908_67a26fbc",
        "filename": "designs/oem/hpe/hpe_hw_detect_no-fru.md",
        "patchSetId": 12
      },
      "lineNbr": 113,
      "author": {
        "id": 1001354
      },
      "writtenOn": "2023-12-12T22:04:35Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "7a8a45b3_5e8e847f",
      "revId": "0e0fed5c7197564300de0acd5fb5be81d961c64e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b1145ddf_89904eb9",
        "filename": "designs/oem/hpe/hpe_hw_detect_no-fru.md",
        "patchSetId": 12
      },
      "lineNbr": 113,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2024-01-04T22:45:53Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3a803908_67a26fbc",
      "revId": "0e0fed5c7197564300de0acd5fb5be81d961c64e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0af420f5_dc06c434",
        "filename": "designs/oem/hpe/hpe_hw_detect_no-fru.md",
        "patchSetId": 12
      },
      "lineNbr": 121,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2023-12-11T00:02:32Z",
      "side": 1,
      "message": "Can you unpack this concern a bit? I don\u0027t recall that being part of the discussions - they were more around the grammar of a devicetree probe statement, and opening the can of worms of matching on any old devicetree node.\n\nAlso with the semi-colon separator you\u0027re really creating a list-within-a-list. We\u0027re already using a markdown list, just make the second portion a separate markdown list element.",
      "range": {
        "startLine": 121,
        "startChar": 7,
        "endLine": 121,
        "endChar": 59
      },
      "revId": "0e0fed5c7197564300de0acd5fb5be81d961c64e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5548d528_5fb26fb9",
        "filename": "designs/oem/hpe/hpe_hw_detect_no-fru.md",
        "patchSetId": 12
      },
      "lineNbr": 121,
      "author": {
        "id": 1001354
      },
      "writtenOn": "2023-12-12T22:04:35Z",
      "side": 1,
      "message": "My thinking is that if probe statements are responsible for calling code that pulls from arbitrary data in device-tree, there\u0027s potential for something breaking in the code there to affect probe behavior for devices that would be otherwise working.\n\nThis is just speculation on my part. Do you think I should take that point out?",
      "parentUuid": "0af420f5_dc06c434",
      "range": {
        "startLine": 121,
        "startChar": 7,
        "endLine": 121,
        "endChar": 59
      },
      "revId": "0e0fed5c7197564300de0acd5fb5be81d961c64e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fd79824c_4bdc078b",
        "filename": "designs/oem/hpe/hpe_hw_detect_no-fru.md",
        "patchSetId": 12
      },
      "lineNbr": 121,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2023-12-12T23:12:47Z",
      "side": 1,
      "message": "Yeah, please take that out. We don\u0027t need to speculate implementation bugs ðŸ˜Š",
      "parentUuid": "5548d528_5fb26fb9",
      "range": {
        "startLine": 121,
        "startChar": 7,
        "endLine": 121,
        "endChar": 59
      },
      "revId": "0e0fed5c7197564300de0acd5fb5be81d961c64e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a75881b7_a2841bb5",
        "filename": "designs/oem/hpe/hpe_hw_detect_no-fru.md",
        "patchSetId": 12
      },
      "lineNbr": 121,
      "author": {
        "id": 1001354
      },
      "writtenOn": "2024-01-03T23:46:35Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "fd79824c_4bdc078b",
      "range": {
        "startLine": 121,
        "startChar": 7,
        "endLine": 121,
        "endChar": 59
      },
      "revId": "0e0fed5c7197564300de0acd5fb5be81d961c64e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "37ce52e5_30f9629c",
        "filename": "designs/oem/hpe/hpe_hw_detect_no-fru.md",
        "patchSetId": 12
      },
      "lineNbr": 124,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2023-12-11T00:02:32Z",
      "side": 1,
      "message": "Right, this is what I was discussing in the previous comment.",
      "revId": "0e0fed5c7197564300de0acd5fb5be81d961c64e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f1fa9fff_ae6dd772",
        "filename": "designs/oem/hpe/hpe_hw_detect_no-fru.md",
        "patchSetId": 12
      },
      "lineNbr": 124,
      "author": {
        "id": 1001354
      },
      "writtenOn": "2023-12-12T22:04:35Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "37ce52e5_30f9629c",
      "revId": "0e0fed5c7197564300de0acd5fb5be81d961c64e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1755d7c8_9ef243b7",
        "filename": "designs/oem/hpe/hpe_hw_detect_no-fru.md",
        "patchSetId": 12
      },
      "lineNbr": 124,
      "author": {
        "id": 1001354
      },
      "writtenOn": "2024-01-12T20:12:57Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "f1fa9fff_ae6dd772",
      "revId": "0e0fed5c7197564300de0acd5fb5be81d961c64e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}