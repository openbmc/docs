{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "7c8aa03e_90d9718f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2025-11-06T17:48:37Z",
      "side": 1,
      "message": "Overall in support of this.",
      "revId": "e727cc909ba7f0646ce7fa73fed05daeee2a4cfe",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cbe1a4b8_ff04cf5f",
        "filename": "designs/cper-repository.md",
        "patchSetId": 3
      },
      "lineNbr": 42,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2025-11-06T17:48:37Z",
      "side": 1,
      "message": "I\u0027d like to see a couple more added here.  If they don\u0027t apply to your case, I\u0027m happy to push them as a dependent patchset on this.\n\n- Must be able to store up to a 3kB CPER\n- Must be able to store 10000 CPER records in the BMC.\n- Must be able to produce a correct Redfish LogEntry, with MessageId in the Platform registry (per Redfish).\n- Must allow polling all CPER stored records within 5 seconds.\n- SHOULD allow reading a CPER in a human readable JSON format through Redfish (format tbd, but this is a should).",
      "revId": "e727cc909ba7f0646ce7fa73fed05daeee2a4cfe",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "aef65625_b5e4a12b",
        "filename": "designs/cper-repository.md",
        "patchSetId": 3
      },
      "lineNbr": 42,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2025-11-06T19:00:24Z",
      "side": 1,
      "message": "\u003e Must be able to store up to a 3kB CPER\n\u003e Must be able to store 10000 CPER records in the BMC.\n\u003e Must allow polling all CPER stored records within 5 seconds.\n\nSure.  Is there something behind these numbers?  I think it would be good to document that.\n\n\u003e Must be able to produce a correct Redfish LogEntry, with MessageId in the Platform registry (per Redfish).\n\nThe words I see are:\n\n\u003e The MessageId , event data, or OEM-specific information. This property\n\u003e decodes from the entry type. If the entry type is Event , this property \n\u003e contains a Redfish Specification-defined MessageId . If the entry type is SEL,\n\u003e this property contains the Event Data. Otherwise, this property contains \n\u003e OEM-specific information.\n\nThe entry type is CPER, so this field contains OEM specific information.  I wasn\u0027t planning tackling anything along those lines, but I suspect I am missing something.  What am I missing?\n\n\u003e SHOULD allow reading a CPER in a human readable JSON format through Redfish (format tbd, but this is a should).\n\nI was going to follow up with another patch when we want to start parsing.",
      "parentUuid": "cbe1a4b8_ff04cf5f",
      "revId": "e727cc909ba7f0646ce7fa73fed05daeee2a4cfe",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ff246e91_36f972d9",
        "filename": "designs/cper-repository.md",
        "patchSetId": 3
      },
      "lineNbr": 46,
      "author": {
        "id": 1002038
      },
      "writtenOn": "2025-10-03T23:09:15Z",
      "side": 1,
      "message": "Do we need a new daemon to host the D-Bus service?",
      "range": {
        "startLine": 46,
        "startChar": 6,
        "endLine": 46,
        "endChar": 19
      },
      "revId": "e727cc909ba7f0646ce7fa73fed05daeee2a4cfe",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ee45aab7_11bcc327",
        "filename": "designs/cper-repository.md",
        "patchSetId": 3
      },
      "lineNbr": 46,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2025-11-04T17:53:38Z",
      "side": 1,
      "message": "Yes.  In my mind D-Bus service \u003d\u003d daemon but I am happy to change the wording to make this more clear.",
      "parentUuid": "ff246e91_36f972d9",
      "range": {
        "startLine": 46,
        "startChar": 6,
        "endLine": 46,
        "endChar": 19
      },
      "revId": "e727cc909ba7f0646ce7fa73fed05daeee2a4cfe",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d3e1a51a_661158e6",
        "filename": "designs/cper-repository.md",
        "patchSetId": 3
      },
      "lineNbr": 52,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2025-11-06T17:48:37Z",
      "side": 1,
      "message": "Should we use the existing DeleteAll interface?  Is there a use case for deleting a specific range of entries rather than just the whole store?",
      "revId": "e727cc909ba7f0646ce7fa73fed05daeee2a4cfe",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "60024d29_4077cc28",
        "filename": "designs/cper-repository.md",
        "patchSetId": 3
      },
      "lineNbr": 52,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2025-11-06T18:50:42Z",
      "side": 1,
      "message": "I added this because I thought it would be easy to implement and allow bmcweb to remove a bunch of them with one method call.  The use case I pictured was a webui with a bunch of checkboxes next to logs, but I don\u0027t have any plans to implement something like that.  It would be trivial to add this interface later so I\u0027ll remove it.",
      "parentUuid": "d3e1a51a_661158e6",
      "revId": "e727cc909ba7f0646ce7fa73fed05daeee2a4cfe",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3339323f_4b60cc0a",
        "filename": "designs/cper-repository.md",
        "patchSetId": 3
      },
      "lineNbr": 52,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2025-11-06T19:03:44Z",
      "side": 1,
      "message": "FWIW, the \"delete a single entry\" use case is something I would want to explicitly disable.  If this is removed, I can just resolve this as \"maybe in the future\"\n\nüëç",
      "parentUuid": "60024d29_4077cc28",
      "revId": "e727cc909ba7f0646ce7fa73fed05daeee2a4cfe",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "98b48f68_46a487eb",
        "filename": "designs/cper-repository.md",
        "patchSetId": 3
      },
      "lineNbr": 57,
      "author": {
        "id": 1002038
      },
      "writtenOn": "2025-10-03T23:09:15Z",
      "side": 1,
      "message": "Will we store the CPER data somewhere?",
      "range": {
        "startLine": 57,
        "startChar": 1,
        "endLine": 57,
        "endChar": 42
      },
      "revId": "e727cc909ba7f0646ce7fa73fed05daeee2a4cfe",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f1f86feb_b9e1c02b",
        "filename": "designs/cper-repository.md",
        "patchSetId": 3
      },
      "lineNbr": 57,
      "author": {
        "id": 1000350
      },
      "writtenOn": "2025-11-04T07:21:29Z",
      "side": 1,
      "message": "this data need to be persisted across bmc reboots?",
      "parentUuid": "98b48f68_46a487eb",
      "range": {
        "startLine": 57,
        "startChar": 1,
        "endLine": 57,
        "endChar": 42
      },
      "revId": "e727cc909ba7f0646ce7fa73fed05daeee2a4cfe",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "515e198a_697df4f3",
        "filename": "designs/cper-repository.md",
        "patchSetId": 3
      },
      "lineNbr": 57,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2025-11-04T17:53:38Z",
      "side": 1,
      "message": "\u003e Will we store the CPER data somewhere?\n\nYes, I was going to store it in the filesystem somewhere (probably a subdir in /var/lib/).\n\n\u003e this data need to be persisted across bmc reboots?\n\nYes.  I tried to capture this in the requirement:\n\n\"A BMC should be able to receive and store from a CPU, and subsequently recall\n  CPERs.\"",
      "parentUuid": "f1f86feb_b9e1c02b",
      "range": {
        "startLine": 57,
        "startChar": 1,
        "endLine": 57,
        "endChar": 42
      },
      "revId": "e727cc909ba7f0646ce7fa73fed05daeee2a4cfe",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6f9e497b_14866506",
        "filename": "designs/cper-repository.md",
        "patchSetId": 3
      },
      "lineNbr": 67,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2025-11-06T17:48:37Z",
      "side": 1,
      "message": "Should we set this API up more like post codes, where there\u0027s a single method that allows indexing in?  Posting a dbus-object per entry gets performance-critical on startup if you have a lot of messages.\n\nAlso, Redfish has to read a bunch of these to correctly publish the LogService, so minimizing the read size is important.",
      "revId": "e727cc909ba7f0646ce7fa73fed05daeee2a4cfe",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7db72719_264b1444",
        "filename": "designs/cper-repository.md",
        "patchSetId": 3
      },
      "lineNbr": 67,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2025-11-06T18:50:42Z",
      "side": 1,
      "message": "\u003e  Posting a dbus-object per entry gets performance-critical on startup if you have a lot of messages.\n\nI don\u0027t think I\u0027m opposed to changing the semantics as you\u0027ve suggested but I wouldn\u0027t expect any messages on startup other than NameOwnerChanged, irrespective of how many logs there are in the store.  This really is a fundamental misunderstanding (I might be the one that is confused) that we need to align on as a project.",
      "parentUuid": "6f9e497b_14866506",
      "revId": "e727cc909ba7f0646ce7fa73fed05daeee2a4cfe",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "39fdf1b4_922716f7",
        "filename": "designs/cper-repository.md",
        "patchSetId": 3
      },
      "lineNbr": 67,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2025-11-06T19:03:44Z",
      "side": 1,
      "message": "If you have a dbus path per entry, you\u0027re right, I think we closed on the \"lots of messages at startup\" thing, but you do end up building a gigantic tree that the mapper has to scan.  If that tree has N thousand entries, that has been slow in the past.",
      "parentUuid": "7db72719_264b1444",
      "revId": "e727cc909ba7f0646ce7fa73fed05daeee2a4cfe",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2c6e00d3_0b42537e",
        "filename": "designs/cper-repository.md",
        "patchSetId": 3
      },
      "lineNbr": 67,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2025-11-06T19:09:14Z",
      "side": 1,
      "message": "\u003e you do end up building a gigantic tree that the mapper has to scan\n\n(Not sure why) I didn\u0027t think of that.  Will switch to a method based interface.",
      "parentUuid": "39fdf1b4_922716f7",
      "revId": "e727cc909ba7f0646ce7fa73fed05daeee2a4cfe",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0e9c9c09_7c2609c3",
        "filename": "designs/cper-repository.md",
        "patchSetId": 3
      },
      "lineNbr": 67,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2025-11-06T19:13:57Z",
      "side": 1,
      "message": "\u003e If that tree has N thousand entries, that has been slow in the past.\n\nHonestly I don\u0027t understand why this is slow either.  But in any case, not doing it at all is certainly better.",
      "parentUuid": "2c6e00d3_0b42537e",
      "revId": "e727cc909ba7f0646ce7fa73fed05daeee2a4cfe",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7a7a9053_515fac85",
        "filename": "designs/cper-repository.md",
        "patchSetId": 3
      },
      "lineNbr": 73,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2025-11-06T17:48:37Z",
      "side": 1,
      "message": "Is there a use case for this?",
      "revId": "e727cc909ba7f0646ce7fa73fed05daeee2a4cfe",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bcdc4ef0_12b371ae",
        "filename": "designs/cper-repository.md",
        "patchSetId": 3
      },
      "lineNbr": 73,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2025-11-06T18:50:42Z",
      "side": 1,
      "message": "I was planning to implement this in stages, with the first being just raw logs with no parsing.  I don\u0027t remember but think I thought this was an optimization that avoided transferring the entire log.  If we need the entire log even when there is no parsing being done...yeah this is pointless.",
      "parentUuid": "7a7a9053_515fac85",
      "revId": "e727cc909ba7f0646ce7fa73fed05daeee2a4cfe",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "95390361_5beb3bc1",
        "filename": "designs/cper-repository.md",
        "patchSetId": 3
      },
      "lineNbr": 73,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2025-11-06T19:03:44Z",
      "side": 1,
      "message": "I assumed parsing the whole log (which has a max of 4kB i think?) wasn\u0027t that expensive.",
      "parentUuid": "bcdc4ef0_12b371ae",
      "revId": "e727cc909ba7f0646ce7fa73fed05daeee2a4cfe",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "69ff1bf7_da6d9bf7",
        "filename": "designs/cper-repository.md",
        "patchSetId": 3
      },
      "lineNbr": 73,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2025-11-06T19:11:55Z",
      "side": 1,
      "message": "I\u0027ll just get rid of it.",
      "parentUuid": "95390361_5beb3bc1",
      "revId": "e727cc909ba7f0646ce7fa73fed05daeee2a4cfe",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f62e7b34_fd8789da",
        "filename": "designs/cper-repository.md",
        "patchSetId": 3
      },
      "lineNbr": 78,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2025-11-06T17:48:37Z",
      "side": 1,
      "message": "My name is Ed, and I support this message. üëç",
      "revId": "e727cc909ba7f0646ce7fa73fed05daeee2a4cfe",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ed879669_649d86bb",
        "filename": "designs/cper-repository.md",
        "patchSetId": 3
      },
      "lineNbr": 84,
      "author": {
        "id": 1002038
      },
      "writtenOn": "2025-10-03T23:09:15Z",
      "side": 1,
      "message": "Since phosphor-dbus-interface defined `CPER` types, we might use `PrimaryLogId`[1][2] as file path in FaultLog dump entry and it can be retrieve from bmcweb.\n\n[1]https://github.com/openbmc/pldm/blob/master/platform-mc/event_manager.cpp#L406\n[2] https://github.com/openbmc/phosphor-debug-collector/blob/master/dump_manager_faultlog.cpp#L61",
      "range": {
        "startLine": 84,
        "startChar": 3,
        "endLine": 84,
        "endChar": 72
      },
      "revId": "e727cc909ba7f0646ce7fa73fed05daeee2a4cfe",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0d74ce0c_5d67832f",
        "filename": "designs/cper-repository.md",
        "patchSetId": 3
      },
      "lineNbr": 84,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2025-11-04T17:53:38Z",
      "side": 1,
      "message": "Passing filenames around on D-Bus is prone to race conditions so its something we avoid.",
      "parentUuid": "ed879669_649d86bb",
      "range": {
        "startLine": 84,
        "startChar": 3,
        "endLine": 84,
        "endChar": 72
      },
      "revId": "e727cc909ba7f0646ce7fa73fed05daeee2a4cfe",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a822f5ac_d2acd0a1",
        "filename": "designs/cper-repository.md",
        "patchSetId": 3
      },
      "lineNbr": 96,
      "author": {
        "id": 1000350
      },
      "writtenOn": "2025-11-04T07:21:29Z",
      "side": 1,
      "message": "can leverage existing BMC  dump attachment download (file_body approach) by using file descriptors or storing this content in file on BMC file system right?",
      "revId": "e727cc909ba7f0646ce7fa73fed05daeee2a4cfe",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e2aabc68_21bf5a88",
        "filename": "designs/cper-repository.md",
        "patchSetId": 3
      },
      "lineNbr": 96,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2025-11-04T17:53:38Z",
      "side": 1,
      "message": "Sorry I don\u0027t fully understand the question.  Yes, CPERs could/would be made available as an attachment in a LogEntry.  Have I suggested something with this design that makes that problematic?",
      "parentUuid": "a822f5ac_d2acd0a1",
      "revId": "e727cc909ba7f0646ce7fa73fed05daeee2a4cfe",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e5cb9418_a49194e1",
        "filename": "designs/cper-repository.md",
        "patchSetId": 3
      },
      "lineNbr": 96,
      "author": {
        "id": 1000350
      },
      "writtenOn": "2025-11-06T11:06:27Z",
      "side": 1,
      "message": "No brad, attachment in a LogEntry would be good.\njust wanted to confirm if this content stored in filesystem and using the same BMC dump offload mechanism.\n\nin above comment, you have already clarified that storing at /var/lib.",
      "parentUuid": "e2aabc68_21bf5a88",
      "revId": "e727cc909ba7f0646ce7fa73fed05daeee2a4cfe",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e5effeaa_e7f424b5",
        "filename": "designs/cper-repository.md",
        "patchSetId": 3
      },
      "lineNbr": 98,
      "author": {
        "id": 1000350
      },
      "writtenOn": "2025-11-04T07:21:29Z",
      "side": 1,
      "message": "multiple CPERs can be processed at the same time?",
      "revId": "e727cc909ba7f0646ce7fa73fed05daeee2a4cfe",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a2a252b2_eebc80dd",
        "filename": "designs/cper-repository.md",
        "patchSetId": 3
      },
      "lineNbr": 98,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2025-11-04T17:53:38Z",
      "side": 1,
      "message": "Can you elaborate on processed?  This is just a storage interface so I wasn\u0027t planning on doing any processing.",
      "parentUuid": "e5effeaa_e7f424b5",
      "revId": "e727cc909ba7f0646ce7fa73fed05daeee2a4cfe",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6dc51d39_10cfc74e",
        "filename": "designs/cper-repository.md",
        "patchSetId": 3
      },
      "lineNbr": 98,
      "author": {
        "id": 1000350
      },
      "writtenOn": "2025-11-06T11:06:27Z",
      "side": 1,
      "message": "ok, got it. I mean to ask if multiple attachments downloads happen at the same time.",
      "parentUuid": "a2a252b2_eebc80dd",
      "revId": "e727cc909ba7f0646ce7fa73fed05daeee2a4cfe",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}