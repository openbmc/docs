{
  "comments": [
    {
      "key": {
        "uuid": "cf5fe88b_2640a47a",
        "filename": "designs/device-tree-gpio-naming.md",
        "patchSetId": 2
      },
      "lineNbr": 98,
      "author": {
        "id": 1000021
      },
      "writtenOn": "2021-07-28T19:33:38Z",
      "side": 1,
      "message": "How is this used differently than the request to power on below?\nThis may need input from the hardware team.",
      "revId": "6d68a741d48a15955c3f8b228b7c3075d5271b8e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a480a455_79af3e79",
        "filename": "designs/device-tree-gpio-naming.md",
        "patchSetId": 2
      },
      "lineNbr": 98,
      "author": {
        "id": 1000318
      },
      "writtenOn": "2021-07-28T20:20:26Z",
      "side": 1,
      "message": "They are basically the same on these systems.  Historically, the sequencer hw power on request would turn on all the voltages, then afterwards fw would use a \"software_pgood\" gpio to take all the chips out of reset at the same time.  However, the power sequencer hw used on these systems do both of those things, so the gpios basically both do the same thing.\n\nIMHO the gpio isn\u0027t a status... it\u0027s on output, not an input.",
      "parentUuid": "cf5fe88b_2640a47a",
      "revId": "6d68a741d48a15955c3f8b228b7c3075d5271b8e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c766b042_27a5bae7",
        "filename": "designs/device-tree-gpio-naming.md",
        "patchSetId": 2
      },
      "lineNbr": 98,
      "author": {
        "id": 1000318
      },
      "writtenOn": "2021-07-28T20:21:38Z",
      "side": 1,
      "message": "it\u0027s AN output, not an input.",
      "parentUuid": "a480a455_79af3e79",
      "revId": "6d68a741d48a15955c3f8b228b7c3075d5271b8e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d1fc2d22_9e95f79b",
        "filename": "designs/device-tree-gpio-naming.md",
        "patchSetId": 2
      },
      "lineNbr": 98,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2021-07-28T22:24:11Z",
      "side": 1,
      "message": "Why does `status-` need to imply a direction? How would you name GPIOs to differentiate input vs output status lines?",
      "parentUuid": "c766b042_27a5bae7",
      "revId": "6d68a741d48a15955c3f8b228b7c3075d5271b8e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "204477d5_01d98706",
        "filename": "designs/device-tree-gpio-naming.md",
        "patchSetId": 2
      },
      "lineNbr": 98,
      "author": {
        "id": 1000318
      },
      "writtenOn": "2021-07-29T03:28:53Z",
      "side": 1,
      "message": "It\u0027s not a status any more than \"power-chassis\" is a status.  Why isn\u0027t that \"status-power-chassis\" then? That gpio does the same thing...  But honestly if we continue to spend a week+ going back and forth over something as simple as a gpio name, we\u0027ll never get systems out the door, so we can call it whatever people want, lets just get it done and move on.",
      "parentUuid": "d1fc2d22_9e95f79b",
      "revId": "6d68a741d48a15955c3f8b228b7c3075d5271b8e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6e4f6ff6_2f6db8bc",
        "filename": "designs/device-tree-gpio-naming.md",
        "patchSetId": 2
      },
      "lineNbr": 98,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2021-07-29T04:28:01Z",
      "side": 1,
      "message": "Sort-of working backwards here, because I think it\u0027s easier to respond that way.\n\n\u003e But honestly if we continue to spend a week+ going back and forth ... we\u0027ll never get systems out the door\n\nThe open source project cares about what\u0027s right for the project, not when you need to deliver systems. Leverage it as you see fit. The trade-off is that more downstream code means fewer shared benefits and more maintenance.\n\nI appreciate that we\u0027re trying to do the right thing upstream here.\n\n\u003e going back and forth over something as simple as a gpio name\n\nThat\u0027s the thing, it\u0027s not simple, because the name forms a contract between the kernel and userspace. Once it\u0027s decided, changing it can lead to compatibility headaches. Using net names for specific systems makes writing common code harder. So we\u0027re putting effort into this document to minimise the compatibility headaches and maximise the amount of code reuse in the system.\n\nIn my opinion it\u0027s only a simple problem if you care about the system you\u0027re trying to deliver right now to the exclusion of all else. I\u0027m reviewing this as a contribution to the open source project, not to a specific system delivery deadline.\n\nMaybe the outcome is that it\u0027s not possible to use a common name for these GPIOs. But at least we will have had the discussion and it will be documented here.\n\n\u003e It\u0027s not a status any more than \"power-chassis\" is a status\n\nI feel this is only true if you eliminate intent. But isn\u0027t intent the whole point here? I was using \u0027power\u0027 in the verb sense (I didn\u0027t explicitly state this though). You set the GPIO when you want to direct the remote end to change state (1 or more effects). Contrast this to a `status` GPIO, which isn\u0027t trying to drive any particular behaviour, just alert anything that is listening to a particular state (0 or more effects).\n\nMy understanding of SOFTWARE_PGOOD as a net was that we set it when the BMC was ready (0 or more effects), and we set BMC_POWER_UP when we wanted the host to boot (1 or more effects). This is what drove my use of status for the former and not for the latter. If this isn\u0027t accurate then we can reconsider.",
      "parentUuid": "204477d5_01d98706",
      "revId": "6d68a741d48a15955c3f8b228b7c3075d5271b8e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b6b17dbf_86eefa39",
        "filename": "designs/device-tree-gpio-naming.md",
        "patchSetId": 2
      },
      "lineNbr": 98,
      "author": {
        "id": 1000021
      },
      "writtenOn": "2021-07-29T04:41:45Z",
      "side": 1,
      "message": "I think it was more a backup safety net \"software says power might be good, so its vote is release reset\".  It has nothing to do with the readiness of the BMC to perform some action.\n\nPrevous products used this to say \"ok the boot has progressed far enough that hardware can control the downstream device resets\".  The fact that we could set it at time 0 means we got the rest of the hardware right.  (I think this can be observed in POWER8 systems).\n\nThis is why I suggested a pass though the hardware design team for the name.",
      "parentUuid": "6e4f6ff6_2f6db8bc",
      "revId": "6d68a741d48a15955c3f8b228b7c3075d5271b8e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "036324c7_39165481",
        "filename": "designs/device-tree-gpio-naming.md",
        "patchSetId": 2
      },
      "lineNbr": 99,
      "author": {
        "id": 1000021
      },
      "writtenOn": "2021-07-29T05:25:56Z",
      "side": 1,
      "message": "Commenting here to break up the discussion since I think it deserves a separate thread.\n\nI don\u0027t think we should adopt status as group of signals because all inputs to the bmc are status, so it becomes a low usefullness term.\n\nThis is in addition to but seperate from the \"status might be an output from the bmc\" argument.",
      "revId": "6d68a741d48a15955c3f8b228b7c3075d5271b8e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ae97a803_5bf9fa7c",
        "filename": "designs/device-tree-gpio-naming.md",
        "patchSetId": 2
      },
      "lineNbr": 101,
      "author": {
        "id": 1000021
      },
      "writtenOn": "2021-07-28T19:33:38Z",
      "side": 1,
      "message": "This is an output but seems to be missing the action.\n\n\nAs I understand it\u0027s both to request power be turned on and to request it be turned off for shutdown by setting it low.  \n\n(It\u0027s different than the PC power supply button protocol.)",
      "revId": "6d68a741d48a15955c3f8b228b7c3075d5271b8e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    }
  ]
}