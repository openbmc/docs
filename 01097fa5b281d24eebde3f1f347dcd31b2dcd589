{
  "comments": [
    {
      "key": {
        "uuid": "a0a397d2_53a081c2",
        "filename": "designs/virtual-sensors.md",
        "patchSetId": 1
      },
      "lineNbr": 13,
      "author": {
        "id": 1000212
      },
      "writtenOn": "2020-06-09T19:13:36Z",
      "side": 1,
      "message": "Instead of starting with sensor-correction as the primary use-case, I would go with a pure virtual sensor example airflow which is calculated from the fan speed.",
      "revId": "01097fa5b281d24eebde3f1f347dcd31b2dcd589",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fdaf7dbe_e5178bad",
        "filename": "designs/virtual-sensors.md",
        "patchSetId": 1
      },
      "lineNbr": 13,
      "author": {
        "id": 1000271
      },
      "writtenOn": "2020-06-26T23:17:04Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a0a397d2_53a081c2",
      "revId": "01097fa5b281d24eebde3f1f347dcd31b2dcd589",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "01ec8842_3630d39c",
        "filename": "designs/virtual-sensors.md",
        "patchSetId": 1
      },
      "lineNbr": 15,
      "author": {
        "id": 1000212
      },
      "writtenOn": "2020-06-09T19:13:36Z",
      "side": 1,
      "message": "Virtual sensor examples:\n1. Airflow - function of Fan RPM reported in units of cubic-feet per second.\n2. Voltage delta between two ADC inputs. When the actual diff is what which should not cross a threshold.\n3. Power consumption when we have Energy/time.\n4. Tiogapass, inlet sensor skews in a cubic(?) way at low fan speeds. We would want to correct these values and have swampd use the corrected values instead of the raw ones read.",
      "revId": "01097fa5b281d24eebde3f1f347dcd31b2dcd589",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "09ad70c6_6d87855e",
        "filename": "designs/virtual-sensors.md",
        "patchSetId": 1
      },
      "lineNbr": 15,
      "author": {
        "id": 1000271
      },
      "writtenOn": "2020-06-26T23:17:04Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "01ec8842_3630d39c",
      "revId": "01097fa5b281d24eebde3f1f347dcd31b2dcd589",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0e7d1c54_3933c5b2",
        "filename": "designs/virtual-sensors.md",
        "patchSetId": 1
      },
      "lineNbr": 18,
      "author": {
        "id": 1000212
      },
      "writtenOn": "2020-06-09T19:13:36Z",
      "side": 1,
      "message": "Reword: \"will allow to generate new virtual sensors which are defined to be specific manipulation/function of existing sensors.\"",
      "revId": "01097fa5b281d24eebde3f1f347dcd31b2dcd589",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "879fcdc3_bd446f9a",
        "filename": "designs/virtual-sensors.md",
        "patchSetId": 1
      },
      "lineNbr": 18,
      "author": {
        "id": 1000271
      },
      "writtenOn": "2020-06-26T23:17:04Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0e7d1c54_3933c5b2",
      "revId": "01097fa5b281d24eebde3f1f347dcd31b2dcd589",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e79a95c9_48fb5f70",
        "filename": "designs/virtual-sensors.md",
        "patchSetId": 1
      },
      "lineNbr": 20,
      "author": {
        "id": 1000212
      },
      "writtenOn": "2020-06-09T19:13:36Z",
      "side": 1,
      "message": "eee",
      "range": {
        "startLine": 20,
        "startChar": 0,
        "endLine": 20,
        "endChar": 6
      },
      "revId": "01097fa5b281d24eebde3f1f347dcd31b2dcd589",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0c48d027_af63fd58",
        "filename": "designs/virtual-sensors.md",
        "patchSetId": 1
      },
      "lineNbr": 25,
      "author": {
        "id": 1000539
      },
      "writtenOn": "2020-06-24T17:12:58Z",
      "side": 1,
      "message": "Do we consider chaining virtual sensors? For example physical sensor 1 and 2 generates virtual sensor 1 that we need, and we also need virtual sensor 2 generated from virtual sensor 1 and physical sensor 3. If we don\u0027t consider chaining at the moment, can we make a note to architecture the code so that it would be easy to be extended for chaining?",
      "revId": "01097fa5b281d24eebde3f1f347dcd31b2dcd589",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d6eed6ba_3fc09954",
        "filename": "designs/virtual-sensors.md",
        "patchSetId": 1
      },
      "lineNbr": 25,
      "author": {
        "id": 1000271
      },
      "writtenOn": "2020-06-26T23:17:04Z",
      "side": 1,
      "message": "Every sensors would be calculated from it\u0027s give path of it\u0027s parameter. And I don\u0027t see any reason for chaining not work. It should work as expected.",
      "parentUuid": "0c48d027_af63fd58",
      "revId": "01097fa5b281d24eebde3f1f347dcd31b2dcd589",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c33c3794_55ef08d9",
        "filename": "designs/virtual-sensors.md",
        "patchSetId": 1
      },
      "lineNbr": 25,
      "author": {
        "id": 1000539
      },
      "writtenOn": "2020-06-26T23:25:33Z",
      "side": 1,
      "message": "If the chaining is POR in this design doc, we\u0027d probably better explicitly specify it; or deny it as POR on the other hand, because you may need make sure there\u0027s no loop in the chaining, since it\u0027s making implementation harder.",
      "parentUuid": "d6eed6ba_3fc09954",
      "revId": "01097fa5b281d24eebde3f1f347dcd31b2dcd589",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "47de8cce_e7247dca",
        "filename": "designs/virtual-sensors.md",
        "patchSetId": 1
      },
      "lineNbr": 25,
      "author": {
        "id": 1000271
      },
      "writtenOn": "2020-06-26T23:34:34Z",
      "side": 1,
      "message": "I am not sure if I am understanding this completely. et me explain what I understand here, every sensors mentioned in a config file will have a dbus interface with initial values of zero. And this process will start monitoring every parameter provided if they are dbus path. If any sensor make changes in the given path will trigger in calculation of this new sensor so I don\u0027t see any chaining issues in implementation. \n\nPlease explain your thought, I might be missing some serious issues here.",
      "parentUuid": "c33c3794_55ef08d9",
      "revId": "01097fa5b281d24eebde3f1f347dcd31b2dcd589",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b31d6fdc_c8ccd461",
        "filename": "designs/virtual-sensors.md",
        "patchSetId": 1
      },
      "lineNbr": 25,
      "author": {
        "id": 1000539
      },
      "writtenOn": "2020-06-26T23:41:56Z",
      "side": 1,
      "message": "I see. Then we should explicitly specify that it\u0027s user\u0027s responsibilities not to create a loop , since it\u0027s a dead event loop which will consume all the resources? Again, from my other comment because I\u0027m not familiar with dbus monitoring event: Is there any performance impact on the virtual sensor? For example, if there are 3 normal sensors, there are 3 normal updates on dbus per polling cycle. Then if we add a virtual sensor aggregating these 3, will we have 6 updates on dbus per polling cycle?",
      "parentUuid": "47de8cce_e7247dca",
      "revId": "01097fa5b281d24eebde3f1f347dcd31b2dcd589",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1314d27f_b64d8b98",
        "filename": "designs/virtual-sensors.md",
        "patchSetId": 1
      },
      "lineNbr": 46,
      "author": {
        "id": 1000212
      },
      "writtenOn": "2020-06-09T19:13:36Z",
      "side": 1,
      "message": "Units. Thresholds(?) define here or get from entity manager?",
      "revId": "01097fa5b281d24eebde3f1f347dcd31b2dcd589",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "87dad484_6798b5b5",
        "filename": "designs/virtual-sensors.md",
        "patchSetId": 1
      },
      "lineNbr": 46,
      "author": {
        "id": 1000271
      },
      "writtenOn": "2020-06-26T23:17:04Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1314d27f_b64d8b98",
      "revId": "01097fa5b281d24eebde3f1f347dcd31b2dcd589",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "88ffecfd_5ad3cb27",
        "filename": "designs/virtual-sensors.md",
        "patchSetId": 1
      },
      "lineNbr": 47,
      "author": {
        "id": 1000212
      },
      "writtenOn": "2020-06-09T19:13:36Z",
      "side": 1,
      "message": "Remove.",
      "revId": "01097fa5b281d24eebde3f1f347dcd31b2dcd589",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8ffe18e7_3286df73",
        "filename": "designs/virtual-sensors.md",
        "patchSetId": 1
      },
      "lineNbr": 47,
      "author": {
        "id": 1000271
      },
      "writtenOn": "2020-06-26T23:17:04Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "88ffecfd_5ad3cb27",
      "revId": "01097fa5b281d24eebde3f1f347dcd31b2dcd589",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f7203069_82234435",
        "filename": "designs/virtual-sensors.md",
        "patchSetId": 1
      },
      "lineNbr": 48,
      "author": {
        "id": 1000539
      },
      "writtenOn": "2020-06-24T17:12:58Z",
      "side": 1,
      "message": "Do we prefer the variables to have dollar sign before them? Do we need to support parentheses and functions like max(), min()? One of my concerns with JSON config file is that we may be trying to implement a script language parser in every daemon reading them. And one of my asks on sensor aggregation is to get the maximum temperature reading among dozens of them to save sensor number, especially for IPMI sensor space. In this design, Do we consider the functionality to hide them in dbus when superseded by a virtual sensor?",
      "revId": "01097fa5b281d24eebde3f1f347dcd31b2dcd589",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "89ac83b3_356f03e1",
        "filename": "designs/virtual-sensors.md",
        "patchSetId": 1
      },
      "lineNbr": 48,
      "author": {
        "id": 1000271
      },
      "writtenOn": "2020-06-26T23:17:04Z",
      "side": 1,
      "message": "We can certainly support max/min in algorithm and currently we will not be supporting hiding other sensors from dbus as we get values from there only. But it can be extended to support that. As I can understand that we don\u0027t want some original sensors in our SDR.",
      "parentUuid": "f7203069_82234435",
      "revId": "01097fa5b281d24eebde3f1f347dcd31b2dcd589",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1a9590c4_5519d016",
        "filename": "designs/virtual-sensors.md",
        "patchSetId": 1
      },
      "lineNbr": 51,
      "author": {
        "id": 1000212
      },
      "writtenOn": "2020-06-09T19:13:36Z",
      "side": 1,
      "message": "\"Val\": \"/xyz/openbmc_project/sensor/temperature/\"Inlet_Temp\"",
      "revId": "01097fa5b281d24eebde3f1f347dcd31b2dcd589",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "33aafb24_77edcbb8",
        "filename": "designs/virtual-sensors.md",
        "patchSetId": 1
      },
      "lineNbr": 51,
      "author": {
        "id": 1000539
      },
      "writtenOn": "2020-06-24T17:12:58Z",
      "side": 1,
      "message": "Agree. I\u0027d like the virtual sensor not bidden to individual sensors.",
      "parentUuid": "1a9590c4_5519d016",
      "revId": "01097fa5b281d24eebde3f1f347dcd31b2dcd589",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8fc40aea_6cc18c46",
        "filename": "designs/virtual-sensors.md",
        "patchSetId": 1
      },
      "lineNbr": 51,
      "author": {
        "id": 1000271
      },
      "writtenOn": "2020-06-26T23:17:04Z",
      "side": 1,
      "message": "I have made this also as a parameter.",
      "parentUuid": "1a9590c4_5519d016",
      "revId": "01097fa5b281d24eebde3f1f347dcd31b2dcd589",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "80f3bc56_60bbb09d",
        "filename": "designs/virtual-sensors.md",
        "patchSetId": 1
      },
      "lineNbr": 69,
      "author": {
        "id": 1000539
      },
      "writtenOn": "2020-06-24T17:12:58Z",
      "side": 1,
      "message": "I\u0027m too familiar with stuffs with dbus; does that mean if we drop the \u0027Path\u0027 parameter in the design, either we have to specify which sensor change event to listen to, or we are getting much more sensor update frequency with this virtual sensor due to listening to update events of multiple sensors?",
      "revId": "01097fa5b281d24eebde3f1f347dcd31b2dcd589",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d5be095d_54a545d8",
        "filename": "designs/virtual-sensors.md",
        "patchSetId": 1
      },
      "lineNbr": 69,
      "author": {
        "id": 1000539
      },
      "writtenOn": "2020-06-24T17:14:09Z",
      "side": 1,
      "message": "Sry, I meant \u0027not too familiar\u0027...",
      "parentUuid": "80f3bc56_60bbb09d",
      "revId": "01097fa5b281d24eebde3f1f347dcd31b2dcd589",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "20d58dab_07c4d381",
        "filename": "designs/virtual-sensors.md",
        "patchSetId": 1
      },
      "lineNbr": 69,
      "author": {
        "id": 1000271
      },
      "writtenOn": "2020-06-26T23:17:04Z",
      "side": 1,
      "message": "So now path has been covered in parameter itself. Every parameter would be considered as either path or absolute value.",
      "parentUuid": "80f3bc56_60bbb09d",
      "revId": "01097fa5b281d24eebde3f1f347dcd31b2dcd589",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    }
  ]
}