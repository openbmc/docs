{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "216931e8_4f5ab332",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 7
      },
      "lineNbr": 0,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2022-01-10T01:04:12Z",
      "side": 1,
      "message": "Hi George, I have some comments on the structure of the document as well as some queries on your proposals.",
      "revId": "49e0e4e389865df14f441bcaff8371490c0fc3ef",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ac930406_d62f3f15",
        "filename": "designs/firmware-update-via-usb.md",
        "patchSetId": 7
      },
      "lineNbr": 13,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2022-01-10T01:04:12Z",
      "side": 1,
      "message": "The first half of the sentence describes the problem. This last half however describes your proposed solution. The solution is not part of the problem definition. So this should be dropped",
      "range": {
        "startLine": 12,
        "startChar": 16,
        "endLine": 13,
        "endChar": 16
      },
      "revId": "49e0e4e389865df14f441bcaff8371490c0fc3ef",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ce8c38de_44156fae",
        "filename": "designs/firmware-update-via-usb.md",
        "patchSetId": 7
      },
      "lineNbr": 13,
      "author": {
        "id": 1000397
      },
      "writtenOn": "2022-01-10T07:19:23Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ac930406_d62f3f15",
      "range": {
        "startLine": 12,
        "startChar": 16,
        "endLine": 13,
        "endChar": 16
      },
      "revId": "49e0e4e389865df14f441bcaff8371490c0fc3ef",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a6fbfed3_b09949c2",
        "filename": "designs/firmware-update-via-usb.md",
        "patchSetId": 7
      },
      "lineNbr": 25,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2022-01-10T01:04:12Z",
      "side": 1,
      "message": "There\u0027s a lot of discussion of the specifics in this section when IMO it should just be the abstract set of requirements for how the system should behave.",
      "revId": "49e0e4e389865df14f441bcaff8371490c0fc3ef",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1cd6f6e5_d7886aab",
        "filename": "designs/firmware-update-via-usb.md",
        "patchSetId": 7
      },
      "lineNbr": 25,
      "author": {
        "id": 1000397
      },
      "writtenOn": "2022-01-10T07:19:23Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "a6fbfed3_b09949c2",
      "revId": "49e0e4e389865df14f441bcaff8371490c0fc3ef",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "aabbd0fc_9db4da03",
        "filename": "designs/firmware-update-via-usb.md",
        "patchSetId": 7
      },
      "lineNbr": 46,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2022-01-10T01:04:12Z",
      "side": 1,
      "message": "This is where the specifics above should be moved.",
      "revId": "49e0e4e389865df14f441bcaff8371490c0fc3ef",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9d8edf29_2cd91352",
        "filename": "designs/firmware-update-via-usb.md",
        "patchSetId": 7
      },
      "lineNbr": 46,
      "author": {
        "id": 1000397
      },
      "writtenOn": "2022-01-10T07:19:23Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "aabbd0fc_9db4da03",
      "revId": "49e0e4e389865df14f441bcaff8371490c0fc3ef",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1dd11323_c4b0c1cd",
        "filename": "designs/firmware-update-via-usb.md",
        "patchSetId": 7
      },
      "lineNbr": 70,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2022-01-10T01:04:12Z",
      "side": 1,
      "message": "Where did the \"Impacts\" and \"Alternatives Considered\" sections go? The purpose of \"Alternatives Considered\" is to to strengthen the argument for your proposal and also head off architectural disagreements in code review. IMO it is essential.",
      "revId": "49e0e4e389865df14f441bcaff8371490c0fc3ef",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "345e12ab_cf8b7e9d",
        "filename": "designs/firmware-update-via-usb.md",
        "patchSetId": 7
      },
      "lineNbr": 70,
      "author": {
        "id": 1000397
      },
      "writtenOn": "2022-01-10T07:19:23Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "1dd11323_c4b0c1cd",
      "revId": "49e0e4e389865df14f441bcaff8371490c0fc3ef",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d97d31a1_f1f84746",
        "filename": "designs/firmware-update-via-usb.md",
        "patchSetId": 7
      },
      "lineNbr": 74,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2022-01-10T01:04:12Z",
      "side": 1,
      "message": "This is pretty vague. What exactly are you proposing?",
      "range": {
        "startLine": 73,
        "startChar": 0,
        "endLine": 74,
        "endChar": 18
      },
      "revId": "49e0e4e389865df14f441bcaff8371490c0fc3ef",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0f95ba72_c29d3d43",
        "filename": "designs/firmware-update-via-usb.md",
        "patchSetId": 7
      },
      "lineNbr": 74,
      "author": {
        "id": 1000397
      },
      "writtenOn": "2022-01-10T07:19:23Z",
      "side": 1,
      "message": "\u003e This is pretty vague. What exactly are you proposing?\n\nFor security checks at the code level, I recommend running a local CI run and analyzing potential vulnerabilities through cppcheck.\n\nRefer: For security checks at the code level, I recommend running a local CI run and analyzing potential vulnerabilities through cppcheck",
      "parentUuid": "d97d31a1_f1f84746",
      "range": {
        "startLine": 73,
        "startChar": 0,
        "endLine": 74,
        "endChar": 18
      },
      "revId": "49e0e4e389865df14f441bcaff8371490c0fc3ef",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "27fa768a_abe62aa8",
        "filename": "designs/firmware-update-via-usb.md",
        "patchSetId": 7
      },
      "lineNbr": 74,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2022-01-11T01:11:35Z",
      "side": 1,
      "message": "So I\u0027m asking these questions with the expectation that you\u0027ll address them in the documentation. Can you please include the context that you\u0027re providing in your response in Gerrit in the document?\n\nRegardless, \"the code layer\" is pretty vague as I said. All of the firmware is just code, from u-boot to the kernel to userspace. I think what you\u0027re referring to here is the applications involved, specifically phosphor-software-manager. Is that right?",
      "parentUuid": "0f95ba72_c29d3d43",
      "range": {
        "startLine": 73,
        "startChar": 0,
        "endLine": 74,
        "endChar": 18
      },
      "revId": "49e0e4e389865df14f441bcaff8371490c0fc3ef",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "282c8972_d675903b",
        "filename": "designs/firmware-update-via-usb.md",
        "patchSetId": 7
      },
      "lineNbr": 74,
      "author": {
        "id": 1000397
      },
      "writtenOn": "2022-01-12T02:23:15Z",
      "side": 1,
      "message": "\u003e So I\u0027m asking these questions with the expectation that you\u0027ll address them in the documentation. Can you please include the context that you\u0027re providing in your response in Gerrit in the document?\n\u003e \n\u003e Regardless, \"the code layer\" is pretty vague as I said. All of the firmware is just code, from u-boot to the kernel to userspace. I think what you\u0027re referring to here is the applications involved, specifically phosphor-software-manager. Is that right?\n\nYes, Updated it",
      "parentUuid": "27fa768a_abe62aa8",
      "range": {
        "startLine": 73,
        "startChar": 0,
        "endLine": 74,
        "endChar": 18
      },
      "revId": "49e0e4e389865df14f441bcaff8371490c0fc3ef",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f2704b02_b2c16487",
        "filename": "designs/firmware-update-via-usb.md",
        "patchSetId": 7
      },
      "lineNbr": 77,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2022-01-10T01:04:12Z",
      "side": 1,
      "message": "How do you propose this will work?",
      "range": {
        "startLine": 75,
        "startChar": 0,
        "endLine": 77,
        "endChar": 64
      },
      "revId": "49e0e4e389865df14f441bcaff8371490c0fc3ef",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ca6d58ce_3ee0e858",
        "filename": "designs/firmware-update-via-usb.md",
        "patchSetId": 7
      },
      "lineNbr": 77,
      "author": {
        "id": 1000397
      },
      "writtenOn": "2022-01-10T07:19:23Z",
      "side": 1,
      "message": "\u003e How do you propose this will work?\n\nWe need to disable this feature via Redfish, the general logic is to symlink `/etc/udev/rules.d/70-bmc-usb.rules` to `/dev/null`\n\nWhen restoring `/etc/udev/rules.d/70-bmc-usb.rules` will be removed and `/lib/udev/rules.d/70-bmc-usb.rules` will be used\n\nRefer: https://gerrit.openbmc-project.xyz/c/openbmc/service-config-manager/+/48780",
      "parentUuid": "f2704b02_b2c16487",
      "range": {
        "startLine": 75,
        "startChar": 0,
        "endLine": 77,
        "endChar": 64
      },
      "revId": "49e0e4e389865df14f441bcaff8371490c0fc3ef",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a3bc2a1d_47e2d471",
        "filename": "designs/firmware-update-via-usb.md",
        "patchSetId": 7
      },
      "lineNbr": 77,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2022-01-11T01:11:35Z",
      "side": 1,
      "message": "The udev rule will prevent the drive from being accessed by the update application but won\u0027t prevent the kernel from binding the usb-storage driver to the device. You\u0027d need to blacklist the driver for that to hold. I think you need to be more specific about what behaviour you\u0027re after here in the name of security.\n\nIf you\u0027re going to talk security we need a threat model to reason against.",
      "parentUuid": "ca6d58ce_3ee0e858",
      "range": {
        "startLine": 75,
        "startChar": 0,
        "endLine": 77,
        "endChar": 64
      },
      "revId": "49e0e4e389865df14f441bcaff8371490c0fc3ef",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f50888e3_e59e0572",
        "filename": "designs/firmware-update-via-usb.md",
        "patchSetId": 7
      },
      "lineNbr": 77,
      "author": {
        "id": 1000397
      },
      "writtenOn": "2022-01-12T02:23:15Z",
      "side": 1,
      "message": "\u003e The udev rule will prevent the drive from being accessed by the update application but won\u0027t prevent the kernel from binding the usb-storage driver to the device. You\u0027d need to blacklist the driver for that to hold. I think you need to be more specific about what behaviour you\u0027re after here in the name of security.\n\u003e \n\u003e If you\u0027re going to talk security we need a threat model to reason against.\n\n\nFrom the current logic, we can only prevent the update application from accessing the drive through udev rules, and will not touch the USB storage drive.\nSo can I remove the Security column?\nOr do you have any suggestions?",
      "parentUuid": "a3bc2a1d_47e2d471",
      "range": {
        "startLine": 75,
        "startChar": 0,
        "endLine": 77,
        "endChar": 64
      },
      "revId": "49e0e4e389865df14f441bcaff8371490c0fc3ef",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5968fb67_a5b6b8c8",
        "filename": "designs/firmware-update-via-usb.md",
        "patchSetId": 7
      },
      "lineNbr": 77,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2022-01-12T03:23:19Z",
      "side": 1,
      "message": "I\u0027m saying if we\u0027re going to have discussion about security then we need to know what it is we\u0027re trying to secure.\n\nHowever I think things might be confused by your discussion of the \"USB driver\" specifically. I think you instead want to say you want to disable \"USB code update\" if physical security is a concern?",
      "parentUuid": "f50888e3_e59e0572",
      "range": {
        "startLine": 75,
        "startChar": 0,
        "endLine": 77,
        "endChar": 64
      },
      "revId": "49e0e4e389865df14f441bcaff8371490c0fc3ef",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f6eb6633_634c2cac",
        "filename": "designs/firmware-update-via-usb.md",
        "patchSetId": 7
      },
      "lineNbr": 77,
      "author": {
        "id": 1000397
      },
      "writtenOn": "2022-01-12T03:31:55Z",
      "side": 1,
      "message": "\u003e I\u0027m saying if we\u0027re going to have discussion about security then we need to know what it is we\u0027re trying to secure.\n\u003e \n\u003e However I think things might be confused by your discussion of the \"USB driver\" specifically. I think you instead want to say you want to disable \"USB code update\" if physical security is a concern?\n\nYes, if it\u0027s a physical security issue, we should disable \"USB code update\" via Redfish",
      "parentUuid": "5968fb67_a5b6b8c8",
      "range": {
        "startLine": 75,
        "startChar": 0,
        "endLine": 77,
        "endChar": 64
      },
      "revId": "49e0e4e389865df14f441bcaff8371490c0fc3ef",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3c0eac94_71d676d4",
        "filename": "designs/firmware-update-via-usb.md",
        "patchSetId": 7
      },
      "lineNbr": 77,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2022-01-12T03:54:58Z",
      "side": 1,
      "message": "Right. Can you update the words in the document to reflect that?",
      "parentUuid": "f6eb6633_634c2cac",
      "range": {
        "startLine": 75,
        "startChar": 0,
        "endLine": 77,
        "endChar": 64
      },
      "revId": "49e0e4e389865df14f441bcaff8371490c0fc3ef",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c50071c4_dc863fff",
        "filename": "designs/firmware-update-via-usb.md",
        "patchSetId": 7
      },
      "lineNbr": 83,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2022-01-10T01:04:12Z",
      "side": 1,
      "message": "Can you do this in qemu?",
      "range": {
        "startLine": 82,
        "startChar": 1,
        "endLine": 83,
        "endChar": 44
      },
      "revId": "49e0e4e389865df14f441bcaff8371490c0fc3ef",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cbdb4930_995a743e",
        "filename": "designs/firmware-update-via-usb.md",
        "patchSetId": 7
      },
      "lineNbr": 83,
      "author": {
        "id": 1000397
      },
      "writtenOn": "2022-01-10T07:19:23Z",
      "side": 1,
      "message": "\u003e Can you do this in qemu?\n\nYeah, I think it is possible, we can simulate `/dev/sda1` on qemu and enable the service (systemctl start usb-code-update@sda1.service)",
      "parentUuid": "c50071c4_dc863fff",
      "range": {
        "startLine": 82,
        "startChar": 1,
        "endLine": 83,
        "endChar": 44
      },
      "revId": "49e0e4e389865df14f441bcaff8371490c0fc3ef",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4a87b0de_d1147a07",
        "filename": "designs/firmware-update-via-usb.md",
        "patchSetId": 7
      },
      "lineNbr": 83,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2022-01-11T01:11:35Z",
      "side": 1,
      "message": "Right, so I think you need to put words here saying you\u0027ll work on some test scripts to implement this?",
      "parentUuid": "cbdb4930_995a743e",
      "range": {
        "startLine": 82,
        "startChar": 1,
        "endLine": 83,
        "endChar": 44
      },
      "revId": "49e0e4e389865df14f441bcaff8371490c0fc3ef",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b6e416c7_c1a54681",
        "filename": "designs/firmware-update-via-usb.md",
        "patchSetId": 7
      },
      "lineNbr": 83,
      "author": {
        "id": 1000397
      },
      "writtenOn": "2022-01-12T02:23:15Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "4a87b0de_d1147a07",
      "range": {
        "startLine": 82,
        "startChar": 1,
        "endLine": 83,
        "endChar": 44
      },
      "revId": "49e0e4e389865df14f441bcaff8371490c0fc3ef",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}