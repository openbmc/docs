{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "a2fede5f_de73fabc",
        "filename": "designs/inventory/gpio-based-hardware-inventory.md",
        "patchSetId": 4
      },
      "lineNbr": 109,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2024-09-04T16:24:21Z",
      "side": 1,
      "message": "This seems like a really big alternative design point that needs to be explored further.  I\u0027d much prefer entity-manager to be extended to handle GPIO-based presence directly (or by probe matches on some other daemon) rather than state being spread across phosphor-gpio-monitor _and_ entity-manager.\n\nEM allowing Presence to not always be true, but instead written by other processes, seems like a very large deviation from the current design.\n\nJagpal is working on leak detection and it seems like his design also needs entity-manager configuration after the detection of a leak-reporting-cable.  I would expect this feature and his feature to be closely related.  Your design should allow configuration to be exposed due to GPIO state (of the cable being presence) so that his daemon can consume the EM config for leaks reported by that cable.",
      "range": {
        "startLine": 105,
        "startChar": 0,
        "endLine": 109,
        "endChar": 53
      },
      "revId": "8fe198ea0b0fcf98da174ebc57c1469fc0804f79",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9569c672_79a1b189",
        "filename": "designs/inventory/gpio-based-hardware-inventory.md",
        "patchSetId": 4
      },
      "lineNbr": 109,
      "author": {
        "id": 1001712
      },
      "writtenOn": "2024-09-09T12:54:50Z",
      "side": 1,
      "message": "\u003e This seems like a really big alternative design point that needs to be explored further. I\u0027d much prefer entity-manager to be extended to handle GPIO-based presence directly (or by probe matches on some other daemon) rather than state being spread across phosphor-gpio-monitor and entity-manager.\n\nMakes sense to me, but this is explicitly out of scope of the EM design as per it\u0027s readme. That\u0027s from August 2020.\n\n\u003e Entity manager shall not directly participate in the detection of devices, and instead will rely on other D-Bus applications to publish interfaces that can be detected.\n\nSo it\u0027s good to have the EM maintainers here to discuss this.\n\nIf EM were to directly use the GPIOs to detect hw, it would simplify the logic.\nBecause the gpio can be requested synchronously, failing if another program already requested it. So there would be no need to expose configuration, wait for the other daemon to generate the property changed event, and then proceeding to probe other things.",
      "parentUuid": "a2fede5f_de73fabc",
      "range": {
        "startLine": 105,
        "startChar": 0,
        "endLine": 109,
        "endChar": 53
      },
      "revId": "8fe198ea0b0fcf98da174ebc57c1469fc0804f79",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2de37561_810b1799",
        "filename": "designs/inventory/gpio-based-hardware-inventory.md",
        "patchSetId": 4
      },
      "lineNbr": 109,
      "author": {
        "id": 1000008
      },
      "writtenOn": "2024-09-09T16:48:58Z",
      "side": 1,
      "message": "There\u0027s been a few proposals over the years to put GPIO values directly on D-Bus, and they\u0027ve all been shot down with https://github.com/openbmc/docs/blob/master/anti-patterns.md#dbus-interface-representing-gpios, not that that\u0027s being proposed here.\n\n@Ed maybe you could weigh in on where you\u0027d like to see GPIO presence for arbitrary FRUs being done.",
      "parentUuid": "9569c672_79a1b189",
      "range": {
        "startLine": 105,
        "startChar": 0,
        "endLine": 109,
        "endChar": 53
      },
      "revId": "8fe198ea0b0fcf98da174ebc57c1469fc0804f79",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}