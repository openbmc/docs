{
  "comments": [
    {
      "key": {
        "uuid": "a9822372_c2ac0b7c",
        "filename": "designs/estoraged.md",
        "patchSetId": 1
      },
      "lineNbr": 16,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2021-09-08T14:59:51Z",
      "side": 1,
      "message": "Should we restrict this to eMMC devices or should we be able to easily extend this to USB keys and NVMe drives (attached over the BMC\u0027s PCIe)?",
      "range": {
        "startLine": 16,
        "startChar": 48,
        "endLine": 16,
        "endChar": 77
      },
      "revId": "c10646efd854d4b36626540da20d05a619172579",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1cdccd79_06e1481f",
        "filename": "designs/estoraged.md",
        "patchSetId": 1
      },
      "lineNbr": 16,
      "author": {
        "id": 1001202
      },
      "writtenOn": "2021-09-08T22:32:56Z",
      "side": 1,
      "message": "My initial thinking was to make this generic for any type of storage device, but I wanted to make use the eMMC-specific password feature (CMD42). So my current plan to make this unique to eMMC devices.\n\nIf you think we might want to use this daemon with other types of storage devices, we could provide a way to leave out the eMMC device password and just use the encryption for those devices.",
      "parentUuid": "a9822372_c2ac0b7c",
      "range": {
        "startLine": 16,
        "startChar": 48,
        "endLine": 16,
        "endChar": 77
      },
      "revId": "c10646efd854d4b36626540da20d05a619172579",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c69fe7d1_431abddd",
        "filename": "designs/estoraged.md",
        "patchSetId": 1
      },
      "lineNbr": 16,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2021-09-09T17:04:02Z",
      "side": 1,
      "message": "Re CMD42.  Doesn\u0027t SD also support that?  Isn\u0027t there an equivalent feature on normal SSDs?  CMD42 feels like an implementation of the feature and not the feature itself.",
      "parentUuid": "1cdccd79_06e1481f",
      "range": {
        "startLine": 16,
        "startChar": 48,
        "endLine": 16,
        "endChar": 77
      },
      "revId": "c10646efd854d4b36626540da20d05a619172579",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dbb7536d_6eedca14",
        "filename": "designs/estoraged.md",
        "patchSetId": 1
      },
      "lineNbr": 16,
      "author": {
        "id": 1001202
      },
      "writtenOn": "2021-09-10T00:47:55Z",
      "side": 1,
      "message": "SD does support the same CMD42. I\u0027m not familiar with SSDs, but they seem to have something similar.",
      "parentUuid": "c69fe7d1_431abddd",
      "range": {
        "startLine": 16,
        "startChar": 48,
        "endLine": 16,
        "endChar": 77
      },
      "revId": "c10646efd854d4b36626540da20d05a619172579",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9f7f3c00_9ca44313",
        "filename": "designs/estoraged.md",
        "patchSetId": 1
      },
      "lineNbr": 16,
      "author": {
        "id": 1000188
      },
      "writtenOn": "2021-09-14T06:20:43Z",
      "side": 1,
      "message": "I believe nearly all disks have a lock / unlock command of sorts. Not all of them implement it at all or well, but the command sets for SATA / NVME / MMC all support it.",
      "parentUuid": "dbb7536d_6eedca14",
      "range": {
        "startLine": 16,
        "startChar": 48,
        "endLine": 16,
        "endChar": 77
      },
      "revId": "c10646efd854d4b36626540da20d05a619172579",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8a03c36b_1569a1d8",
        "filename": "designs/estoraged.md",
        "patchSetId": 1
      },
      "lineNbr": 23,
      "author": {
        "id": 1000021
      },
      "writtenOn": "2021-09-08T03:11:15Z",
      "side": 1,
      "message": "Can you provide some background on the storage model you intend to use here?\n\nI take it these encrypted storage volumes are not where the root file system is stored?  Or if they are how does the device boot?\n\nInstead it seems like this is either for host eMMC or is for some auxiliary storage volumes.",
      "revId": "c10646efd854d4b36626540da20d05a619172579",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3c322509_974b7033",
        "filename": "designs/estoraged.md",
        "patchSetId": 1
      },
      "lineNbr": 23,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2021-09-08T14:59:51Z",
      "side": 1,
      "message": "üëç",
      "parentUuid": "8a03c36b_1569a1d8",
      "revId": "c10646efd854d4b36626540da20d05a619172579",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bd2685ee_f0ed2ac1",
        "filename": "designs/estoraged.md",
        "patchSetId": 1
      },
      "lineNbr": 23,
      "author": {
        "id": 1001202
      },
      "writtenOn": "2021-09-08T22:32:56Z",
      "side": 1,
      "message": "Sorry, I never mentioned that this is only meant to be used for secondary storage. I added a note about that.",
      "parentUuid": "3c322509_974b7033",
      "revId": "c10646efd854d4b36626540da20d05a619172579",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e542b3c6_f147aca6",
        "filename": "designs/estoraged.md",
        "patchSetId": 1
      },
      "lineNbr": 34,
      "author": {
        "id": 1000593
      },
      "writtenOn": "2021-09-09T16:52:40Z",
      "side": 1,
      "message": "when you add the ability to lock/unlock the emmc will you add it to the linux mmc driver, and create a sys fs interface \n√† la https://www.spinics.net/lists/linux-mmc/msg32007.html\n\nOr will this new daemon have act like a userspace driver?",
      "range": {
        "startLine": 34,
        "startChar": 23,
        "endLine": 34,
        "endChar": 58
      },
      "revId": "c10646efd854d4b36626540da20d05a619172579",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "de6df9fe_55187937",
        "filename": "designs/estoraged.md",
        "patchSetId": 1
      },
      "lineNbr": 34,
      "author": {
        "id": 1001202
      },
      "writtenOn": "2021-09-10T00:47:55Z",
      "side": 1,
      "message": "My original thinking was that it would all be in userspace, e.g. by adding it to mmc utils: https://git.kernel.org/pub/scm/utils/mmc/mmc-utils.git/\n\nThat kernel patch looks useful. It doesn\u0027t look like it\u0027s actually in the mainline Linux, so we would need to add the patch to our kernel, if we want to add this functionality to the kernel driver.",
      "parentUuid": "e542b3c6_f147aca6",
      "range": {
        "startLine": 34,
        "startChar": 23,
        "endLine": 34,
        "endChar": 58
      },
      "revId": "c10646efd854d4b36626540da20d05a619172579",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cd89fe26_f966d713",
        "filename": "designs/estoraged.md",
        "patchSetId": 1
      },
      "lineNbr": 34,
      "author": {
        "id": 1000188
      },
      "writtenOn": "2021-09-14T06:20:43Z",
      "side": 1,
      "message": "We talked about this offline, but the ioctl interface should provide the ability to run the arbitrary command from userspace. You will find it easier than building a specific kernel interface to perform this logic.",
      "parentUuid": "de6df9fe_55187937",
      "range": {
        "startLine": 34,
        "startChar": 23,
        "endLine": 34,
        "endChar": 58
      },
      "revId": "c10646efd854d4b36626540da20d05a619172579",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a3607e81_0ea3f2b6",
        "filename": "designs/estoraged.md",
        "patchSetId": 1
      },
      "lineNbr": 34,
      "author": {
        "id": 1000593
      },
      "writtenOn": "2021-09-14T23:47:00Z",
      "side": 1,
      "message": "sounds good, we have made progress on a user space tool",
      "parentUuid": "cd89fe26_f966d713",
      "range": {
        "startLine": 34,
        "startChar": 23,
        "endLine": 34,
        "endChar": 58
      },
      "revId": "c10646efd854d4b36626540da20d05a619172579",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9289199e_93cec4f8",
        "filename": "designs/estoraged.md",
        "patchSetId": 1
      },
      "lineNbr": 34,
      "author": {
        "id": 1001202
      },
      "writtenOn": "2021-09-15T00:24:30Z",
      "side": 1,
      "message": "I made note of this.",
      "parentUuid": "a3607e81_0ea3f2b6",
      "range": {
        "startLine": 34,
        "startChar": 23,
        "endLine": 34,
        "endChar": 58
      },
      "revId": "c10646efd854d4b36626540da20d05a619172579",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e5fa3544_089dbf1c",
        "filename": "designs/estoraged.md",
        "patchSetId": 1
      },
      "lineNbr": 69,
      "author": {
        "id": 1000021
      },
      "writtenOn": "2021-09-08T03:11:15Z",
      "side": 1,
      "message": "Again missing some of the model.  This says the host will be iniitating the request for a volume.  Are these expected to be exposed back to the host?  USB?  something else?",
      "revId": "c10646efd854d4b36626540da20d05a619172579",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5a0979ef_731a783a",
        "filename": "designs/estoraged.md",
        "patchSetId": 1
      },
      "lineNbr": 69,
      "author": {
        "id": 1001202
      },
      "writtenOn": "2021-09-08T22:32:56Z",
      "side": 1,
      "message": "I think this paragraph adds unnecessary confusion. No, the volume is not expected to be exposed externally. (In the way I plan to use it, the host will know this encrypted eMMC exists, but it won\u0027t have access to the data.)\n\nI re-worked this paragraph to hopefully be less confusing, but let me know if something isn\u0027t clear.",
      "parentUuid": "e5fa3544_089dbf1c",
      "revId": "c10646efd854d4b36626540da20d05a619172579",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9ada093e_61d48634",
        "filename": "designs/estoraged.md",
        "patchSetId": 1
      },
      "lineNbr": 75,
      "author": {
        "id": 1000593
      },
      "writtenOn": "2021-09-09T01:45:07Z",
      "side": 1,
      "message": "do you need decrypt method.",
      "range": {
        "startLine": 75,
        "startChar": 11,
        "endLine": 75,
        "endChar": 18
      },
      "revId": "c10646efd854d4b36626540da20d05a619172579",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4045b938_b3c83b84",
        "filename": "designs/estoraged.md",
        "patchSetId": 1
      },
      "lineNbr": 75,
      "author": {
        "id": 1001202
      },
      "writtenOn": "2021-09-10T00:47:55Z",
      "side": 1,
      "message": "Maybe the name could be better, but this is really meant to be an initial formatting operation, to set up the encrypted filesystem on the device. The \"decrypt\" functionality you\u0027re thinking of might be what the Unlock method is for, which gets us access to the volume key, allowing us to read/write the encrypted data on the device.",
      "parentUuid": "9ada093e_61d48634",
      "range": {
        "startLine": 75,
        "startChar": 11,
        "endLine": 75,
        "endChar": 18
      },
      "revId": "c10646efd854d4b36626540da20d05a619172579",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8217baae_d2707d62",
        "filename": "designs/estoraged.md",
        "patchSetId": 1
      },
      "lineNbr": 75,
      "author": {
        "id": 1000188
      },
      "writtenOn": "2021-09-14T06:20:43Z",
      "side": 1,
      "message": "You probably want to name this \"format\" as that is how other tooling refers to it.",
      "parentUuid": "4045b938_b3c83b84",
      "range": {
        "startLine": 75,
        "startChar": 11,
        "endLine": 75,
        "endChar": 18
      },
      "revId": "c10646efd854d4b36626540da20d05a619172579",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d9147551_df12f4fe",
        "filename": "designs/estoraged.md",
        "patchSetId": 1
      },
      "lineNbr": 75,
      "author": {
        "id": 1001202
      },
      "writtenOn": "2021-09-15T00:24:30Z",
      "side": 1,
      "message": "Yeah, that\u0027s probably more clear. Done.",
      "parentUuid": "8217baae_d2707d62",
      "range": {
        "startLine": 75,
        "startChar": 11,
        "endLine": 75,
        "endChar": 18
      },
      "revId": "c10646efd854d4b36626540da20d05a619172579",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "56093a77_13a77794",
        "filename": "designs/estoraged.md",
        "patchSetId": 1
      },
      "lineNbr": 76,
      "author": {
        "id": 1000593
      },
      "writtenOn": "2021-09-09T01:45:07Z",
      "side": 1,
      "message": "Does erase need to shred/wipe or does it just need to zero?",
      "range": {
        "startLine": 76,
        "startChar": 11,
        "endLine": 76,
        "endChar": 16
      },
      "revId": "c10646efd854d4b36626540da20d05a619172579",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bd83322c_30bcff23",
        "filename": "designs/estoraged.md",
        "patchSetId": 1
      },
      "lineNbr": 76,
      "author": {
        "id": 1001202
      },
      "writtenOn": "2021-09-10T00:47:55Z",
      "side": 1,
      "message": "My plan for the erase is to do more than just write zeros. The security folks at Google prescribe a whole sequence of steps that involves more than just writing zeros.",
      "parentUuid": "56093a77_13a77794",
      "range": {
        "startLine": 76,
        "startChar": 11,
        "endLine": 76,
        "endChar": 16
      },
      "revId": "c10646efd854d4b36626540da20d05a619172579",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "639ed555_b455b8b5",
        "filename": "designs/estoraged.md",
        "patchSetId": 1
      },
      "lineNbr": 76,
      "author": {
        "id": 1000188
      },
      "writtenOn": "2021-09-14T06:20:43Z",
      "side": 1,
      "message": "We probably want to make it possible to specify strategies here, in case multiple parties have different opinions on what secure erased means.",
      "parentUuid": "bd83322c_30bcff23",
      "range": {
        "startLine": 76,
        "startChar": 11,
        "endLine": 76,
        "endChar": 16
      },
      "revId": "c10646efd854d4b36626540da20d05a619172579",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "74ea5c1b_94dd0c94",
        "filename": "designs/estoraged.md",
        "patchSetId": 1
      },
      "lineNbr": 76,
      "author": {
        "id": 1000593
      },
      "writtenOn": "2021-09-14T23:47:00Z",
      "side": 1,
      "message": "Agree",
      "parentUuid": "639ed555_b455b8b5",
      "range": {
        "startLine": 76,
        "startChar": 11,
        "endLine": 76,
        "endChar": 16
      },
      "revId": "c10646efd854d4b36626540da20d05a619172579",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "308cf46d_1f94608d",
        "filename": "designs/estoraged.md",
        "patchSetId": 1
      },
      "lineNbr": 76,
      "author": {
        "id": 1001202
      },
      "writtenOn": "2021-09-15T00:24:30Z",
      "side": 1,
      "message": "I made note of this in the doc.",
      "parentUuid": "74ea5c1b_94dd0c94",
      "range": {
        "startLine": 76,
        "startChar": 11,
        "endLine": 76,
        "endChar": 16
      },
      "revId": "c10646efd854d4b36626540da20d05a619172579",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d49b3b90_7a9da395",
        "filename": "designs/estoraged.md",
        "patchSetId": 1
      },
      "lineNbr": 100,
      "author": {
        "id": 1001129
      },
      "writtenOn": "2021-09-08T02:10:43Z",
      "side": 1,
      "message": "It might be worth making it clear that the CMD42 device password must be different from the encryption password? Otherwise it could be recoverable from the eMMC and then used against the encryption.",
      "revId": "c10646efd854d4b36626540da20d05a619172579",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6608295b_999eccf2",
        "filename": "designs/estoraged.md",
        "patchSetId": 1
      },
      "lineNbr": 100,
      "author": {
        "id": 1001202
      },
      "writtenOn": "2021-09-08T22:32:56Z",
      "side": 1,
      "message": "I added a note about this.",
      "parentUuid": "d49b3b90_7a9da395",
      "revId": "c10646efd854d4b36626540da20d05a619172579",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8f565c74_54f5b43e",
        "filename": "designs/estoraged.md",
        "patchSetId": 1
      },
      "lineNbr": 107,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2021-09-08T14:59:51Z",
      "side": 1,
      "message": "Have you looked at UDisks2?  Does it provide most of what is needed?  It seems like UDisks2 has most of the dbus APIs you already mentioned above between the Encrypted and Block objects.  Maybe we could enhance it for what is missing?\n\nhttp://storaged.org/doc/udisks2-api/2.7.5/gdbus-org.freedesktop.UDisks2.Encrypted.html",
      "revId": "c10646efd854d4b36626540da20d05a619172579",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "621e041c_5be753bf",
        "filename": "designs/estoraged.md",
        "patchSetId": 1
      },
      "lineNbr": 107,
      "author": {
        "id": 1001202
      },
      "writtenOn": "2021-09-08T22:32:56Z",
      "side": 1,
      "message": "Hmm, thanks for pointing that out. I wasn\u0027t aware of UDisks2 and I just added a paragraph about it. I see it provides methods for Lock, Unlock, and ChangePassphrase. But it doesn\u0027t provide a way to do the initial encryption setup or wipe the device. Even if I enhanced UDisks2 to include those operations, I don\u0027t think I would be able to add the eMMC device password functionality, which is eMMC-specific. So, I\u0027m leaning away from UDisks2, but I\u0027d be interested to see if other people think I should pursue that route instead.",
      "parentUuid": "8f565c74_54f5b43e",
      "revId": "c10646efd854d4b36626540da20d05a619172579",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "41b5be6e_5ba34b52",
        "filename": "designs/estoraged.md",
        "patchSetId": 1
      },
      "lineNbr": 107,
      "author": {
        "id": 1000593
      },
      "writtenOn": "2021-09-09T01:45:07Z",
      "side": 1,
      "message": "using Udisk2 has some advantages because it is a generic disk managing deamon, rather then a custom secondary emmc tool. To use Udisk2 we would have to:\n - add a way lock/unlock the emmc\n - add a way to erase the device (you open the block and write zeros to it...)\n - make sure the size requirements were not an issue\n\n\nThere is a method for formatting a block \nhttp://storaged.org/doc/udisks2-api/latest/gdbus-org.freedesktop.UDisks2.Block.html#gdbus-method-org-freedesktop-UDisks2-Block.Format\nencrypting, decrypting, Changing the Password, and getting the status.\n\nIt is a very interesting suggestion.",
      "parentUuid": "621e041c_5be753bf",
      "revId": "c10646efd854d4b36626540da20d05a619172579",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "427663c4_47f784dd",
        "filename": "designs/estoraged.md",
        "patchSetId": 1
      },
      "lineNbr": 107,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2021-09-09T17:04:02Z",
      "side": 1,
      "message": "\u003e Even if I enhanced UDisks2 to include those operations, I don\u0027t think I would be able to add the eMMC device password functionality, which is eMMC-specific. \n\nAs I mentioned above, I feel that this is an implementation of a \"hardware lock\" and not something entirely unique to eMMC.  Depending on how it is implemented at a kernel level, it is possible that the eMMC/SD-specifics end up being abstracted away by the kernel.\n\n\u003e So, I\u0027m leaning away from UDisks2, but I\u0027d be interested to see if other people think I should pursue that route instead.\n\nI really think we should write up everything missing by UDisk2 and approach that project with our needs (and be willing to enhance it).  UDisk2 is widely leveraged by Linux-on-Desktop.  If we have a project that does 80% of what we desire and we can enhance it for the extra 20%, I\u0027d way rather do that than write 100% unique code for us.",
      "parentUuid": "41b5be6e_5ba34b52",
      "revId": "c10646efd854d4b36626540da20d05a619172579",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "010cdb02_b1979530",
        "filename": "designs/estoraged.md",
        "patchSetId": 1
      },
      "lineNbr": 107,
      "author": {
        "id": 1001202
      },
      "writtenOn": "2021-09-10T00:47:55Z",
      "side": 1,
      "message": "Thanks John for pointing out that the Format method is in fact capable of setting up encryption, which might make UDisks2 more appealing. It looks like the same method also has an erase feature, which can either write zeros to the device or do an ATA secure erase.\n\nSome things I noticed when looking through the UDisks2 code and documentation:\n- It would be nice if the Format method exposed more options for the encryption setup, e.g. cipher and volume key. But it mostly does what I want, except that it doesn\u0027t enforce a minimum amount of entropy when generating the volume key. At the very least, maybe I could check that there\u0027s enough entropy before calling Format.\n- The erase feature in Format probably won\u0027t satisfy the security folks at Google, since they expect a secure erase operation to involve more than just writing zeros.\n- I don\u0027t see anything in UDisks2 that would provide the hardware lock capability (CMD42). It doesn\u0027t look like the existing Lock and Unlock methods are intended to lock/unlock at the hardware level. If I do end up using UDisks2, I might still need something else to do the hardware lock.",
      "parentUuid": "427663c4_47f784dd",
      "revId": "c10646efd854d4b36626540da20d05a619172579",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b2cbac95_e8fc7bf1",
        "filename": "designs/estoraged.md",
        "patchSetId": 1
      },
      "lineNbr": 107,
      "author": {
        "id": 1000593
      },
      "writtenOn": "2021-09-13T23:35:32Z",
      "side": 1,
      "message": "We looked at udisks2 and the project is very large when built (15MiB after removing polkit) on a bmc. It has a bunch of functionality that we don\u0027t need. The changes we would have to do to make it acceptable (2Mib) for our flash size would be extensive, and time consuming to maintain .\nWe think having a small custom daemon would be easier to maintain, and less effort to produce. \n\nLet us know if there are any tools that could drastically decrease the size of udisks2. \nThank you",
      "parentUuid": "010cdb02_b1979530",
      "revId": "c10646efd854d4b36626540da20d05a619172579",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "054c9dd6_ec468140",
        "filename": "designs/estoraged.md",
        "patchSetId": 1
      },
      "lineNbr": 107,
      "author": {
        "id": 1000188
      },
      "writtenOn": "2021-09-14T06:20:43Z",
      "side": 1,
      "message": "Yeah, it wouldn\u0027t be that much new code to wrap libcryptsetup and do the lock / unlock bits. The erase method would be unique to us anyway.",
      "parentUuid": "b2cbac95_e8fc7bf1",
      "revId": "c10646efd854d4b36626540da20d05a619172579",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5cc43944_89025342",
        "filename": "designs/estoraged.md",
        "patchSetId": 1
      },
      "lineNbr": 107,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2021-09-14T21:27:58Z",
      "side": 1,
      "message": "\u003e We looked at udisks2 and the project is very large when built (15MiB after removing polkit) on a bmc.\n\nWe need to at least add this as rationale to the doc.\n\nBut, I really don\u0027t believe this.\n\n```\n-rwxr-xr-x 1 root root 493280 Aug  2 07:46 /usr/libexec/udisks2/udisksd\n-rwxr-xr-x 1 root root 545336 Aug  2 07:46 /usr/lib64/libudisks2.so.0.0.0\n-rwxr-xr-x 1 root root 60512 Aug  2 07:46 /usr/bin/udisksctl\n```\n\nThe entire application suite (minus the debug information and manpages) is only 1MB _uncompressed_ on my Linux desktop.  Are we really doing the right comparison?  Are you sure you looked at the _stripped_ version of the build?",
      "parentUuid": "054c9dd6_ec468140",
      "revId": "c10646efd854d4b36626540da20d05a619172579",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c16cf55c_a0e3410e",
        "filename": "designs/estoraged.md",
        "patchSetId": 1
      },
      "lineNbr": 107,
      "author": {
        "id": 1000188
      },
      "writtenOn": "2021-09-14T21:29:39Z",
      "side": 1,
      "message": "You need to compare all of the transitive dependencies that get added too. Someone can probably print an image diff with all of the files that get pulled in.",
      "parentUuid": "5cc43944_89025342",
      "revId": "c10646efd854d4b36626540da20d05a619172579",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c982d4f0_233b08e0",
        "filename": "designs/estoraged.md",
        "patchSetId": 1
      },
      "lineNbr": 107,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2021-09-14T21:43:05Z",
      "side": 1,
      "message": "Ok.  That wasn\u0027t what I derived from the claim: \"the project is very large when built\".\n\nI\u0027m looking at the dependencies on gentoo and they\u0027re really not that big.  The only one that is obvious is `parted`.  Maybe that is where the mess is coming from.",
      "parentUuid": "c16cf55c_a0e3410e",
      "revId": "c10646efd854d4b36626540da20d05a619172579",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "00145e3a_deecabce",
        "filename": "designs/estoraged.md",
        "patchSetId": 1
      },
      "lineNbr": 107,
      "author": {
        "id": 1001202
      },
      "writtenOn": "2021-09-14T23:21:38Z",
      "side": 1,
      "message": "I did an image diff between an image with udisks and one without. Here are some of the larger items that showed up in the image when adding udisks. This only includes things \u003e1 MB.\n\n\u003e 1.1M  ./usr/bin/pk11ectest\n\u003e 1.5M  ./usr/bin/rsaperf\n\u003e 1.5M  ./usr/lib/libgio-2.0.so.0.6800.4\n\u003e 1.1M  ./usr/lib/libglib-2.0.so.0.6800.4\n\u003e 21M   ./usr/lib/libmozjs-60.so\n\u003e 1.1M  ./usr/lib/libnss3.so\n\u003e 2.6M  ./usr/lib/libpython3.9.so.1.0\n\u003e 1.1M  ./usr/lib/libsqlite3.so.0.8.6\n\u003e 39M   ./usr/lib/python3.9\n\u003e 1.5M  ./usr/lib/python3.9/asyncio\n\u003e 1.1M  ./usr/lib/python3.9/asyncio/__pycache__\n\u003e 1.8M  ./usr/lib/python3.9/distutils\n\u003e 1.2M  ./usr/lib/python3.9/email\n\u003e 2.5M  ./usr/lib/python3.9/encodings\n\u003e 1.2M  ./usr/lib/python3.9/encodings/__pycache__\n\u003e 2.8M  ./usr/lib/python3.9/idlelib\n\u003e 1.7M  ./usr/lib/python3.9/idlelib/__pycache__\n\u003e 4.2M  ./usr/lib/python3.9/lib-dynload\n\u003e 1.1M  ./usr/lib/python3.9/lib-dynload/unicodedata.cpython-39-arm-linux-gnueabi.so\n\u003e 9.1M  ./usr/lib/python3.9/__pycache__\n\u003e 1.9M  ./usr/lib/python3.9/pydoc_data\n\u003e 1.3M  ./usr/lib/python3.9/pydoc_data/__pycache__\n\u003e 1.3M  ./usr/lib/python3.9/tkinter",
      "parentUuid": "c982d4f0_233b08e0",
      "revId": "c10646efd854d4b36626540da20d05a619172579",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5b24b149_c033c025",
        "filename": "designs/estoraged.md",
        "patchSetId": 1
      },
      "lineNbr": 107,
      "author": {
        "id": 1000593
      },
      "writtenOn": "2021-09-14T23:47:00Z",
      "side": 1,
      "message": "The python and js can be removed with polkit, but the libglib, libgio, alone put us 2.6MiB, and they would be very difficult to remove. \n\nI don\u0027t know what effort it would take to remove libnss3, pk11ectest, rsaperf, libsqlite3, and maintain. We can look into this more, but it will be over 2.6MiB regardless. \n\nIt is very possible we have different drive sizes, and different pain tolerances for image size.",
      "parentUuid": "00145e3a_deecabce",
      "revId": "c10646efd854d4b36626540da20d05a619172579",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c1f4bc0a_7e67fc71",
        "filename": "designs/estoraged.md",
        "patchSetId": 1
      },
      "lineNbr": 118,
      "author": {
        "id": 1000021
      },
      "writtenOn": "2021-09-08T03:11:15Z",
      "side": 1,
      "message": "you\u0027ve already implied IPMI or other commands to invoke this D-bus API.",
      "revId": "c10646efd854d4b36626540da20d05a619172579",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "59a016d1_2f089bb7",
        "filename": "designs/estoraged.md",
        "patchSetId": 1
      },
      "lineNbr": 118,
      "author": {
        "id": 1001202
      },
      "writtenOn": "2021-09-08T22:32:56Z",
      "side": 1,
      "message": "I added a note about how there may need to be a client daemon to make use of eStoraged. I removed the mention of IPMI from the example use case above, since it probably just added confusion. (At one point, I considered having an IPMI daemon that would make use of eStoraged.) But you don\u0027t necessarily need to use IPMI, to make use of this daemon. Let me know if you think something is missing from this section.",
      "parentUuid": "c1f4bc0a_7e67fc71",
      "revId": "c10646efd854d4b36626540da20d05a619172579",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": false
    }
  ]
}