{
  "comments": [
    {
      "key": {
        "uuid": "6f5275ed_5753195f",
        "filename": "designs/estoraged.md",
        "patchSetId": 3
      },
      "lineNbr": 107,
      "author": {
        "id": 1000233
      },
      "writtenOn": "2021-09-28T00:01:31Z",
      "side": 1,
      "message": "It seems kind of strange to me to have the client provide multiple passwords. Couldn\u0027t eStoraged just derive those from one password?\n\nAlso, what happens if we want to use this with a device that doesn\u0027t support device-level locking? Can we still use the encrypted storage functionality in that case?",
      "range": {
        "startLine": 107,
        "startChar": 42,
        "endLine": 107,
        "endChar": 73
      },
      "revId": "de3f393df72c59d53ea701b687b257e7b3e485b5",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8fac0616_7afb972f",
        "filename": "designs/estoraged.md",
        "patchSetId": 3
      },
      "lineNbr": 107,
      "author": {
        "id": 1000593
      },
      "writtenOn": "2021-09-28T17:12:46Z",
      "side": 1,
      "message": "I would like to see an interface for locking, that would be able to support NVME, SATA when they need to be supported. \n\nI could understand supporting different passwords, but not requiring they be different. \nI would like to hear Wedig\u0027s thoughts on this.",
      "parentUuid": "6f5275ed_5753195f",
      "range": {
        "startLine": 107,
        "startChar": 42,
        "endLine": 107,
        "endChar": 73
      },
      "revId": "de3f393df72c59d53ea701b687b257e7b3e485b5",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8ecbebef_2d4064d4",
        "filename": "designs/estoraged.md",
        "patchSetId": 3
      },
      "lineNbr": 107,
      "author": {
        "id": 1001202
      },
      "writtenOn": "2021-09-28T18:43:26Z",
      "side": 1,
      "message": "I like the idea of having the client only provide one password, and having eStoraged generate the 2 passwords. The 2 passwords should be different in case one of them gets leaked, e.g. we don\u0027t know how securely the eMMC actually manages its password.\n\nRegarding devices that don\u0027t support device-level locking, we can plan to support encryption-only locking in that case. Are you recommending that eStoraged not limit itself to just eMMC devices? It would enable device-level locking for a particular device if the device supports it (and we\u0027ve implemented support for it in eStoraged).",
      "parentUuid": "8fac0616_7afb972f",
      "range": {
        "startLine": 107,
        "startChar": 42,
        "endLine": 107,
        "endChar": 73
      },
      "revId": "de3f393df72c59d53ea701b687b257e7b3e485b5",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5bca11a8_93cd2ce2",
        "filename": "designs/estoraged.md",
        "patchSetId": 3
      },
      "lineNbr": 107,
      "author": {
        "id": 1000188
      },
      "writtenOn": "2021-09-28T21:58:25Z",
      "side": 1,
      "message": "Yeah, I was kinda hoping you would 1-way hash the luks passphrase to the eMMC one since the eMMC one is the outer boundary. This would also make the locking detail less relevant to the callers of this interface.",
      "parentUuid": "8ecbebef_2d4064d4",
      "range": {
        "startLine": 107,
        "startChar": 42,
        "endLine": 107,
        "endChar": 73
      },
      "revId": "de3f393df72c59d53ea701b687b257e7b3e485b5",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1b877e60_c3903d05",
        "filename": "designs/estoraged.md",
        "patchSetId": 3
      },
      "lineNbr": 107,
      "author": {
        "id": 1000233
      },
      "writtenOn": "2021-09-28T22:27:24Z",
      "side": 1,
      "message": "\u003eAre you recommending that eStoraged not limit itself to just eMMC devices?\n\nEven if it doesn\u0027t support anything besides eMMC devices, it would still be useful to have the D-Bus interface be generic enough to allow other daemons to implement it and support non-eMMC devices.",
      "parentUuid": "5bca11a8_93cd2ce2",
      "range": {
        "startLine": 107,
        "startChar": 42,
        "endLine": 107,
        "endChar": 73
      },
      "revId": "de3f393df72c59d53ea701b687b257e7b3e485b5",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "aa408d53_c1b35370",
        "filename": "designs/estoraged.md",
        "patchSetId": 3
      },
      "lineNbr": 107,
      "author": {
        "id": 1000593
      },
      "writtenOn": "2021-09-30T21:51:53Z",
      "side": 1,
      "message": "yeah, I agree with Benjamin. We only implement the device level locking for emmc However, we use an interface that is generic enough for others to later support any device-level locking they want.",
      "parentUuid": "1b877e60_c3903d05",
      "range": {
        "startLine": 107,
        "startChar": 42,
        "endLine": 107,
        "endChar": 73
      },
      "revId": "de3f393df72c59d53ea701b687b257e7b3e485b5",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7428530b_84c9481f",
        "filename": "designs/estoraged.md",
        "patchSetId": 3
      },
      "lineNbr": 107,
      "author": {
        "id": 1000188
      },
      "writtenOn": "2021-10-04T17:53:36Z",
      "side": 1,
      "message": "It looks like this is still unaddressed?",
      "parentUuid": "aa408d53_c1b35370",
      "range": {
        "startLine": 107,
        "startChar": 42,
        "endLine": 107,
        "endChar": 73
      },
      "revId": "de3f393df72c59d53ea701b687b257e7b3e485b5",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f04d7017_c02c4e09",
        "filename": "designs/estoraged.md",
        "patchSetId": 3
      },
      "lineNbr": 107,
      "author": {
        "id": 1001202
      },
      "writtenOn": "2021-10-04T18:13:52Z",
      "side": 1,
      "message": "Have you looked at the latest patchset (#5)? I mentioned there that the 2 passwords will be generated from the 1 password that the client provides. And I updated the doc to convey that we\u0027ll leave open the possibility of adding device locking for other types of devices in the future. Is there something else I\u0027m missing?",
      "parentUuid": "7428530b_84c9481f",
      "range": {
        "startLine": 107,
        "startChar": 42,
        "endLine": 107,
        "endChar": 73
      },
      "revId": "de3f393df72c59d53ea701b687b257e7b3e485b5",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "eeadc911_4a802dee",
        "filename": "designs/estoraged.md",
        "patchSetId": 3
      },
      "lineNbr": 107,
      "author": {
        "id": 1000188
      },
      "writtenOn": "2021-10-05T09:32:53Z",
      "side": 1,
      "message": "I guess what I\u0027m trying to figure out is how the API looks for passing the pssswords. Is it up to the caller to derive the different passwords? It seems like the lock / unlock interface would still take a password. And whatever is passed to format would be the luks password. Presumably systemd-cryptsetup is reading a keyfile or similar and that is what unlocks the disk?",
      "parentUuid": "f04d7017_c02c4e09",
      "range": {
        "startLine": 107,
        "startChar": 42,
        "endLine": 107,
        "endChar": 73
      },
      "revId": "de3f393df72c59d53ea701b687b257e7b3e485b5",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6d1d4611_1c1ececc",
        "filename": "designs/estoraged.md",
        "patchSetId": 3
      },
      "lineNbr": 107,
      "author": {
        "id": 1001202
      },
      "writtenOn": "2021-10-05T16:35:36Z",
      "side": 1,
      "message": "I\u0027m thinking the password provided by the caller will be the LUKS password (as you suggested). And eStoraged will take that and do a 1-way hash to generate the device password.\n\nYes, the lock/unlock methods will still require a password from the caller. Even when locking the eMMC device using CMD42, you still need to provide the device password, so we would need the LUKS password from the caller in order to generate the device password again. And likewise, I\u0027m expecting that the same LUKS password would also be required for the erase method.\n\nYes, systemd-cryptsetup typically uses a key file, but eStoraged won\u0027t use systemd-cryptsetup.\n\nLet me know if something is unclear.",
      "parentUuid": "eeadc911_4a802dee",
      "range": {
        "startLine": 107,
        "startChar": 42,
        "endLine": 107,
        "endChar": 73
      },
      "revId": "de3f393df72c59d53ea701b687b257e7b3e485b5",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    }
  ]
}