{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "2fc27df5_e41fe68d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 12
      },
      "lineNbr": 0,
      "author": {
        "id": 1001143
      },
      "writtenOn": "2022-04-04T19:03:53Z",
      "side": 1,
      "message": "Looks good to me. Thanks for all the updates Brandon and sorry for all the back and forth!",
      "revId": "897612067381687b1476635846883ccc5bbf560b",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7f875abc_0e3e72e7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 12
      },
      "lineNbr": 0,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2022-04-05T11:52:41Z",
      "side": 1,
      "message": "@AndrewJ - Can you review this before we merge it?",
      "revId": "897612067381687b1476635846883ccc5bbf560b",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "50a71be7_4b6a7f81",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 12
      },
      "lineNbr": 0,
      "author": {
        "id": 1000388
      },
      "writtenOn": "2022-04-11T19:39:24Z",
      "side": 1,
      "message": "gentle ping on this review - would like to request a repo creation by EOW if possible.",
      "revId": "897612067381687b1476635846883ccc5bbf560b",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "fdb2a462_896048d8",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 12
      },
      "lineNbr": 0,
      "author": {
        "id": 1000388
      },
      "writtenOn": "2022-04-14T15:51:21Z",
      "side": 1,
      "message": "Started pushing some basic code that we have to the docs repo as we need a place to push the code: https://gerrit.openbmc-project.xyz/c/openbmc/docs/+/52876/1",
      "parentUuid": "7f875abc_0e3e72e7",
      "revId": "897612067381687b1476635846883ccc5bbf560b",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "750358e1_e6b05f1d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 12
      },
      "lineNbr": 0,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2022-05-04T01:49:56Z",
      "side": 1,
      "message": "Mild concern about the scope of usefulness beyond Google\u0027s BIOS, but let\u0027s see how it goes. Looks okay to me.",
      "revId": "897612067381687b1476635846883ccc5bbf560b",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d3d41015_e7e3a7d9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 12
      },
      "lineNbr": 0,
      "author": {
        "id": 1000388
      },
      "writtenOn": "2022-05-04T02:33:35Z",
      "side": 1,
      "message": "Agreed, this might turn out that it\u0027s only useful to Google and there was an internal discussion on whether we should chuck it in openbmc/google-misc (which is for Google specific things). In the end, we wanted to push things to upstream-upstream and not just google-misc, as others may find use for it - especially the RDE decoding and BEJ decoding (which we\u0027re proposing to be in a separate repo)",
      "parentUuid": "750358e1_e6b05f1d",
      "revId": "897612067381687b1476635846883ccc5bbf560b",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "aab1f91f_4dbdc502",
        "filename": "designs/bios-bmc-smm-error-logging.md",
        "patchSetId": 12
      },
      "lineNbr": 7,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2022-05-04T19:19:00Z",
      "side": 1,
      "message": "Lets remove this now.",
      "range": {
        "startLine": 6,
        "startChar": 0,
        "endLine": 7,
        "endChar": 50
      },
      "revId": "897612067381687b1476635846883ccc5bbf560b",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "30dc70b3_c0831c0c",
        "filename": "designs/bios-bmc-smm-error-logging.md",
        "patchSetId": 12
      },
      "lineNbr": 7,
      "author": {
        "id": 1000388
      },
      "writtenOn": "2022-05-04T22:19:58Z",
      "side": 1,
      "message": "Oh, is this removed from the template now? Will do.",
      "parentUuid": "aab1f91f_4dbdc502",
      "range": {
        "startLine": 6,
        "startChar": 0,
        "endLine": 7,
        "endChar": 50
      },
      "revId": "897612067381687b1476635846883ccc5bbf560b",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "62c5d6d9_700b7ffa",
        "filename": "designs/bios-bmc-smm-error-logging.md",
        "patchSetId": 12
      },
      "lineNbr": 7,
      "author": {
        "id": 1000388
      },
      "writtenOn": "2022-05-06T20:14:02Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "30dc70b3_c0831c0c",
      "range": {
        "startLine": 6,
        "startChar": 0,
        "endLine": 7,
        "endChar": 50
      },
      "revId": "897612067381687b1476635846883ccc5bbf560b",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e336444c_678fef1d",
        "filename": "designs/bios-bmc-smm-error-logging.md",
        "patchSetId": 12
      },
      "lineNbr": 74,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2022-05-04T19:19:00Z",
      "side": 1,
      "message": "These sizes feel a little small.  Is this premature optimization?  Does it limit us in the future?  Only 16k?",
      "range": {
        "startLine": 73,
        "startChar": 0,
        "endLine": 74,
        "endChar": 207
      },
      "revId": "897612067381687b1476635846883ccc5bbf560b",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e0c05eba_8de3a1db",
        "filename": "designs/bios-bmc-smm-error-logging.md",
        "patchSetId": 12
      },
      "lineNbr": 74,
      "author": {
        "id": 1000388
      },
      "writtenOn": "2022-05-04T22:19:58Z",
      "side": 1,
      "message": "16K is unfortunately what is available in Nuvoton\u0027s chip for PCIe MMIO.\n\nHmm, that\u0027s fair points about future-proofing - let me ask internally if we should increase the normal queue size to 3 (but uncorrectable error region size will probably still remain 2)",
      "parentUuid": "e336444c_678fef1d",
      "range": {
        "startLine": 73,
        "startChar": 0,
        "endLine": 74,
        "endChar": 207
      },
      "revId": "897612067381687b1476635846883ccc5bbf560b",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b66e4668_e1744b8b",
        "filename": "designs/bios-bmc-smm-error-logging.md",
        "patchSetId": 12
      },
      "lineNbr": 74,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2022-05-04T22:40:30Z",
      "side": 1,
      "message": "How about 4 for both?  3 is kind of awkward.  You have 6 bytes of padding at the end anyhow.",
      "parentUuid": "e0c05eba_8de3a1db",
      "range": {
        "startLine": 73,
        "startChar": 0,
        "endLine": 74,
        "endChar": 207
      },
      "revId": "897612067381687b1476635846883ccc5bbf560b",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f03d7ed4_a2c3e786",
        "filename": "designs/bios-bmc-smm-error-logging.md",
        "patchSetId": 12
      },
      "lineNbr": 74,
      "author": {
        "id": 1000388
      },
      "writtenOn": "2022-05-05T00:20:02Z",
      "side": 1,
      "message": "I think we would probably keep the UE size to 2 as they are meant to be emergency and we are meant to have 1 log (with each logs supposed to be 500B ~ 1KB, 16KB should be plenty).\n\nAgreed, we can just make 4 byte for normal log size",
      "parentUuid": "b66e4668_e1744b8b",
      "range": {
        "startLine": 73,
        "startChar": 0,
        "endLine": 74,
        "endChar": 207
      },
      "revId": "897612067381687b1476635846883ccc5bbf560b",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "555a2f5d_15c36668",
        "filename": "designs/bios-bmc-smm-error-logging.md",
        "patchSetId": 12
      },
      "lineNbr": 74,
      "author": {
        "id": 1000388
      },
      "writtenOn": "2022-05-06T20:14:02Z",
      "side": 1,
      "message": "Kept UE size to 2, moved queue size to 4",
      "parentUuid": "f03d7ed4_a2c3e786",
      "range": {
        "startLine": 73,
        "startChar": 0,
        "endLine": 74,
        "endChar": 207
      },
      "revId": "897612067381687b1476635846883ccc5bbf560b",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6d26e525_626e8ba2",
        "filename": "designs/bios-bmc-smm-error-logging.md",
        "patchSetId": 12
      },
      "lineNbr": 74,
      "author": {
        "id": 1000388
      },
      "writtenOn": "2022-05-06T20:16:28Z",
      "side": 1,
      "message": "Oh, this will require the read and write pointers to also increase to 4. Making those changes too",
      "parentUuid": "555a2f5d_15c36668",
      "range": {
        "startLine": 73,
        "startChar": 0,
        "endLine": 74,
        "endChar": 207
      },
      "revId": "897612067381687b1476635846883ccc5bbf560b",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c6e0ff68_6b50ad54",
        "filename": "designs/bios-bmc-smm-error-logging.md",
        "patchSetId": 12
      },
      "lineNbr": 75,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2022-05-04T19:19:00Z",
      "side": 1,
      "message": "Is there a reason for this embedded HTML in markdown?",
      "range": {
        "startLine": 75,
        "startChar": 37,
        "endLine": 75,
        "endChar": 45
      },
      "revId": "897612067381687b1476635846883ccc5bbf560b",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "96aa0fbd_93572678",
        "filename": "designs/bios-bmc-smm-error-logging.md",
        "patchSetId": 12
      },
      "lineNbr": 75,
      "author": {
        "id": 1000388
      },
      "writtenOn": "2022-05-04T22:19:58Z",
      "side": 1,
      "message": "This allows us to have multiline / bullet points within the tables. From my understanding, git processes these properly so we should hopefully see this displayed as intended when pushed.",
      "parentUuid": "c6e0ff68_6b50ad54",
      "range": {
        "startLine": 75,
        "startChar": 37,
        "endLine": 75,
        "endChar": 45
      },
      "revId": "897612067381687b1476635846883ccc5bbf560b",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "09a1f5f3_a49cc178",
        "filename": "designs/bios-bmc-smm-error-logging.md",
        "patchSetId": 12
      },
      "lineNbr": 75,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2022-05-04T22:40:30Z",
      "side": 1,
      "message": "That\u0027s too bad that markdown doesn\u0027t have a better approach, only because of how ugly it looks in Gerrit / plaintext.",
      "parentUuid": "96aa0fbd_93572678",
      "range": {
        "startLine": 75,
        "startChar": 37,
        "endLine": 75,
        "endChar": 45
      },
      "revId": "897612067381687b1476635846883ccc5bbf560b",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4184a24c_bc2e8da5",
        "filename": "designs/bios-bmc-smm-error-logging.md",
        "patchSetId": 12
      },
      "lineNbr": 81,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2022-05-04T19:19:00Z",
      "side": 1,
      "message": "Is this really \"reserved\"?  Isn\u0027t it BIOS?",
      "range": {
        "startLine": 81,
        "startChar": 54,
        "endLine": 81,
        "endChar": 62
      },
      "revId": "897612067381687b1476635846883ccc5bbf560b",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2cf382f7_2083989b",
        "filename": "designs/bios-bmc-smm-error-logging.md",
        "patchSetId": 12
      },
      "lineNbr": 81,
      "author": {
        "id": 1000388
      },
      "writtenOn": "2022-05-04T22:19:58Z",
      "side": 1,
      "message": "Yeah that\u0027s a good point, will change to BIOS.",
      "parentUuid": "4184a24c_bc2e8da5",
      "range": {
        "startLine": 81,
        "startChar": 54,
        "endLine": 81,
        "endChar": 62
      },
      "revId": "897612067381687b1476635846883ccc5bbf560b",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2a96089b_2c988a3c",
        "filename": "designs/bios-bmc-smm-error-logging.md",
        "patchSetId": 12
      },
      "lineNbr": 81,
      "author": {
        "id": 1000388
      },
      "writtenOn": "2022-05-06T20:14:02Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2cf382f7_2083989b",
      "range": {
        "startLine": 81,
        "startChar": 54,
        "endLine": 81,
        "endChar": 62
      },
      "revId": "897612067381687b1476635846883ccc5bbf560b",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "efb28400_2d34de47",
        "filename": "designs/bios-bmc-smm-error-logging.md",
        "patchSetId": 12
      },
      "lineNbr": 87,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2022-05-04T19:19:00Z",
      "side": 1,
      "message": "How do you handle daemon restarts and/or BMC soft-reboots?  Aren\u0027t there cases where the physical memory space is already initialized before you start?  How do you avoid potential race conditions and/or deleting content from the SMM that came while you were away?",
      "range": {
        "startLine": 86,
        "startChar": 0,
        "endLine": 87,
        "endChar": 38
      },
      "revId": "897612067381687b1476635846883ccc5bbf560b",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "58b890ce_e62d2392",
        "filename": "designs/bios-bmc-smm-error-logging.md",
        "patchSetId": 12
      },
      "lineNbr": 87,
      "author": {
        "id": 1000388
      },
      "writtenOn": "2022-05-04T22:19:58Z",
      "side": 1,
      "message": "The assumption is that if the daemon restarted or the BMC soft-rebooted (which should be rare), we should not trust what is on the shared buffer and that we shall reinitialize.\n\nThe logs that were captured before, should have propagated to our databases through Redfish at this point as they are regularly polled for our use cases so the most logs we can lose would be whatever came in between the polling rate into the database.",
      "parentUuid": "efb28400_2d34de47",
      "range": {
        "startLine": 86,
        "startChar": 0,
        "endLine": 87,
        "endChar": 38
      },
      "revId": "897612067381687b1476635846883ccc5bbf560b",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "250e2edf_36077291",
        "filename": "designs/bios-bmc-smm-error-logging.md",
        "patchSetId": 12
      },
      "lineNbr": 87,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2022-05-04T22:40:30Z",
      "side": 1,
      "message": "Are you going to be able to safely indicate to the BIOS that the re-initialization happened?  Do you care to?\n\nWhat happens if the BMC soft-reboot is to install a new firmware version, which contains a change to the protocol?",
      "parentUuid": "58b890ce_e62d2392",
      "range": {
        "startLine": 86,
        "startChar": 0,
        "endLine": 87,
        "endChar": 38
      },
      "revId": "897612067381687b1476635846883ccc5bbf560b",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "273f50f3_7e94c594",
        "filename": "designs/bios-bmc-smm-error-logging.md",
        "patchSetId": 12
      },
      "lineNbr": 87,
      "author": {
        "id": 1000388
      },
      "writtenOn": "2022-05-05T00:20:02Z",
      "side": 1,
      "message": "The BIOS will have to respect that the BMC reset the buffer and will have to start the initialization again - so they care (that they have to reinitialze), but they do not care beyond that.\n\nWe do have the BMC and BIOS version embedded in the header for that purpose in case we need to update versions.",
      "parentUuid": "250e2edf_36077291",
      "range": {
        "startLine": 86,
        "startChar": 0,
        "endLine": 87,
        "endChar": 38
      },
      "revId": "897612067381687b1476635846883ccc5bbf560b",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4a0c9b22_05a5316f",
        "filename": "designs/bios-bmc-smm-error-logging.md",
        "patchSetId": 12
      },
      "lineNbr": 87,
      "author": {
        "id": 1000388
      },
      "writtenOn": "2022-05-11T22:34:29Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "273f50f3_7e94c594",
      "range": {
        "startLine": 86,
        "startChar": 0,
        "endLine": 87,
        "endChar": 38
      },
      "revId": "897612067381687b1476635846883ccc5bbf560b",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6d6979e5_b3469d95",
        "filename": "designs/bios-bmc-smm-error-logging.md",
        "patchSetId": 12
      },
      "lineNbr": 94,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2022-05-04T19:19:00Z",
      "side": 1,
      "message": "There is some sequencing required here that may require something like std::memory_order.  I\u0027m not sure if we need to document this in the design but it is a potential flaw I want to make sure the authors are thinking about.  There\u0027s probably a lot of memory_order issues in a memory FIFO between the two devices.",
      "range": {
        "startLine": 92,
        "startChar": 0,
        "endLine": 94,
        "endChar": 25
      },
      "revId": "897612067381687b1476635846883ccc5bbf560b",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "715fc571_6ed66165",
        "filename": "designs/bios-bmc-smm-error-logging.md",
        "patchSetId": 12
      },
      "lineNbr": 94,
      "author": {
        "id": 1000388
      },
      "writtenOn": "2022-05-04T22:19:58Z",
      "side": 1,
      "message": "First time reading through std::memory_order documentation - it seems like it\u0027s useful for inter-thread synchronization but this would be for inter-device synchronization right?",
      "parentUuid": "6d6979e5_b3469d95",
      "range": {
        "startLine": 92,
        "startChar": 0,
        "endLine": 94,
        "endChar": 25
      },
      "revId": "897612067381687b1476635846883ccc5bbf560b",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "db9c050f_ce58cc5e",
        "filename": "designs/bios-bmc-smm-error-logging.md",
        "patchSetId": 12
      },
      "lineNbr": 94,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2022-05-04T22:40:30Z",
      "side": 1,
      "message": "The memory operations you\u0027re doing in this device are, effectively, an MMIO.  You\u0027ll need to ensure that the writes are ordered from the observation of the external device and in some cases you\u0027ll want reads ordered based on status you\u0027re seeing in the buffer.  I think without the memory_order constraints the compiler would be free to reorder operations in an unexpected way.  Hopefully memory_order is sufficient...",
      "parentUuid": "715fc571_6ed66165",
      "range": {
        "startLine": 92,
        "startChar": 0,
        "endLine": 94,
        "endChar": 25
      },
      "revId": "897612067381687b1476635846883ccc5bbf560b",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6ca09e4c_da3af72f",
        "filename": "designs/bios-bmc-smm-error-logging.md",
        "patchSetId": 12
      },
      "lineNbr": 94,
      "author": {
        "id": 1000388
      },
      "writtenOn": "2022-05-05T00:20:02Z",
      "side": 1,
      "message": "Hmm, I see your point. Let me take a look at how to make use of std::memory_order and definitely consider adding them to the accesses. This would be some detailed implementation details so perhaps not fitting for this design doc but definitely appreciate the detailed design review 😊",
      "parentUuid": "db9c050f_ce58cc5e",
      "range": {
        "startLine": 92,
        "startChar": 0,
        "endLine": 94,
        "endChar": 25
      },
      "revId": "897612067381687b1476635846883ccc5bbf560b",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b6e78096_525bcdd5",
        "filename": "designs/bios-bmc-smm-error-logging.md",
        "patchSetId": 12
      },
      "lineNbr": 94,
      "author": {
        "id": 1000388
      },
      "writtenOn": "2022-05-11T22:34:29Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6ca09e4c_da3af72f",
      "range": {
        "startLine": 92,
        "startChar": 0,
        "endLine": 94,
        "endChar": 25
      },
      "revId": "897612067381687b1476635846883ccc5bbf560b",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}