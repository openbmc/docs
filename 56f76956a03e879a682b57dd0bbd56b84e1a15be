{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "3f5df87b_ccc5edd5",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2022-05-20T03:04:26Z",
      "side": 1,
      "message": "Hi Hao Jiang, thanks for the proposal. It sounds like we\u0027re missing support for a few NVMe use-cases in OpenBMC and that you\u0027d like to resolve that. Great!\n\nI\u0027ve added some comments around how I think we can work this document to help describe what it is you need. I think that can only be achieved by addressing some structural issues with the text, so -1 for now.",
      "revId": "56f76956a03e879a682b57dd0bbd56b84e1a15be",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d3097a12_9683a95f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2022-06-02T20:33:36Z",
      "side": 1,
      "message": "I am back from vacation. Thanks for the suggestion. I will update the doc soon. ",
      "revId": "56f76956a03e879a682b57dd0bbd56b84e1a15be",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0e5ed1ca_f4ad6967",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000016
      },
      "writtenOn": "2022-06-27T00:37:48Z",
      "side": 1,
      "message": "+1 for Andrew and Ed\u0027s comments - this needs a bit of a rework to start with the problem statement before the solution is defined. Once that\u0027s done, we can review with a focus on the proposed design rather than the document structure.\n\nThe major design point will be the relation with the existing implementations; if this can\u0027t be implemented as part of one of the existing codebases, then how it would coexist. I suspect that your proposed nvmed exposes a richer set of potentially NVMe-specific management functionality, but we\u0027d need to make that explicit, and describe how that works within the existing systems.\n\nI\u0027ve added a couple of responses in line with the existing mctp/etc infrastructure too.",
      "revId": "56f76956a03e879a682b57dd0bbd56b84e1a15be",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0af69f8b_1a778ba3",
        "filename": "designs/nvmed.md",
        "patchSetId": 1
      },
      "lineNbr": 1,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2022-05-20T03:04:26Z",
      "side": 1,
      "message": "Coming back to this now that I\u0027ve read through, I think we need to change the title to something representing the problems the proposal is solving, not the name of the proposed solution.",
      "range": {
        "startLine": 1,
        "startChar": 2,
        "endLine": 1,
        "endChar": 57
      },
      "revId": "56f76956a03e879a682b57dd0bbd56b84e1a15be",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2554d05e_5bfb311f",
        "filename": "designs/nvmed.md",
        "patchSetId": 1
      },
      "lineNbr": 1,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2022-07-12T22:37:16Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "0af69f8b_1a778ba3",
      "range": {
        "startLine": 1,
        "startChar": 2,
        "endLine": 1,
        "endChar": 57
      },
      "revId": "56f76956a03e879a682b57dd0bbd56b84e1a15be",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e2d2d6c8_bf410508",
        "filename": "designs/nvmed.md",
        "patchSetId": 1
      },
      "lineNbr": 11,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-05-23T15:53:00Z",
      "side": 1,
      "message": "nit, whitespace error.",
      "range": {
        "startLine": 11,
        "startChar": 0,
        "endLine": 11,
        "endChar": 2
      },
      "revId": "56f76956a03e879a682b57dd0bbd56b84e1a15be",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ea30d5a7_d84dfab3",
        "filename": "designs/nvmed.md",
        "patchSetId": 1
      },
      "lineNbr": 11,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2022-07-12T22:37:16Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "e2d2d6c8_bf410508",
      "range": {
        "startLine": 11,
        "startChar": 0,
        "endLine": 11,
        "endChar": 2
      },
      "revId": "56f76956a03e879a682b57dd0bbd56b84e1a15be",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d91db807_c1f7a182",
        "filename": "designs/nvmed.md",
        "patchSetId": 1
      },
      "lineNbr": 17,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2022-05-20T03:04:26Z",
      "side": 1,
      "message": "I think this section needs a few changes:\n\n1. It shouldn\u0027t mention a proposed solution (nvmed), it\u0027s meant to be a problem description\n2. The problems should be discussed in terms of use cases. What function elsewhere in an OpenBMC system would be requesting the GetLogPage or Identity functions? Why?\n3. The description should cover deficiencies in existing support for NVMe drives in OpenBMC, specifically phosphor-nvme and nvmesensor from dbus-sensors\n\nAs a part of dealing with 3, if there\u0027s a reason either of those components *shouldn\u0027t* contain the support you need, then that also needs to be covered, and argued in the \"Alternatives Considered\" section (the fact the entire content of \"Alternatives Considered\" is \"Stated in the above chapter\" is a bit of a red flag for me in terms of how you\u0027ve structured your argument here).\n\nIMO the first time we should hear about \"nvmed\" is in the \"Proposed Design\" section.",
      "range": {
        "startLine": 14,
        "startChar": 0,
        "endLine": 17,
        "endChar": 55
      },
      "revId": "56f76956a03e879a682b57dd0bbd56b84e1a15be",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ce4e7117_9a32b3de",
        "filename": "designs/nvmed.md",
        "patchSetId": 1
      },
      "lineNbr": 17,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-05-23T15:53:00Z",
      "side": 1,
      "message": "+1 to Arjs comments;  We need to call out the problem being solved here.  The existing solutions ( phosphor-nvme and nvme-sensor) have a way to enumerate nvme resources and put them on dbus, admittedly, in a more simplistic way than we\u0027d like to see, but code can always be added to one of those.",
      "parentUuid": "d91db807_c1f7a182",
      "range": {
        "startLine": 14,
        "startChar": 0,
        "endLine": 17,
        "endChar": 55
      },
      "revId": "56f76956a03e879a682b57dd0bbd56b84e1a15be",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bf296475_86d48caf",
        "filename": "designs/nvmed.md",
        "patchSetId": 1
      },
      "lineNbr": 27,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2022-05-20T03:04:26Z",
      "side": 1,
      "message": "This is only background if you already consider the design accepted, which isn\u0027t the purpose of this document. The purpose of this document is to help you help the community to converge on the architecture of a solution to your problems, where your problems are your use-cases that OpenBMC doesn\u0027t currently support.\n\nThings I\u0027d consider background information are the requirements and environment that lead to the existence of both phosphor-nvme and nvmesensor from dbus-sensors.",
      "range": {
        "startLine": 26,
        "startChar": 0,
        "endLine": 27,
        "endChar": 43
      },
      "revId": "56f76956a03e879a682b57dd0bbd56b84e1a15be",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d9f88dc1_24513c8b",
        "filename": "designs/nvmed.md",
        "patchSetId": 1
      },
      "lineNbr": 27,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2022-07-12T22:37:16Z",
      "side": 1,
      "message": "Agree. The design is kind of under discussion internally for a while, making it more like a refined-decision when I wrote the proposal. \n\nAlso rephased the section, stripping away the design for nvmed and adding more background topic on phosphor-nvme and nvme sensor.",
      "parentUuid": "bf296475_86d48caf",
      "range": {
        "startLine": 26,
        "startChar": 0,
        "endLine": 27,
        "endChar": 43
      },
      "revId": "56f76956a03e879a682b57dd0bbd56b84e1a15be",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "88214563_fb112a34",
        "filename": "designs/nvmed.md",
        "patchSetId": 1
      },
      "lineNbr": 47,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2022-05-20T03:04:26Z",
      "side": 1,
      "message": "IMO you need to flip the orientation here to describe these as deficiencies in phopshor-nvme without mentioning nvmed.\n\nYou also need to argue why it\u0027s not possible to change the design direction of phosphor-nvme and motivate the need for a third code-base to handle NVMe drives.",
      "range": {
        "startLine": 40,
        "startChar": 0,
        "endLine": 47,
        "endChar": 44
      },
      "revId": "56f76956a03e879a682b57dd0bbd56b84e1a15be",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "727d563d_c703d990",
        "filename": "designs/nvmed.md",
        "patchSetId": 1
      },
      "lineNbr": 47,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-05-23T15:53:00Z",
      "side": 1,
      "message": "\u003e IMO you need to flip the orientation here to describe these as deficiencies in phopshor-nvme without mentioning nvmed.\n\u003e \n\u003e You also need to argue why it\u0027s not possible to change the design direction of phosphor-nvme and motivate the need for a third code-base to handle NVMe drives.\n\n+1 this second sentence.  We already have two nvme-speaking daemons;  phosphor-nvme for static stack, and nvmesensor for entity-manager reactor stacks, from these requirements, it isn\u0027t clear why we\u0027d need another.\n\nFWIW, I have no problem if the code for nvme-sensor was completely reworked to support these goals, and it\u0027s already a reasonably well tested starting point for this stuff.",
      "parentUuid": "88214563_fb112a34",
      "range": {
        "startLine": 40,
        "startChar": 0,
        "endLine": 47,
        "endChar": 44
      },
      "revId": "56f76956a03e879a682b57dd0bbd56b84e1a15be",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2bc27091_725c8ee5",
        "filename": "designs/nvmed.md",
        "patchSetId": 1
      },
      "lineNbr": 47,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2022-07-12T22:37:16Z",
      "side": 1,
      "message": "The argument against the existing nvme project is stated in the alternative section.",
      "parentUuid": "727d563d_c703d990",
      "range": {
        "startLine": 40,
        "startChar": 0,
        "endLine": 47,
        "endChar": 44
      },
      "revId": "56f76956a03e879a682b57dd0bbd56b84e1a15be",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "120de91a_ff0875a6",
        "filename": "designs/nvmed.md",
        "patchSetId": 1
      },
      "lineNbr": 51,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2022-05-20T03:04:26Z",
      "side": 1,
      "message": "Requirements are behaviours derived from use-cases, not a concrete solution. A concrete solution should follow from the requirements. Again this makes it feel like a write-down-the-decisions document rather than a drive-the-decision-making-process document, but this is the first time I\u0027m hearing of the decision making process.",
      "range": {
        "startLine": 51,
        "startChar": 0,
        "endLine": 51,
        "endChar": 5
      },
      "revId": "56f76956a03e879a682b57dd0bbd56b84e1a15be",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "02100d36_37477c4f",
        "filename": "designs/nvmed.md",
        "patchSetId": 1
      },
      "lineNbr": 54,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-05-23T15:53:00Z",
      "side": 1,
      "message": "What does this mean?  Can you be more specific about what \"initialize\" actually does in this context?  Aren\u0027t nvme controllers initialized by default?",
      "range": {
        "startLine": 54,
        "startChar": 0,
        "endLine": 54,
        "endChar": 61
      },
      "revId": "56f76956a03e879a682b57dd0bbd56b84e1a15be",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6332bd7a_f1734898",
        "filename": "designs/nvmed.md",
        "patchSetId": 1
      },
      "lineNbr": 54,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2022-07-12T22:37:16Z",
      "side": 1,
      "message": "It means setting up the mctp ep with the discovery protocol. It is part of the enumerating the nvme devices. \n\nIt is rather a implement detail rather than the requirement. So I moved it and detailed in the proposed design section.",
      "parentUuid": "02100d36_37477c4f",
      "range": {
        "startLine": 54,
        "startChar": 0,
        "endLine": 54,
        "endChar": 61
      },
      "revId": "56f76956a03e879a682b57dd0bbd56b84e1a15be",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b2fafce8_8b9fe494",
        "filename": "designs/nvmed.md",
        "patchSetId": 1
      },
      "lineNbr": 56,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-05-23T15:53:00Z",
      "side": 1,
      "message": "Please be more specific here.  What does \"Basic information\" mean?  Thermals?  Inventory?  Ideally this would be derived from your background section about missing features.",
      "range": {
        "startLine": 56,
        "startChar": 0,
        "endLine": 56,
        "endChar": 77
      },
      "revId": "56f76956a03e879a682b57dd0bbd56b84e1a15be",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1af5967b_a8248d77",
        "filename": "designs/nvmed.md",
        "patchSetId": 1
      },
      "lineNbr": 56,
      "author": {
        "id": 1000016
      },
      "writtenOn": "2022-06-27T00:37:48Z",
      "side": 1,
      "message": "+1; this could be more descriptive of the MI command set you\u0027re looking to expose.",
      "parentUuid": "b2fafce8_8b9fe494",
      "range": {
        "startLine": 56,
        "startChar": 0,
        "endLine": 56,
        "endChar": 77
      },
      "revId": "56f76956a03e879a682b57dd0bbd56b84e1a15be",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ca6ba8c3_94ab11e4",
        "filename": "designs/nvmed.md",
        "patchSetId": 1
      },
      "lineNbr": 56,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2022-07-12T22:37:16Z",
      "side": 1,
      "message": "Sure. I listed several examples of the status we need. \n\nAnd this section is moved to the Problem Description.",
      "parentUuid": "1af5967b_a8248d77",
      "range": {
        "startLine": 56,
        "startChar": 0,
        "endLine": 56,
        "endChar": 77
      },
      "revId": "56f76956a03e879a682b57dd0bbd56b84e1a15be",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d7631a13_258437ca",
        "filename": "designs/nvmed.md",
        "patchSetId": 1
      },
      "lineNbr": 57,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-05-23T15:53:00Z",
      "side": 1,
      "message": "This also should be more specific.  NVMe-MI commands are called \"admin\" commands in the spec.  Presumably you have a few starter use cases?",
      "range": {
        "startLine": 57,
        "startChar": 0,
        "endLine": 57,
        "endChar": 44
      },
      "revId": "56f76956a03e879a682b57dd0bbd56b84e1a15be",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ed73bd9b_aaad1340",
        "filename": "designs/nvmed.md",
        "patchSetId": 1
      },
      "lineNbr": 57,
      "author": {
        "id": 1000016
      },
      "writtenOn": "2022-06-27T00:37:48Z",
      "side": 1,
      "message": "It looks like this is referring to two separate MI commands sets in the NVMe-MI spec: MI commands, and Admin Commands.",
      "parentUuid": "d7631a13_258437ca",
      "range": {
        "startLine": 57,
        "startChar": 0,
        "endLine": 57,
        "endChar": 44
      },
      "revId": "56f76956a03e879a682b57dd0bbd56b84e1a15be",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "68de5e66_48d1b78b",
        "filename": "designs/nvmed.md",
        "patchSetId": 1
      },
      "lineNbr": 57,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2022-07-12T22:37:16Z",
      "side": 1,
      "message": "Yes, Jeremy is right. \n\nThere are bunch of NVMe matrix we need to read from MI commands and Admin commands. \n\nI listed several in the Problem Description.",
      "parentUuid": "ed73bd9b_aaad1340",
      "range": {
        "startLine": 57,
        "startChar": 0,
        "endLine": 57,
        "endChar": 44
      },
      "revId": "56f76956a03e879a682b57dd0bbd56b84e1a15be",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e7115a28_279aed79",
        "filename": "designs/nvmed.md",
        "patchSetId": 1
      },
      "lineNbr": 60,
      "author": {
        "id": 1000016
      },
      "writtenOn": "2022-06-27T00:37:48Z",
      "side": 1,
      "message": "\"consumers\" maybe?",
      "range": {
        "startLine": 60,
        "startChar": 55,
        "endLine": 60,
        "endChar": 64
      },
      "revId": "56f76956a03e879a682b57dd0bbd56b84e1a15be",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "92f0d2f4_172805fe",
        "filename": "designs/nvmed.md",
        "patchSetId": 1
      },
      "lineNbr": 60,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2022-07-12T22:37:16Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "e7115a28_279aed79",
      "range": {
        "startLine": 60,
        "startChar": 55,
        "endLine": 60,
        "endChar": 64
      },
      "revId": "56f76956a03e879a682b57dd0bbd56b84e1a15be",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0d1fb8e0_4cdcd8f8",
        "filename": "designs/nvmed.md",
        "patchSetId": 1
      },
      "lineNbr": 64,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2022-05-20T03:04:26Z",
      "side": 1,
      "message": "This is the kind of thing that needs to go into your problem description, phrased in terms of the fact that OpenBMC doesn\u0027t yet support these things.",
      "range": {
        "startLine": 59,
        "startChar": 0,
        "endLine": 64,
        "endChar": 42
      },
      "revId": "56f76956a03e879a682b57dd0bbd56b84e1a15be",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6ff22bc1_f58d282f",
        "filename": "designs/nvmed.md",
        "patchSetId": 1
      },
      "lineNbr": 64,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-05-23T15:53:00Z",
      "side": 1,
      "message": "+1",
      "parentUuid": "0d1fb8e0_4cdcd8f8",
      "range": {
        "startLine": 59,
        "startChar": 0,
        "endLine": 64,
        "endChar": 42
      },
      "revId": "56f76956a03e879a682b57dd0bbd56b84e1a15be",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d70487cd_e7157e40",
        "filename": "designs/nvmed.md",
        "patchSetId": 1
      },
      "lineNbr": 64,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2022-07-12T22:37:16Z",
      "side": 1,
      "message": "Yeah. You are right. This is the new features we are requiring. \n\nMoved to problem section",
      "parentUuid": "6ff22bc1_f58d282f",
      "range": {
        "startLine": 59,
        "startChar": 0,
        "endLine": 64,
        "endChar": 42
      },
      "revId": "56f76956a03e879a682b57dd0bbd56b84e1a15be",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fa87ca57_da22d2a2",
        "filename": "designs/nvmed.md",
        "patchSetId": 1
      },
      "lineNbr": 71,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-05-23T15:53:00Z",
      "side": 1,
      "message": "This interface already exists, and is called NVME1000.  I suspect we don\u0027t need to create a new one, but lets cover that once we\u0027ve figured out the design here, and how it differs from the existing nvme reactors.",
      "range": {
        "startLine": 71,
        "startChar": 14,
        "endLine": 71,
        "endChar": 52
      },
      "revId": "56f76956a03e879a682b57dd0bbd56b84e1a15be",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1d07abc2_60415099",
        "filename": "designs/nvmed.md",
        "patchSetId": 1
      },
      "lineNbr": 71,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2022-07-12T22:37:16Z",
      "side": 1,
      "message": "The NVME1000 is designed for a NVMe thermal sensor who has properties like thresholds. \n\nThe design aims at a totally different type of device and user case. Yeah, let\u0027s try to make consent on the daemon first then the new interface may make its sense.",
      "parentUuid": "fa87ca57_da22d2a2",
      "range": {
        "startLine": 71,
        "startChar": 14,
        "endLine": 71,
        "endChar": 52
      },
      "revId": "56f76956a03e879a682b57dd0bbd56b84e1a15be",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a5239c79_383d2ade",
        "filename": "designs/nvmed.md",
        "patchSetId": 1
      },
      "lineNbr": 90,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-05-23T15:53:00Z",
      "side": 1,
      "message": "nit, this can probably be removed.  This is an existing feature of entity-manager, and doesn\u0027t really have anything to do with this design.",
      "range": {
        "startLine": 89,
        "startChar": 0,
        "endLine": 90,
        "endChar": 49
      },
      "revId": "56f76956a03e879a682b57dd0bbd56b84e1a15be",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3fff9514_63bcba98",
        "filename": "designs/nvmed.md",
        "patchSetId": 1
      },
      "lineNbr": 90,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2022-07-12T22:37:16Z",
      "side": 1,
      "message": "VPDless NVMe device is against the spec, so we are eliminating the use case here.",
      "parentUuid": "a5239c79_383d2ade",
      "range": {
        "startLine": 89,
        "startChar": 0,
        "endLine": 90,
        "endChar": 49
      },
      "revId": "56f76956a03e879a682b57dd0bbd56b84e1a15be",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3a10ce45_6e57b7a2",
        "filename": "designs/nvmed.md",
        "patchSetId": 1
      },
      "lineNbr": 101,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-05-23T15:53:00Z",
      "side": 1,
      "message": "This is an example of something we generally shouldn\u0027t be doing, and doesn\u0027t really seem to have any requirements backing it.\n\nAs a rule, we should not be putting protocol-specific things (like mctp) on dbus, because it limits our ability to add new protocols going forward.\n\nThere is one counter example that I\u0027m aware of (ipmb) and even in that case, we would not have built it that way today, and ideally we will migrate away from it in the future.\n\n\nThis interface should be exposing high level primitives, like storage, sensors, ect.",
      "range": {
        "startLine": 95,
        "startChar": 0,
        "endLine": 101,
        "endChar": 66
      },
      "revId": "56f76956a03e879a682b57dd0bbd56b84e1a15be",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c6bc8e7b_7141f5c3",
        "filename": "designs/nvmed.md",
        "patchSetId": 1
      },
      "lineNbr": 101,
      "author": {
        "id": 1000016
      },
      "writtenOn": "2022-06-27T00:37:48Z",
      "side": 1,
      "message": "\u003e This is an example of something we generally shouldn\u0027t be doing, and doesn\u0027t really seem to have any requirements backing it.\n\nJust to clarify the separation of components here - the MCTP endpoint interfaces are not provided my this new (nvmed) design, but by the general MCTP infrastructure (mctpd), which nvmed should be using to discover the results of the MCTP enumeration process.\n\nThis dbus interface is already an accepted design; the presence of the MCTP endpoints is defined at https://github.com/openbmc/phosphor-dbus-interfaces/tree/master/yaml/xyz/openbmc_project/MCTP , and the mctpd interface at https://github.com/CodeConstruct/mctp#mctpd-usage .\n\nIn this section, I believe Hao is just using this to describe what interfaces nvmed is using, rather that what it is providing.",
      "parentUuid": "3a10ce45_6e57b7a2",
      "range": {
        "startLine": 95,
        "startChar": 0,
        "endLine": 101,
        "endChar": 66
      },
      "revId": "56f76956a03e879a682b57dd0bbd56b84e1a15be",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6261452f_1202dee3",
        "filename": "designs/nvmed.md",
        "patchSetId": 1
      },
      "lineNbr": 101,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-06-27T17:34:04Z",
      "side": 1,
      "message": "\u003e , but by the general MCTP infrastructure (mctpd), which nvmed should be using to discover the results of the MCTP enumeration process.\n\nThis is roughly the same design that we did for IPMB that I thought we kind of agreed caused more problems than it solved, but Jeremy is certainly more of an expert here than I am, so I\u0027ll defer to his good judgement.\n\nWith that said, I wasn\u0027t aware that the mctpd-\u003edbus design had been accepted, so that changes this a bit.  In terms of this design, can we just get this section removed, and the mctpd design doc/interfaces put in the background section?",
      "parentUuid": "c6bc8e7b_7141f5c3",
      "range": {
        "startLine": 95,
        "startChar": 0,
        "endLine": 101,
        "endChar": 66
      },
      "revId": "56f76956a03e879a682b57dd0bbd56b84e1a15be",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c6a4bc6b_240c7427",
        "filename": "designs/nvmed.md",
        "patchSetId": 1
      },
      "lineNbr": 101,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2022-07-12T22:37:16Z",
      "side": 1,
      "message": "I tried to give the reader a first impression of how mctp ep is initiated from dbus. Maybe redirect to the MCTPd doc is a good idea. \n\nRemove the interface example and add mctpd link in the background",
      "parentUuid": "6261452f_1202dee3",
      "range": {
        "startLine": 95,
        "startChar": 0,
        "endLine": 101,
        "endChar": 66
      },
      "revId": "56f76956a03e879a682b57dd0bbd56b84e1a15be",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6cf2e932_5e29251a",
        "filename": "designs/nvmed.md",
        "patchSetId": 1
      },
      "lineNbr": 110,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-05-23T15:53:00Z",
      "side": 1,
      "message": "nit, more whitespace issues.",
      "range": {
        "startLine": 110,
        "startChar": 57,
        "endLine": 110,
        "endChar": 66
      },
      "revId": "56f76956a03e879a682b57dd0bbd56b84e1a15be",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "94072d02_70b9b75e",
        "filename": "designs/nvmed.md",
        "patchSetId": 1
      },
      "lineNbr": 110,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2022-07-12T22:37:16Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "6cf2e932_5e29251a",
      "range": {
        "startLine": 110,
        "startChar": 57,
        "endLine": 110,
        "endChar": 66
      },
      "revId": "56f76956a03e879a682b57dd0bbd56b84e1a15be",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a67009c6_7db4230e",
        "filename": "designs/nvmed.md",
        "patchSetId": 1
      },
      "lineNbr": 118,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2022-05-20T03:04:26Z",
      "side": 1,
      "message": "I don\u0027t have strong opinions here, but I\u0027d like to see some input from Jeremy and Matt.",
      "range": {
        "startLine": 115,
        "startChar": 0,
        "endLine": 118,
        "endChar": 43
      },
      "revId": "56f76956a03e879a682b57dd0bbd56b84e1a15be",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0725d142_221c67dc",
        "filename": "designs/nvmed.md",
        "patchSetId": 1
      },
      "lineNbr": 118,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-05-23T15:53:00Z",
      "side": 1,
      "message": "I really don\u0027t think an MCTP-specific EM config type benefits us going forward over having more specific types (NVMe-MI, PLDM, RDE, ect).\n\nCan you think of a case where say, an nvme drive and a RDE accelerator would share code or configurations here?  Even if there were sharing, I suspect they would be minimal.",
      "parentUuid": "a67009c6_7db4230e",
      "range": {
        "startLine": 115,
        "startChar": 0,
        "endLine": 118,
        "endChar": 43
      },
      "revId": "56f76956a03e879a682b57dd0bbd56b84e1a15be",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "736841d0_4740219a",
        "filename": "designs/nvmed.md",
        "patchSetId": 1
      },
      "lineNbr": 118,
      "author": {
        "id": 1000016
      },
      "writtenOn": "2022-06-27T00:37:48Z",
      "side": 1,
      "message": "Yep, I think the NVMe(-MI) level is most suitable here. I dont see a need to expose much in the way of MCTP-specific configuration, as we already have the discovery process (MCTP Control Protocol) for that, the results of which are exposed via dbus anyway.",
      "parentUuid": "0725d142_221c67dc",
      "range": {
        "startLine": 115,
        "startChar": 0,
        "endLine": 118,
        "endChar": 43
      },
      "revId": "56f76956a03e879a682b57dd0bbd56b84e1a15be",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "eda8ea65_4deaaace",
        "filename": "designs/nvmed.md",
        "patchSetId": 1
      },
      "lineNbr": 118,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-06-27T17:34:04Z",
      "side": 1,
      "message": "FWIW, also, in the case where we had a device that supported more than one of the set of nvme-mi, pldm, and RDE, we would still have a way to declare it (just declare all 3 exposes records).",
      "parentUuid": "736841d0_4740219a",
      "range": {
        "startLine": 115,
        "startChar": 0,
        "endLine": 118,
        "endChar": 43
      },
      "revId": "56f76956a03e879a682b57dd0bbd56b84e1a15be",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a3893e65_fde757d2",
        "filename": "designs/nvmed.md",
        "patchSetId": 1
      },
      "lineNbr": 118,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2022-07-12T22:37:16Z",
      "side": 1,
      "message": "If the device support multiple mctp type, will that be a problem we have multiple configuration for daemons (nvme, spdm etc) to initialize the same mctp ep?",
      "parentUuid": "eda8ea65_4deaaace",
      "range": {
        "startLine": 115,
        "startChar": 0,
        "endLine": 118,
        "endChar": 43
      },
      "revId": "56f76956a03e879a682b57dd0bbd56b84e1a15be",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9906666b_200a698b",
        "filename": "designs/nvmed.md",
        "patchSetId": 1
      },
      "lineNbr": 131,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-05-23T15:53:00Z",
      "side": 1,
      "message": "It\u0027s not clear why having these very-specific interfaces on dbus is helpful, given the requirements you\u0027ve laid out.  These are arguably implementation details of the nvme subsystem, and for the most part, should probably be abstracted away from dbus.  I could see possibly wanting to expose the controllers to add a \"manager\" resource within Redfish, but that probably deserves a design doc on its own.",
      "range": {
        "startLine": 129,
        "startChar": 0,
        "endLine": 131,
        "endChar": 49
      },
      "revId": "56f76956a03e879a682b57dd0bbd56b84e1a15be",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "31cf54c0_2eead8d7",
        "filename": "designs/nvmed.md",
        "patchSetId": 1
      },
      "lineNbr": 131,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2022-07-12T22:37:16Z",
      "side": 1,
      "message": "MI CMD set works at the subsystem scope but the Admin CMD set needs to be attached to the controllers. LogPages are independent across controllers too. \n\nWe also want to expose the Physical Function-Virtual Function relation since they include a different set of vendor defined commands. The VU cmd is not discussed in this doc but we need to prepare for it.",
      "parentUuid": "9906666b_200a698b",
      "range": {
        "startLine": 129,
        "startChar": 0,
        "endLine": 131,
        "endChar": 49
      },
      "revId": "56f76956a03e879a682b57dd0bbd56b84e1a15be",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "43a5998b_34d4e909",
        "filename": "designs/nvmed.md",
        "patchSetId": 1
      },
      "lineNbr": 143,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-05-23T15:53:00Z",
      "side": 1,
      "message": "I suspect this should be \"enumerating\"",
      "range": {
        "startLine": 143,
        "startChar": 58,
        "endLine": 143,
        "endChar": 69
      },
      "revId": "56f76956a03e879a682b57dd0bbd56b84e1a15be",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "045bfd1c_dd3507f8",
        "filename": "designs/nvmed.md",
        "patchSetId": 1
      },
      "lineNbr": 143,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2022-07-12T22:37:16Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "43a5998b_34d4e909",
      "range": {
        "startLine": 143,
        "startChar": 58,
        "endLine": 143,
        "endChar": 69
      },
      "revId": "56f76956a03e879a682b57dd0bbd56b84e1a15be",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fa2b2c7d_9511fbd7",
        "filename": "designs/nvmed.md",
        "patchSetId": 1
      },
      "lineNbr": 145,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-05-23T15:53:00Z",
      "side": 1,
      "message": "This is a pretty generalized anti-pattern that we found when writing the other nvme daemons, as well as the generalized dbus-sensors architecture.  Keeping the polling as close to the hardware as can, and relying on dbus eventing for the rest allows use cases like EventService to function, and leads to faster responding user APIs.  It would help a lot if you could enumerate _why_ you think you need this, and we can talk through the use cases, but there have been plenty of examples where we built things as you describe above, and had to rewrite them later to go to user-space polling.",
      "range": {
        "startLine": 143,
        "startChar": 71,
        "endLine": 145,
        "endChar": 29
      },
      "revId": "56f76956a03e879a682b57dd0bbd56b84e1a15be",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8e4f7ded_e7d7d287",
        "filename": "designs/nvmed.md",
        "patchSetId": 1
      },
      "lineNbr": 145,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2022-07-12T22:37:16Z",
      "side": 1,
      "message": "I listed the reasons against local polling in the alternative section. \n\ntl;dr: \nThe NVMe OOB doesn\u0027t support async event and we need high level DC service to poll in order to reduce interference.",
      "parentUuid": "fa2b2c7d_9511fbd7",
      "range": {
        "startLine": 143,
        "startChar": 71,
        "endLine": 145,
        "endChar": 29
      },
      "revId": "56f76956a03e879a682b57dd0bbd56b84e1a15be",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d2538a19_66e03291",
        "filename": "designs/nvmed.md",
        "patchSetId": 1
      },
      "lineNbr": 179,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-05-23T15:53:00Z",
      "side": 1,
      "message": "Repeating again, all of the above is nvme-specific, and makes no attempt to reuse existing interfaces.  As-written, to accomplish your goals, this is going to require both IPMI and bmcweb to contain nvme-specific code about how to identify drives, read log pages, and do whatever else needs done.  I suspect this needs abstracted using the existing interfaces.  I suspect there\u0027s one or two interfaces that need added for the drive specific inventory things that we don\u0027t yet support, but as written, I don\u0027t think the above interfaces get us the level of abstraction on dbus that we generally would like to encourage.",
      "revId": "56f76956a03e879a682b57dd0bbd56b84e1a15be",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5b570753_16543c08",
        "filename": "designs/nvmed.md",
        "patchSetId": 1
      },
      "lineNbr": 179,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2022-07-12T22:37:16Z",
      "side": 1,
      "message": "Agree on the first half. We need to reuse/expose the general Drive/Storge (maybe StorageController and Volume) interface with generic properties/methods. \n\nBut there are still NVMe specific which is hard/impossible to be defined on DBus level (e.g NVMe Feature set and controller Identify info). so we still need a NVMe API on DBus.",
      "parentUuid": "d2538a19_66e03291",
      "revId": "56f76956a03e879a682b57dd0bbd56b84e1a15be",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9b6fcb95_37f2a30b",
        "filename": "designs/nvmed.md",
        "patchSetId": 1
      },
      "lineNbr": 187,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-05-23T15:53:00Z",
      "side": 1,
      "message": "This isn\u0027t in your requirements.",
      "range": {
        "startLine": 186,
        "startChar": 53,
        "endLine": 187,
        "endChar": 44
      },
      "revId": "56f76956a03e879a682b57dd0bbd56b84e1a15be",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5dc01f5b_9349d36a",
        "filename": "designs/nvmed.md",
        "patchSetId": 1
      },
      "lineNbr": 191,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-05-23T15:53:00Z",
      "side": 1,
      "message": "Can you rephrase this, I\u0027m not quite understanding this.",
      "range": {
        "startLine": 190,
        "startChar": 35,
        "endLine": 191,
        "endChar": 70
      },
      "revId": "56f76956a03e879a682b57dd0bbd56b84e1a15be",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2a4055ff_396573af",
        "filename": "designs/nvmed.md",
        "patchSetId": 1
      },
      "lineNbr": 196,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-05-23T15:53:00Z",
      "side": 1,
      "message": "Other impacts:\n1. Physical layer constructs are now present in dbus, which very likely has security impacts.\n2. nvme-specific is now spread across the system\n3. A third nvme-specific daemon is created.",
      "revId": "56f76956a03e879a682b57dd0bbd56b84e1a15be",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "873f8e44_0c2a3e75",
        "filename": "designs/nvmed.md",
        "patchSetId": 1
      },
      "lineNbr": 200,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2022-05-20T03:04:26Z",
      "side": 1,
      "message": "Okay, can you please add some more words justifying why they\u0027re complementary but must be separate? Am I just not across enough of the design points of phosphor-nvme? If not, can you please make sure that people like me reading this document can be convinced of your position just by reading the document (and any references)?",
      "range": {
        "startLine": 199,
        "startChar": 0,
        "endLine": 200,
        "endChar": 35
      },
      "revId": "56f76956a03e879a682b57dd0bbd56b84e1a15be",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "03ba57bd_69a33fff",
        "filename": "designs/nvmed.md",
        "patchSetId": 1
      },
      "lineNbr": 200,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-05-23T15:53:00Z",
      "side": 1,
      "message": "\u003e Okay, can you please add some more words justifying why they\u0027re complementary but must be separate?\n\u003e Am I just not across enough of the design points of phosphor-nvme? If not, can you please make sure that people like me reading this document can be convinced of your position just by reading the document (and any references)?\n\n+1, I\u0027d really like to understand this point as well.  It\u0027s not clear from the above.",
      "parentUuid": "873f8e44_0c2a3e75",
      "range": {
        "startLine": 199,
        "startChar": 0,
        "endLine": 200,
        "endChar": 35
      },
      "revId": "56f76956a03e879a682b57dd0bbd56b84e1a15be",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "718664c2_27be5864",
        "filename": "designs/nvmed.md",
        "patchSetId": 1
      },
      "lineNbr": 205,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-05-23T15:53:00Z",
      "side": 1,
      "message": "Load testing?  Security testing?  Functional testing?",
      "range": {
        "startLine": 204,
        "startChar": 0,
        "endLine": 205,
        "endChar": 54
      },
      "revId": "56f76956a03e879a682b57dd0bbd56b84e1a15be",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}