{
  "comments": [
    {
      "key": {
        "uuid": "0d86e288_b30cd68f",
        "filename": "designs/device-tree-gpio-naming.md",
        "patchSetId": 2
      },
      "lineNbr": 90,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2021-06-29T19:28:56Z",
      "side": 1,
      "message": "Is this intended to be a \"state is changed\" as in it is a spring\u0027d button someone presses or is it intended to be a particular state (such as positive voltage).  Is this during the BMC boot or is there intended to be a daemon monitoring?",
      "range": {
        "startLine": 90,
        "startChar": 23,
        "endLine": 90,
        "endChar": 108
      },
      "revId": "555fe94d0dab911d362ac7febac9921c0ce7bcc4",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b69e7a54_198b1f59",
        "filename": "designs/device-tree-gpio-naming.md",
        "patchSetId": 2
      },
      "lineNbr": 90,
      "author": {
        "id": 1000004
      },
      "writtenOn": "2021-06-29T19:31:57Z",
      "side": 1,
      "message": "nit: please be sure to wrap at 80 chars",
      "parentUuid": "0d86e288_b30cd68f",
      "range": {
        "startLine": 90,
        "startChar": 23,
        "endLine": 90,
        "endChar": 108
      },
      "revId": "555fe94d0dab911d362ac7febac9921c0ce7bcc4",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3b630772_541e494e",
        "filename": "designs/device-tree-gpio-naming.md",
        "patchSetId": 2
      },
      "lineNbr": 90,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2021-06-29T23:49:11Z",
      "side": 1,
      "message": "Perhaps we should not specify the behaviour of the gpio, just the name.",
      "parentUuid": "b69e7a54_198b1f59",
      "range": {
        "startLine": 90,
        "startChar": 23,
        "endLine": 90,
        "endChar": 108
      },
      "revId": "555fe94d0dab911d362ac7febac9921c0ce7bcc4",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "abfaae89_1c6fa4ea",
        "filename": "designs/device-tree-gpio-naming.md",
        "patchSetId": 2
      },
      "lineNbr": 90,
      "author": {
        "id": 1001090
      },
      "writtenOn": "2021-06-30T01:21:20Z",
      "side": 1,
      "message": "Patrick: my understanding is there is a switch that can be flipped from one position to another. The decision we reached in the design exchange today was that for now, the switch state will only be checked by the initrd script during BMC boot, in order to avoid adding complexity. We could add a daemon later.\n\nAndrew G: ok, I assume I just do this with a newline. I\u0027ll add it if we don\u0027t decide to scrap specifying the behavior of the gpio.\n\nAndrew J: That seems fine to me, especially since the exact behavior of how factory-reset-toggle will be used is not set in stone because it\u0027s not implemented yet.",
      "parentUuid": "3b630772_541e494e",
      "range": {
        "startLine": 90,
        "startChar": 23,
        "endLine": 90,
        "endChar": 108
      },
      "revId": "555fe94d0dab911d362ac7febac9921c0ce7bcc4",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "96e0791f_9c1e678f",
        "filename": "designs/device-tree-gpio-naming.md",
        "patchSetId": 2
      },
      "lineNbr": 90,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2021-06-30T01:50:50Z",
      "side": 1,
      "message": "Right, so if you agree then I think we should drop \u0027-toggle\u0027 from the name.",
      "parentUuid": "abfaae89_1c6fa4ea",
      "range": {
        "startLine": 90,
        "startChar": 23,
        "endLine": 90,
        "endChar": 108
      },
      "revId": "555fe94d0dab911d362ac7febac9921c0ce7bcc4",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a0993fe9_f50320b9",
        "filename": "designs/device-tree-gpio-naming.md",
        "patchSetId": 2
      },
      "lineNbr": 90,
      "author": {
        "id": 1001090
      },
      "writtenOn": "2021-06-30T14:02:03Z",
      "side": 1,
      "message": "I\u0027m okay with dropping the description that\u0027s in parentheses but Milton was saying we should have toggle in the name.\n\nFrom a chat in openbmc_general\nNicole Schwartz: The factory reset is a toggle switch.  My understanding from Chris Engel is that the BMC knows the last state of the switch, and during power-on if it sees that the state has changed, it will do a factory reset.  It is not an on/off kind of thing.\n\nMilton Miller: Also toggle should be in the generic gpio name @andrewg fyi",
      "parentUuid": "96e0791f_9c1e678f",
      "range": {
        "startLine": 90,
        "startChar": 23,
        "endLine": 90,
        "endChar": 108
      },
      "revId": "555fe94d0dab911d362ac7febac9921c0ce7bcc4",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4884b520_a5b85190",
        "filename": "designs/device-tree-gpio-naming.md",
        "patchSetId": 2
      },
      "lineNbr": 90,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2021-07-01T12:57:31Z",
      "side": 1,
      "message": "\u003e My understanding ... is that the BMC knows the last state of the switch, and during power-on if it sees that the state has changed, it will do a factory reset.\n\nThis doesn\u0027t sound right.  Why would we persist the state of a GPIO?  Unless your device really is a toggle switch, but that really seems like extra work.\n\nI don\u0027t know how we persist the value *and* check it in initrd.  Initrd doesn\u0027t really look at the RWFS contents.\n\nEven if it is physically a toggle switch, your documentation can say \"if the switch is in position X while the BMC boots, then...\"  Trying to persist the last position and derive a change from that is quite a bit of complexity for, in my opinion, no value from a human experience perspective.\n\n\u003e That seems fine to me, especially since the exact behavior of how factory-reset-toggle will be used is not set in stone because it\u0027s not implemented yet.\n\nI would argue we shouldn\u0027t define it in this doc yet then.  The point of these GPIO pin names is: \"if you name your GPIO like this, you get implemented behavior for free because someone else already has a common design.\"  Once you get into different polarities and toggle vs push-button we really lose all the advantage of a common name.\n\n\u003e Right, so if you agree then I think we should drop \u0027-toggle\u0027 from the name.\n\nIf it is a toggle value, I think we should leave that part in.  That seems like an odd design for reasons mentioned above.",
      "parentUuid": "a0993fe9_f50320b9",
      "range": {
        "startLine": 90,
        "startChar": 23,
        "endLine": 90,
        "endChar": 108
      },
      "revId": "555fe94d0dab911d362ac7febac9921c0ce7bcc4",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bdcb1544_79a28b91",
        "filename": "designs/device-tree-gpio-naming.md",
        "patchSetId": 2
      },
      "lineNbr": 90,
      "author": {
        "id": 1000021
      },
      "writtenOn": "2021-07-02T05:43:51Z",
      "side": 1,
      "message": "The intention is the minimum interaction with the minimal circuit.   The circuit is a spst switch (or two pin jumper), either open or closed.   The minimum interaction is changing the position once.   No \"and now put it back\" before the system (BMC) starts working again.   No not he switch failed and the card is dead or always forgets everything.  Instead the complexity is in the code where we have to remember the last state when we forget everything (else).\n\nThe toggle is part of the name because we have to detect the toggle in software.  It\u0027s at the end not the beginning because it qyalifies the state and is not a request to change the state.  \n\nIf it\u0027s still confusing maybe on-toggle ? I\u0027d suggest in charge but it\u0027s not detecting a momentary change.",
      "parentUuid": "4884b520_a5b85190",
      "range": {
        "startLine": 90,
        "startChar": 23,
        "endLine": 90,
        "endChar": 108
      },
      "revId": "555fe94d0dab911d362ac7febac9921c0ce7bcc4",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    }
  ]
}