{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "e4ce74e1_b37e72c2",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1002604
      },
      "writtenOn": "2025-08-12T12:17:50Z",
      "side": 1,
      "message": "odrang@nvidia.com",
      "revId": "b9d4a6d1dbd9d2bc1f20e93d4ec53163812fe321",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a76c59e1_e2e8814d",
        "filename": "designs/lldp/lldp-dbus-service.md",
        "patchSetId": 1
      },
      "lineNbr": 6,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2025-08-12T12:18:16Z",
      "side": 1,
      "message": "Please investigate the existing implementation of lldp.  Someone added it recently elsewhere.",
      "revId": "b9d4a6d1dbd9d2bc1f20e93d4ec53163812fe321",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c3018e56_fa3d32f2",
        "filename": "designs/lldp/lldp-dbus-service.md",
        "patchSetId": 1
      },
      "lineNbr": 6,
      "author": {
        "id": 1000350
      },
      "writtenOn": "2025-08-12T14:06:19Z",
      "side": 1,
      "message": "yes, currently we have enabled LLDP service in OpenBMC, where EmitLLDP D-bus property on xyz.openbmc_project.Network.EthernetInterface allows enable/disable transmit/Emit LLDP packets on BMC ethernet interfaces.\n\nplease check these commits\nhttps://gerrit.openbmc.org/c/openbmc/openbmc/+/75749\nhttps://gerrit.openbmc.org/c/openbmc/phosphor-networkd/+/76368\n\nI understand that this proposal to add support for both Trasmit and receive LLDP packets and completely enable LLDP data parsing on BMC and hosting on D-bus on each ethernet interfaces.",
      "parentUuid": "a76c59e1_e2e8814d",
      "revId": "b9d4a6d1dbd9d2bc1f20e93d4ec53163812fe321",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "607b5c2b_154f762e",
        "filename": "designs/lldp/lldp-dbus-service.md",
        "patchSetId": 1
      },
      "lineNbr": 6,
      "author": {
        "id": 1002604
      },
      "writtenOn": "2025-08-19T08:06:14Z",
      "side": 1,
      "message": "Patrick and Ravi, thanks you for the quick response.\nYes, Ravi this is correct.\nThe design adds support to control LLDP packets.\nIn transmit object we can both change and retrieve the content of the transmitted LLDP PDU.\nIn receive object we retrieve the content of the received LLDP PDU.\n    \n I added more information about Emit LLDP in Background and References\nsection. \n\nAlso added more explanation in the Operation section.",
      "parentUuid": "c3018e56_fa3d32f2",
      "revId": "b9d4a6d1dbd9d2bc1f20e93d4ec53163812fe321",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bc252183_f1c52e15",
        "filename": "designs/lldp/lldp-dbus-service.md",
        "patchSetId": 1
      },
      "lineNbr": 119,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2025-08-12T12:18:16Z",
      "side": 1,
      "message": "It seems like you\u0027ve deleted entire sections out of the design document template.  Please restore them and fill them out.  We have a design document template for a reason; I\u0027m not reviewing this further.",
      "range": {
        "startLine": 119,
        "startChar": 0,
        "endLine": 119,
        "endChar": 24
      },
      "revId": "b9d4a6d1dbd9d2bc1f20e93d4ec53163812fe321",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fca3bdcb_d51cdbac",
        "filename": "designs/lldp/lldp-dbus-service.md",
        "patchSetId": 1
      },
      "lineNbr": 119,
      "author": {
        "id": 1000350
      },
      "writtenOn": "2025-08-12T14:06:19Z",
      "side": 1,
      "message": "can we please add more details on how do we refresh D-bus objects based on LLDP packets received from Peer system connected over each ethernet interfaces.\nsince LLDP packets received in periodic interval\n\n1. does neighbor\u0027s LLDP object goes away if BMC fails to receive LLDP packets after lldp  TTL interval timeout?\n\n2. how are you planning to refresh/manage created LLDP neighbor D-bus objects for each interface.\n   Here is some cases:\n   - Peer Device plugged out and plugged in another device \n   - Peer Device is powered off or stopped emitting LLDP packets \n   \n\n3. Networkd already defined interface for neighbors, are you planning to leverage existing interfaces?\n  https://github.com/openbmc/phosphor-dbus-interfaces/blob/master/yaml/xyz/openbmc_project/Network/Neighbor.interface.yaml",
      "parentUuid": "bc252183_f1c52e15",
      "range": {
        "startLine": 119,
        "startChar": 0,
        "endLine": 119,
        "endChar": 24
      },
      "revId": "b9d4a6d1dbd9d2bc1f20e93d4ec53163812fe321",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f32057e7_099a1c6b",
        "filename": "designs/lldp/lldp-dbus-service.md",
        "patchSetId": 1
      },
      "lineNbr": 119,
      "author": {
        "id": 1000401
      },
      "writtenOn": "2025-08-13T05:05:24Z",
      "side": 1,
      "message": "\u003ehow are you planning to refresh/manage created LLDP neighbor D-bus objects for each interface\n\n+1",
      "parentUuid": "fca3bdcb_d51cdbac",
      "range": {
        "startLine": 119,
        "startChar": 0,
        "endLine": 119,
        "endChar": 24
      },
      "revId": "b9d4a6d1dbd9d2bc1f20e93d4ec53163812fe321",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e997a634_b54dad7a",
        "filename": "designs/lldp/lldp-dbus-service.md",
        "patchSetId": 1
      },
      "lineNbr": 119,
      "author": {
        "id": 1002604
      },
      "writtenOn": "2025-08-19T08:06:14Z",
      "side": 1,
      "message": "Patrick, I updated the missing sections.\nRavi, \n1. The neighbor object doesn\u0027t go away. The design doesn\u0027t include polling the lldpd daemon on each TTL interval. It polls it only when required by busctl get-property or set-property command. If the property is not available at that time, it can populate it with \"unavailable\" value. \n2.The objects are created on service bring up according to the configuration files. What you ask can be done by polling the lldpd daemon. I am not sure if that is necessary because the service is only of interest when accessed by busctrl commands. And then it polls the daemon anyway.\n3. LLDP advertises both IPv4 and IPv6 addresses. I didn\u0027t find an interface that provides both options.",
      "parentUuid": "fca3bdcb_d51cdbac",
      "range": {
        "startLine": 119,
        "startChar": 0,
        "endLine": 119,
        "endChar": 24
      },
      "revId": "b9d4a6d1dbd9d2bc1f20e93d4ec53163812fe321",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "24fc9a5a_6d0598db",
        "filename": "designs/lldp/lldp-dbus-service.md",
        "patchSetId": 1
      },
      "lineNbr": 119,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2025-08-19T12:28:53Z",
      "side": 1,
      "message": "I immediately see that \"Alternatives\" is missing.  Please follow the design document template.",
      "parentUuid": "e997a634_b54dad7a",
      "range": {
        "startLine": 119,
        "startChar": 0,
        "endLine": 119,
        "endChar": 24
      },
      "revId": "b9d4a6d1dbd9d2bc1f20e93d4ec53163812fe321",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5e863dfd_1a857ad1",
        "filename": "designs/lldp/lldp-dbus-service.md",
        "patchSetId": 1
      },
      "lineNbr": 119,
      "author": {
        "id": 1002604
      },
      "writtenOn": "2025-08-19T13:33:02Z",
      "side": 1,
      "message": "@asmitk01@in.ibm.com, @raviteja28031990@gmail.com \nwhat is the use case for online refreshing of the D-bus objects?",
      "parentUuid": "e997a634_b54dad7a",
      "range": {
        "startLine": 119,
        "startChar": 0,
        "endLine": 119,
        "endChar": 24
      },
      "revId": "b9d4a6d1dbd9d2bc1f20e93d4ec53163812fe321",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "afed7bb7_cbd52055",
        "filename": "designs/lldp/lldp-dbus-service.md",
        "patchSetId": 1
      },
      "lineNbr": 119,
      "author": {
        "id": 1000350
      },
      "writtenOn": "2025-08-21T05:20:25Z",
      "side": 1,
      "message": "say if neighbor objects are created on service bring up according to the configuration files,\nMost of network connections dynamically changes after BMC is up and running then LLDP shows stale old entries which are no longer connected to BMC.\nsince LLDP anyways providing information in regular intervals, it would ideal to refresh LLDP D-bus objects as per LLDP packets data\n\nI did not understand why its only of interest when accessed by busctl commands?",
      "parentUuid": "5e863dfd_1a857ad1",
      "range": {
        "startLine": 119,
        "startChar": 0,
        "endLine": 119,
        "endChar": 24
      },
      "revId": "b9d4a6d1dbd9d2bc1f20e93d4ec53163812fe321",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1535829f_c212a33f",
        "filename": "designs/lldp/lldp-dbus-service.md",
        "patchSetId": 1
      },
      "lineNbr": 119,
      "author": {
        "id": 1002604
      },
      "writtenOn": "2025-08-25T15:27:21Z",
      "side": 1,
      "message": "The D-BUS objects, don\u0027t store LLDP data. when any if their properties are queried (by busctl or right, any other interface to access D-BUS objects) they will in turn query lldpd. lldpd stores up to date neighbor data from the last received LLDP PDU.\n(Invalidated after LLDP TTL if newer PDU was not received).\nSO, the D-BUS will properties always return up to date data.",
      "parentUuid": "afed7bb7_cbd52055",
      "range": {
        "startLine": 119,
        "startChar": 0,
        "endLine": 119,
        "endChar": 24
      },
      "revId": "b9d4a6d1dbd9d2bc1f20e93d4ec53163812fe321",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ef33c6b7_939a84a6",
        "filename": "designs/lldp/lldp-dbus-service.md",
        "patchSetId": 1
      },
      "lineNbr": 119,
      "author": {
        "id": 1002604
      },
      "writtenOn": "2025-08-31T10:41:15Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1535829f_c212a33f",
      "range": {
        "startLine": 119,
        "startChar": 0,
        "endLine": 119,
        "endChar": 24
      },
      "revId": "b9d4a6d1dbd9d2bc1f20e93d4ec53163812fe321",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "55c3a283_e5f380c1",
        "filename": "designs/lldp/lldp-dbus-service.md",
        "patchSetId": 1
      },
      "lineNbr": 119,
      "author": {
        "id": 1000401
      },
      "writtenOn": "2025-09-03T08:03:02Z",
      "side": 1,
      "message": "We have a use case where we will need an object representation of the discovered neighbour on the BMC that hosts the neighbour IP for other apps to use it.\n\nIn that case, my thought is:\nWhenever the service comes up, it should check for the LLDP packet, if any, then parse it and create DBus objects under respective interfaces. Then, poll for the LLDP packets in specific intervals:\n    * If the neighbour BMC is disconnected/stops emitting LLDP packets, then the created dbus object should be deleted\n    * If a new BMC is plugged in, then the LLDP DBUS object should be refreshed to reflect the latest data.",
      "parentUuid": "ef33c6b7_939a84a6",
      "range": {
        "startLine": 119,
        "startChar": 0,
        "endLine": 119,
        "endChar": 24
      },
      "revId": "b9d4a6d1dbd9d2bc1f20e93d4ec53163812fe321",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fbe4f2d4_8f92902f",
        "filename": "designs/lldp/lldp-dbus-service.md",
        "patchSetId": 1
      },
      "lineNbr": 119,
      "author": {
        "id": 1000401
      },
      "writtenOn": "2025-09-04T08:43:02Z",
      "side": 1,
      "message": "I have been working on this lately, and have pushed some changes to openbmc and networkd:\nhttps://gerrit.openbmc.org/c/openbmc/openbmc/+/83385\nhttps://gerrit.openbmc.org/c/openbmc/phosphor-networkd/+/83384 (Marked WIP)\n\nI can modify it based on what we conclude here and once dbus interfaces are in.",
      "parentUuid": "55c3a283_e5f380c1",
      "range": {
        "startLine": 119,
        "startChar": 0,
        "endLine": 119,
        "endChar": 24
      },
      "revId": "b9d4a6d1dbd9d2bc1f20e93d4ec53163812fe321",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5798d9bf_510ac529",
        "filename": "designs/lldp/lldp-dbus-service.md",
        "patchSetId": 1
      },
      "lineNbr": 119,
      "author": {
        "id": 1002604
      },
      "writtenOn": "2025-09-07T10:00:25Z",
      "side": 1,
      "message": "I will add that to the design: \n* If the neighbour BMC is disconnected/stops emitting LLDP packets, then the created dbus object should be deleted\n* If a new BMC is plugged in, then the LLDP DBUS object should be refreshed to reflect the latest data.\n\nRegarding your changes, we prefer to implement a dedicated service. This is discussed in Alternatives Considered section. You prefer to implement it in networkd?\nWe can provide a reference code for a dedicated service.",
      "parentUuid": "fbe4f2d4_8f92902f",
      "range": {
        "startLine": 119,
        "startChar": 0,
        "endLine": 119,
        "endChar": 24
      },
      "revId": "b9d4a6d1dbd9d2bc1f20e93d4ec53163812fe321",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "729a2e9d_e660ef02",
        "filename": "designs/lldp/lldp-dbus-service.md",
        "patchSetId": 1
      },
      "lineNbr": 119,
      "author": {
        "id": 1000401
      },
      "writtenOn": "2025-09-08T09:13:18Z",
      "side": 1,
      "message": "Yes, I have changed my implementation to have a separate service as proposed in this design doc.\n\nWill update the networkd commit with the changes.",
      "parentUuid": "5798d9bf_510ac529",
      "range": {
        "startLine": 119,
        "startChar": 0,
        "endLine": 119,
        "endChar": 24
      },
      "revId": "b9d4a6d1dbd9d2bc1f20e93d4ec53163812fe321",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e4cca04a_4cbd695f",
        "filename": "designs/lldp/lldp_dbus_service.png",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2025-08-12T12:18:16Z",
      "side": 1,
      "message": "Please don\u0027t add pictures.  Use mermaid embedded in your markdown to create a diagram.",
      "revId": "b9d4a6d1dbd9d2bc1f20e93d4ec53163812fe321",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7da939c2_84930f9a",
        "filename": "designs/lldp/lldp_dbus_service.png",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1002604
      },
      "writtenOn": "2025-08-19T08:06:14Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e4cca04a_4cbd695f",
      "revId": "b9d4a6d1dbd9d2bc1f20e93d4ec53163812fe321",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}