{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "ee9bdc19_d3efa2dc",
        "filename": "designs/oem/ibm/aggregation/ibm-event-logging.md",
        "patchSetId": 4
      },
      "lineNbr": 19,
      "author": {
        "id": 1000004
      },
      "writtenOn": "2022-09-13T20:00:15Z",
      "side": 1,
      "message": "nit: I see these throughout the doc, are they needed in markdown or something?",
      "range": {
        "startLine": 19,
        "startChar": 3,
        "endLine": 19,
        "endChar": 4
      },
      "revId": "a328d4e8472f34b84509bfd464d255cafc375248",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "745a41eb_e180f747",
        "filename": "designs/oem/ibm/aggregation/ibm-event-logging.md",
        "patchSetId": 4
      },
      "lineNbr": 19,
      "author": {
        "id": 1000008
      },
      "writtenOn": "2022-09-13T20:35:45Z",
      "side": 1,
      "message": "For some reason I thought apostrophes had to be escaped in markdown, but maybe I was thinking of underscores.  I will fix.",
      "parentUuid": "ee9bdc19_d3efa2dc",
      "range": {
        "startLine": 19,
        "startChar": 3,
        "endLine": 19,
        "endChar": 4
      },
      "revId": "a328d4e8472f34b84509bfd464d255cafc375248",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c009fee6_ab9acbfb",
        "filename": "designs/oem/ibm/aggregation/ibm-event-logging.md",
        "patchSetId": 4
      },
      "lineNbr": 50,
      "author": {
        "id": 1000004
      },
      "writtenOn": "2022-09-13T20:00:15Z",
      "side": 1,
      "message": "Is this an example where if we could assume a SCA per composed system, and an SCA is running on a sled, we could greatly reduce work and complexity (i.e. just use the existing d-bus api\u0027s from the SCA)?",
      "revId": "a328d4e8472f34b84509bfd464d255cafc375248",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "44bfce33_0ed60364",
        "filename": "designs/oem/ibm/aggregation/ibm-event-logging.md",
        "patchSetId": 4
      },
      "lineNbr": 50,
      "author": {
        "id": 1000008
      },
      "writtenOn": "2022-09-13T20:35:45Z",
      "side": 1,
      "message": "Yes.\n\nI still don\u0027t know how we\u0027re going to pass FFDC in from the SCA since it could be a blob...  Redfish attachments?  that sounds......",
      "parentUuid": "c009fee6_ab9acbfb",
      "revId": "a328d4e8472f34b84509bfd464d255cafc375248",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "967e03a0_08dfc836",
        "filename": "designs/oem/ibm/aggregation/ibm-event-logging.md",
        "patchSetId": 4
      },
      "lineNbr": 52,
      "author": {
        "id": 1000338
      },
      "writtenOn": "2022-09-14T12:53:53Z",
      "side": 1,
      "message": "What use-case(s) would warrant the SCA app to do this?",
      "range": {
        "startLine": 51,
        "startChar": 1,
        "endLine": 52,
        "endChar": 36
      },
      "revId": "a328d4e8472f34b84509bfd464d255cafc375248",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "212475b4_f75b5166",
        "filename": "designs/oem/ibm/aggregation/ibm-event-logging.md",
        "patchSetId": 4
      },
      "lineNbr": 52,
      "author": {
        "id": 1000008
      },
      "writtenOn": "2022-09-14T15:24:39Z",
      "side": 1,
      "message": "I was envisioning this being the only method for SCA code to create a PEL.  So if the cable validation code wanted to create one, it would be a Redfish call to some other BMC where the standard phosphor-log-manager is already running.  Otherwise, there\u0027d have to be some new SCA PEL daemon that would create a PEL using the VPD from other sleds and then send it as a blob to the target BMC, after it somehow figured out which one to send it to.\n\nWith no log-manager running in the SCA container, that means none of the standard commit() or report() phosphor-logging interfaces would work.  Hopefully that isn\u0027t a show stopper.",
      "parentUuid": "967e03a0_08dfc836",
      "range": {
        "startLine": 51,
        "startChar": 1,
        "endLine": 52,
        "endChar": 36
      },
      "revId": "a328d4e8472f34b84509bfd464d255cafc375248",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e897cde6_d4976022",
        "filename": "designs/oem/ibm/aggregation/ibm-event-logging.md",
        "patchSetId": 4
      },
      "lineNbr": 60,
      "author": {
        "id": 1000004
      },
      "writtenOn": "2022-09-13T20:00:15Z",
      "side": 1,
      "message": "I see this being a pretty common use case. Are you thinking the SCA has it\u0027s own abstract \"targeting\" model of some sort? Something that maps to the corresponding entity manager objects in each sled? Wondering if we need to capture this requirement on the overall SCA somewhere.",
      "revId": "a328d4e8472f34b84509bfd464d255cafc375248",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "61d2e664_43bf0c5f",
        "filename": "designs/oem/ibm/aggregation/ibm-event-logging.md",
        "patchSetId": 4
      },
      "lineNbr": 60,
      "author": {
        "id": 1000008
      },
      "writtenOn": "2022-09-13T20:35:45Z",
      "side": 1,
      "message": "I talked to Santosh a bit more today, and the cable validation PEL would only have a callout for a single BMC, which is also the BMC I presume it would create the PEL on using what I described above.  If it uses an unexpanded location code, which it should know because cable ports have location codes, like Ufcs-P0-T1, then the PEL daemon on the target BMC would know how to expand it based on its VPD.\n\nBut if it does turn out we need to add callouts that cross sleds to a single PEL, then I guess maybe etcd would need a map of BMC IDs to FCS (feature code/serial number) values or something along those lines.\n\nIf it doesn\u0027t know the location code, then yea I don\u0027t know how to do that.",
      "parentUuid": "e897cde6_d4976022",
      "revId": "a328d4e8472f34b84509bfd464d255cafc375248",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8a2e6369_7947bf34",
        "filename": "designs/oem/ibm/aggregation/ibm-event-logging.md",
        "patchSetId": 4
      },
      "lineNbr": 60,
      "author": {
        "id": 1000338
      },
      "writtenOn": "2022-09-14T12:38:04Z",
      "side": 1,
      "message": "\u003e  which is also the BMC I presume it would create the PEL on using what I described above\n\nThat does not work in all cases, unfortunately :(. The cable validation app will run on the SCA, it could be validating a cable that does not involve the sled on which the SCA is running. So we will need the ability to make \"remote\" callouts.",
      "parentUuid": "61d2e664_43bf0c5f",
      "revId": "a328d4e8472f34b84509bfd464d255cafc375248",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8764d290_939b9934",
        "filename": "designs/oem/ibm/aggregation/ibm-event-logging.md",
        "patchSetId": 4
      },
      "lineNbr": 60,
      "author": {
        "id": 1000008
      },
      "writtenOn": "2022-09-14T15:24:39Z",
      "side": 1,
      "message": "How I have it described now is your code would chose a sled, the one that contains the callout, and make a redfish call to it, passing along with it all of the information needed to create the PEL.",
      "parentUuid": "8a2e6369_7947bf34",
      "revId": "a328d4e8472f34b84509bfd464d255cafc375248",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b9fd74f0_4fe24bca",
        "filename": "designs/oem/ibm/aggregation/ibm-event-logging.md",
        "patchSetId": 4
      },
      "lineNbr": 60,
      "author": {
        "id": 1000155
      },
      "writtenOn": "2022-09-14T21:32:21Z",
      "side": 1,
      "message": "\u003eBut if it does turn out we need to add callouts that cross sleds to a single PEL\nPRD (running in the SCA) will for sure need to do this.",
      "parentUuid": "8764d290_939b9934",
      "revId": "a328d4e8472f34b84509bfd464d255cafc375248",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6576e954_f9da70b0",
        "filename": "designs/oem/ibm/aggregation/ibm-event-logging.md",
        "patchSetId": 4
      },
      "lineNbr": 68,
      "author": {
        "id": 1000338
      },
      "writtenOn": "2022-09-14T12:38:04Z",
      "side": 1,
      "message": "You think there will be cases where the PEL that SCA creates will need to fetch FFDC from a remote BMC? Are there concrete use cases you can think of? Can that complexity be placed in the SCA app that is creating this PEL?",
      "range": {
        "startLine": 67,
        "startChar": 21,
        "endLine": 68,
        "endChar": 8
      },
      "revId": "a328d4e8472f34b84509bfd464d255cafc375248",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9e75f143_9d9ce676",
        "filename": "designs/oem/ibm/aggregation/ibm-event-logging.md",
        "patchSetId": 4
      },
      "lineNbr": 68,
      "author": {
        "id": 1000008
      },
      "writtenOn": "2022-09-14T15:24:39Z",
      "side": 1,
      "message": "I have the PEL being created in phosphor-log-manager on the remote BMC.",
      "parentUuid": "6576e954_f9da70b0",
      "range": {
        "startLine": 67,
        "startChar": 21,
        "endLine": 68,
        "endChar": 8
      },
      "revId": "a328d4e8472f34b84509bfd464d255cafc375248",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "34dd6d8e_edae07e1",
        "filename": "designs/oem/ibm/aggregation/ibm-event-logging.md",
        "patchSetId": 4
      },
      "lineNbr": 98,
      "author": {
        "id": 1000004
      },
      "writtenOn": "2022-09-13T20:00:15Z",
      "side": 1,
      "message": "I guess the SCA would also need it\u0027s own distinct ID or do you think it\u0027s logs just get whichever sled it chooses to create the error?",
      "revId": "a328d4e8472f34b84509bfd464d255cafc375248",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0fdc0d55_061e192d",
        "filename": "designs/oem/ibm/aggregation/ibm-event-logging.md",
        "patchSetId": 4
      },
      "lineNbr": 98,
      "author": {
        "id": 1000008
      },
      "writtenOn": "2022-09-13T20:35:45Z",
      "side": 1,
      "message": "I was thinking it would be whatever sled creates it.  If we had to we could add a new PEL field that says it\u0027s an SCA level failure if something needs to know that.",
      "parentUuid": "34dd6d8e_edae07e1",
      "revId": "a328d4e8472f34b84509bfd464d255cafc375248",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "00262aae_bb655953",
        "filename": "designs/oem/ibm/aggregation/ibm-event-logging.md",
        "patchSetId": 4
      },
      "lineNbr": 98,
      "author": {
        "id": 1000338
      },
      "writtenOn": "2022-09-14T12:38:04Z",
      "side": 1,
      "message": "I think there is some merit in having a way to identify that the PEL was logged by the SCA - Maybe just a different subsystem ID? Will the SCA PELs use their own store separate from the local BMC PELs the SCA is running on? (Edit - NM, you have tackled the storage aspect in the Controversial section below ðŸ˜Š)\n\nIs there any benefit of syncing SCA level PELs to all BMCs?",
      "parentUuid": "0fdc0d55_061e192d",
      "revId": "a328d4e8472f34b84509bfd464d255cafc375248",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7bde520f_961ec761",
        "filename": "designs/oem/ibm/aggregation/ibm-event-logging.md",
        "patchSetId": 4
      },
      "lineNbr": 98,
      "author": {
        "id": 1000008
      },
      "writtenOn": "2022-09-14T15:24:39Z",
      "side": 1,
      "message": "The PEL spec/IBM doesn\u0027t have a concept of a PEL that isn\u0027t associated with a physical system, and in the workshop it didn\u0027t sound like we needed to invent one, so the PEL will just end being created on a satellite BMC, being reported to that sled\u0027s OS.\n\nregarding syncing SCA PELs to all BMCs, I\u0027m not sure what they\u0027d do with them?  Would the HMC just get 8 notifications for the same PEL, and the OSs get sent 8 copies of the same PELs?",
      "parentUuid": "00262aae_bb655953",
      "revId": "a328d4e8472f34b84509bfd464d255cafc375248",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e86b871b_cd679cf2",
        "filename": "designs/oem/ibm/aggregation/ibm-event-logging.md",
        "patchSetId": 4
      },
      "lineNbr": 98,
      "author": {
        "id": 1000155
      },
      "writtenOn": "2022-09-14T21:32:21Z",
      "side": 1,
      "message": "\u003eI think there is some merit in having a way to identify that the PEL was logged by the SCA\nI second this.  There will definitely be errors that only have SCA-context so none of the BMCs would make sense to be associated.  A unique id range (e.g. 0x5Fzzzzzz) would make those kinds of logs obvious, especially if a SCA bounces around to other BMCs.  This would be similar to how Hostboot uses 9x for the IPL logs and then 89 for the runtime logs with full system scope.",
      "parentUuid": "7bde520f_961ec761",
      "revId": "a328d4e8472f34b84509bfd464d255cafc375248",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a54f2780_f3aa265d",
        "filename": "designs/oem/ibm/aggregation/ibm-event-logging.md",
        "patchSetId": 4
      },
      "lineNbr": 103,
      "author": {
        "id": 1000004
      },
      "writtenOn": "2022-09-13T20:00:15Z",
      "side": 1,
      "message": "Specify this tool will only be supported on the SCA? Or are you thinking any sled could support it?",
      "revId": "a328d4e8472f34b84509bfd464d255cafc375248",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d7e8845b_07601607",
        "filename": "designs/oem/ibm/aggregation/ibm-event-logging.md",
        "patchSetId": 4
      },
      "lineNbr": 103,
      "author": {
        "id": 1000008
      },
      "writtenOn": "2022-09-13T20:35:45Z",
      "side": 1,
      "message": "I guess it would make the most sense to run on the SCA only, which means it would need the peltool python installed on it.  Theoretically it could also just target the SCA, but then it would have to drag in the peltool python packages as a prereq.\n\nI will update it.",
      "parentUuid": "a54f2780_f3aa265d",
      "revId": "a328d4e8472f34b84509bfd464d255cafc375248",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3134735c_55f62bcc",
        "filename": "designs/oem/ibm/aggregation/ibm-event-logging.md",
        "patchSetId": 4
      },
      "lineNbr": 122,
      "author": {
        "id": 1000155
      },
      "writtenOn": "2022-09-14T21:32:21Z",
      "side": 1,
      "message": "Are there any requirements for which BMC gets the PEL if there are callouts?  e.g. if HBRT wants to callout sled0:proc0, does the sled0 need to catch that PEL?  If so, how do we handle PELs with callouts that span sleds?",
      "revId": "a328d4e8472f34b84509bfd464d255cafc375248",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}