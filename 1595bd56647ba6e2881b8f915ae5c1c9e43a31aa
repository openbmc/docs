{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "3b4ffe14_4405a9f4",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2022-04-29T21:12:20Z",
      "side": 1,
      "message": "I\u0027m perplexed why this is helpful and necessary.\n\n1. We have some dbus applications that use \u0027sd_bus_default\u0027 and some which use \u0027sd_bus_system\u0027.  This is a problematic inconsistency in our codebase to begin with because depending on which user is running the application you end up with a different bus choice, and in some cases segmented busses between applications.\n\n2. There should be no issue with running the system bus _inside_ the Docker container because it is still its own bus.  Why can\u0027t entity-manager operate on the container\u0027s system bus?",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 10,
        "endChar": 67
      },
      "revId": "1595bd56647ba6e2881b8f915ae5c1c9e43a31aa",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8127d3c0_7fd6fdf7",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 1000233
      },
      "writtenOn": "2022-05-11T23:45:51Z",
      "side": 1,
      "message": "This just changes the interactive docker session instructions to match the docker environment used for unit tests. Spawning a system bus is complicated (and the unit test script[0] doesn\u0027t actually do that either) and dbus-run-session doesn\u0027t work because it clears the DBUS_STARTER_BUS_TYPE env var, which is why that dbus-unit-test script exists in the first place.\n\nRegarding 1., sd_bus_default picks first based on the contents of DBUS_STARTER_BUS_TYPE env var, and then based on what slice we\u0027re running in (systemd user session vs system). It doesn\u0027t actually care what user is running the application.\n\n[0] https://github.com/openbmc/openbmc-build-scripts/blob/master/scripts/dbus-unit-test.py",
      "parentUuid": "3b4ffe14_4405a9f4",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 10,
        "endChar": 67
      },
      "revId": "1595bd56647ba6e2881b8f915ae5c1c9e43a31aa",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "45f2ef62_cb569274",
        "filename": "testing/local-ci-build.md",
        "patchSetId": 1
      },
      "lineNbr": 148,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2022-05-13T02:17:05Z",
      "side": 1,
      "message": "To be honest, this whole documentation seems a little flaky.  Why don\u0027t we just add an option to the script to run bash instead of the unit test script?",
      "revId": "1595bd56647ba6e2881b8f915ae5c1c9e43a31aa",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3f836ec6_2e283509",
        "filename": "testing/local-ci-build.md",
        "patchSetId": 1
      },
      "lineNbr": 148,
      "author": {
        "id": 1000233
      },
      "writtenOn": "2022-05-17T17:34:12Z",
      "side": 1,
      "message": "That does sound a lot better. We\u0027d just need to override the UNIT_TEST variable. I\u0027ll look into making that change instead",
      "parentUuid": "45f2ef62_cb569274",
      "revId": "1595bd56647ba6e2881b8f915ae5c1c9e43a31aa",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "457bdebf_539201c1",
        "filename": "testing/local-ci-build.md",
        "patchSetId": 1
      },
      "lineNbr": 148,
      "author": {
        "id": 1000233
      },
      "writtenOn": "2022-06-09T22:29:02Z",
      "side": 1,
      "message": "Uploaded the change here: https://gerrit.openbmc.org/c/openbmc/openbmc-build-scripts/+/54453\n\nI\u0027ll update this change to point to that flag once it\u0027s merged",
      "parentUuid": "3f836ec6_2e283509",
      "revId": "1595bd56647ba6e2881b8f915ae5c1c9e43a31aa",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c9edcebb_42088ebc",
        "filename": "testing/local-ci-build.md",
        "patchSetId": 1
      },
      "lineNbr": 154,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2022-04-29T21:12:20Z",
      "side": 1,
      "message": "Why are we recommending this for unit testing?  The default is \u0027bridge\u0027 right?",
      "revId": "1595bd56647ba6e2881b8f915ae5c1c9e43a31aa",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e05264ec_8cf3019a",
        "filename": "testing/local-ci-build.md",
        "patchSetId": 1
      },
      "lineNbr": 154,
      "author": {
        "id": 1000233
      },
      "writtenOn": "2022-05-11T23:45:51Z",
      "side": 1,
      "message": "This block is copy pasted from the script: https://github.com/openbmc/openbmc-build-scripts/blob/master/run-unit-test-docker.sh#L106\n\nIt was copy pasted originally too but became outdated",
      "parentUuid": "c9edcebb_42088ebc",
      "revId": "1595bd56647ba6e2881b8f915ae5c1c9e43a31aa",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d09b2a12_3a4ee8e1",
        "filename": "testing/local-ci-build.md",
        "patchSetId": 1
      },
      "lineNbr": 154,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2022-05-13T02:17:05Z",
      "side": 1,
      "message": "I\u0027m going to try to remove it.\n\nremote:   https://gerrit.openbmc-project.xyz/c/openbmc/openbmc-build-scripts/+/53713 run-ci: remove --network\u003dhost [NEW]",
      "parentUuid": "e05264ec_8cf3019a",
      "revId": "1595bd56647ba6e2881b8f915ae5c1c9e43a31aa",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d2661d68_e58fd8b8",
        "filename": "testing/local-ci-build.md",
        "patchSetId": 1
      },
      "lineNbr": 156,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2022-04-29T21:12:20Z",
      "side": 1,
      "message": "Why do we need to add the user parameter now?",
      "revId": "1595bd56647ba6e2881b8f915ae5c1c9e43a31aa",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f07b8929_70de3d72",
        "filename": "testing/local-ci-build.md",
        "patchSetId": 1
      },
      "lineNbr": 156,
      "author": {
        "id": 1000233
      },
      "writtenOn": "2022-05-11T23:45:51Z",
      "side": 1,
      "message": "It was added to the script this is from at some point (see above)",
      "parentUuid": "d2661d68_e58fd8b8",
      "revId": "1595bd56647ba6e2881b8f915ae5c1c9e43a31aa",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a67288f8_7e59d054",
        "filename": "testing/local-ci-build.md",
        "patchSetId": 1
      },
      "lineNbr": 157,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2022-04-29T21:12:20Z",
      "side": 1,
      "message": "We\u0027ve never referenced ${DOCKER_WORKDIR} in this whole document.  Why are we changing it from ${WORKSPACE}?  What is a user expected to fill in?  Is this some magic Docker environment variable?",
      "revId": "1595bd56647ba6e2881b8f915ae5c1c9e43a31aa",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "946aeafc_39b42bbd",
        "filename": "testing/local-ci-build.md",
        "patchSetId": 1
      },
      "lineNbr": 157,
      "author": {
        "id": 1000233
      },
      "writtenOn": "2022-05-11T23:45:51Z",
      "side": 1,
      "message": "The variable name changed in the script this is from",
      "parentUuid": "a67288f8_7e59d054",
      "revId": "1595bd56647ba6e2881b8f915ae5c1c9e43a31aa",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "931d32ea_3fe61a4d",
        "filename": "testing/local-ci-build.md",
        "patchSetId": 1
      },
      "lineNbr": 180,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2022-05-10T23:51:00Z",
      "side": 1,
      "message": "Are you analysing a core dump from the tests that were built/run inside the container? Or from a live BMC?",
      "range": {
        "startLine": 179,
        "startChar": 9,
        "endLine": 180,
        "endChar": 17
      },
      "revId": "1595bd56647ba6e2881b8f915ae5c1c9e43a31aa",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d01461a5_522c74e3",
        "filename": "testing/local-ci-build.md",
        "patchSetId": 1
      },
      "lineNbr": 180,
      "author": {
        "id": 1000233
      },
      "writtenOn": "2022-05-11T23:45:51Z",
      "side": 1,
      "message": "I don\u0027t run gdb on core dumps, but I do run it on daemons like entity-manager on my workstation.\n\nWith this workflow, you can get a bash session inside the docker container used to run unit tests and then build/run whatever you want. I use it to iteratively run unit tests and bring up a gdb session to diagnose unit test failures.",
      "parentUuid": "931d32ea_3fe61a4d",
      "range": {
        "startLine": 179,
        "startChar": 9,
        "endLine": 180,
        "endChar": 17
      },
      "revId": "1595bd56647ba6e2881b8f915ae5c1c9e43a31aa",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c0b6af7b_902bdd3a",
        "filename": "testing/local-ci-build.md",
        "patchSetId": 1
      },
      "lineNbr": 180,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2022-05-13T00:21:47Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "d01461a5_522c74e3",
      "range": {
        "startLine": 179,
        "startChar": 9,
        "endLine": 180,
        "endChar": 17
      },
      "revId": "1595bd56647ba6e2881b8f915ae5c1c9e43a31aa",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}