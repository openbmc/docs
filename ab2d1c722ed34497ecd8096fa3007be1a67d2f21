{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "d559fc45_627a5334",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 15
      },
      "lineNbr": 0,
      "author": {
        "id": 1001712
      },
      "writtenOn": "2024-07-01T14:24:09Z",
      "side": 1,
      "message": "Is this design still relevant?\n\nIt would certainly save some resources to expose all the LEDs in one process.\n\nThinking about it, this design could perhaps even be done in a backwards compatible way by still acquiring all the\n\nxyz.openbmc_project.LED.Controller.\u003cLED_NAME\u003e\n\nbus names in addition to\n\nxyz.openbmc_project.LED.Controller\n\nThen the led-specific dbus names can be disabled via meson option.",
      "revId": "ab2d1c722ed34497ecd8096fa3007be1a67d2f21",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "40f3af13_7334d097",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 15
      },
      "lineNbr": 0,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2024-07-01T19:38:20Z",
      "side": 1,
      "message": "\u003e Is this design still relevant?\n\nI think so.  The work wasn\u0027t quite done and I don\u0027t think Andrew Jeffery gave final approval.  If you want to take over the commit, that seems fine.\n\n\u003e Thinking about it, this design could perhaps even be done in a backwards compatible way by still acquiring all the\n\nWe can do that if needed.  We shouldn\u0027t make 1-busname:1-object_path pairing though.  It should be pretty straightforward to migrate the few cases where code is going directly to a named-busname.  I see only 2 real cases (phosphor-nvme and intel-ipmi-oem).\n\n```\n$ rg \"LED.Controller.\" -l              \nphosphor-led-sysfs/README.md\nphosphor-led-sysfs/controller.cpp\nphosphor-nvme/README.md\nphosphor-nvme/nvme_config.json\nintel-ipmi-oem/include/manufacturingcommands.hpp\n```",
      "parentUuid": "d559fc45_627a5334",
      "revId": "ab2d1c722ed34497ecd8096fa3007be1a67d2f21",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "59c95ffa_b3c5f145",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 15
      },
      "lineNbr": 0,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2024-07-02T05:42:56Z",
      "side": 1,
      "message": "\u003e I think so. The work wasn\u0027t quite done and I don\u0027t think Andrew Jeffery gave final approval. \n\nThere are some crimes in meta-ibm where phosphor-led-sysfs is intentionally invoked with non-existent sysfs paths. That\u0027s unreasonable IMO, and at this point I\u0027d be happy just to make them fix that by merging the single-daemon patches.",
      "parentUuid": "40f3af13_7334d097",
      "revId": "ab2d1c722ed34497ecd8096fa3007be1a67d2f21",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "33bd4d70_482b15af",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 15
      },
      "lineNbr": 0,
      "author": {
        "id": 1001712
      },
      "writtenOn": "2024-07-11T16:33:45Z",
      "side": 1,
      "message": "I\u0027m not sure the contents of the design match with it\u0027s title.\n\nWhat about this design is multi-host?\n\nIt\u0027s basically just documenting what this patch series does\nhttps://gerrit.openbmc.org/c/openbmc/phosphor-led-sysfs/+/57455/39\n\nand some stuff about blue/amber LEDs but does not go into detail much.\n\nI see the one-process solution for phosphor-led-sysfs as a good benefit,\nbut for LED policy perhaps a separate design is needed?\n\nSince the implementation that was done is more for the preliminary work that\u0027s required.\n\nCan we split up this design? So this design document could be just about the one-process refactoring of phosphor-led-sysfs, which is mostly completed.\n\nThen we can adjust this design doc to only be about that, and make another one \nfor the concerns about LED Policy if we need it.\n\nIf you think that\u0027s a good idea, i can remove some stuff from this doc.\nOr someone should mark it as abandoned.",
      "parentUuid": "59c95ffa_b3c5f145",
      "revId": "ab2d1c722ed34497ecd8096fa3007be1a67d2f21",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "eef454a0_3fadcbb6",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 15
      },
      "lineNbr": 0,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2024-07-12T04:41:40Z",
      "side": 1,
      "message": "\u003e What about this design is multi-host?\n\nYeah, I think it\u0027s a bit of a red-herring. I\u0027m be in favour of chopping out the multi-host discussion if that helps make progress.",
      "parentUuid": "33bd4d70_482b15af",
      "revId": "ab2d1c722ed34497ecd8096fa3007be1a67d2f21",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d6135725_0c36c6e6",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 15
      },
      "lineNbr": 0,
      "author": {
        "id": 1001712
      },
      "writtenOn": "2024-07-15T10:33:10Z",
      "side": 1,
      "message": "Changed my mind here.\n\nEven if the existing changes have nothing to do with multi-host specifically, i\u0027m reluctant to touch filenames and splitting up designs and such. Because this change already went through revisions and had received CR+1 at one point. We do not need to rip everything apart to put it together slightly different.\n\nI did not read the full discussion but i see different benefits\n\n- simplify phosphor-led-sysfs by making it one process\n\n- thereby provide a way to possibly expose multiple LEDs as one in the future\n  (not sure if that\u0027s really needed or if phosphor-led-manager can handle the LED Policy on its own)\n\nThe existing patch series only handles the one-process approach, but the design is also not explicit in how the grouping should work here, only that this design enables it\u0027s implementation should it be necessary.\n\nBut unrelated to multi-host and LED policy, the one-process approach is beneficial.\n\nAt this point i don\u0027t see any unresolved comments for this design besides\nthe hardcoded bus name in ```phosphor-nvme``` and ```intel-ipmi-oem```\n\nI assume it\u0027s expected that i create patches in those repos to move this design forward. \n\nIf there is anything else still needing to be changed, comment so i can try to fix it üëç",
      "parentUuid": "eef454a0_3fadcbb6",
      "revId": "ab2d1c722ed34497ecd8096fa3007be1a67d2f21",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c92498a0_97b66109",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 15
      },
      "lineNbr": 0,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2024-07-16T01:42:24Z",
      "side": 1,
      "message": "SGTM",
      "parentUuid": "d6135725_0c36c6e6",
      "revId": "ab2d1c722ed34497ecd8096fa3007be1a67d2f21",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ddc39778_187bdf92",
        "filename": "designs/multihost-physical-led.md",
        "patchSetId": 15
      },
      "lineNbr": 147,
      "author": {
        "id": 1001712
      },
      "writtenOn": "2024-07-12T15:02:24Z",
      "side": 1,
      "message": "i think this may already be legacy.\nIt looks like the color can now be directly encoded in devicetree, e.g.\n\narch/arm64/boot/dts/freescale/imx8mn-venice-gw7902.dts +91\n\n```\n|       |       led-0 {\n|       |       |       function \u003d LED_FUNCTION_STATUS;\n|       |       |       color \u003d \u003cLED_COLOR_ID_GREEN\u003e;\n|       |       |       label \u003d \"panel1\";\n|       |       |       gpios \u003d \u003c\u0026gpio3 21 GPIO_ACTIVE_LOW\u003e;\n|       |       |       default-state \u003d \"off\";\n|       |       };\n```\n\narch/arm64/boot/dts/amlogic/meson-gxbb-wetek.dtsi +32\n\narch/arm/boot/dts/aspeed/aspeed-bmc-facebook-fuji.dts +352",
      "revId": "ab2d1c722ed34497ecd8096fa3007be1a67d2f21",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "bc501dbc_0a6400b8",
        "filename": "designs/multihost-physical-led.md",
        "patchSetId": 15
      },
      "lineNbr": 147,
      "author": {
        "id": 1001712
      },
      "writtenOn": "2024-07-15T10:33:10Z",
      "side": 1,
      "message": "But we can keep this design ```devicename:color:function``` as is and maybe later switch to using the properties from devicetree, if they are exposed suitably.",
      "parentUuid": "ddc39778_187bdf92",
      "revId": "ab2d1c722ed34497ecd8096fa3007be1a67d2f21",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ac456037_f7369063",
        "filename": "designs/multihost-physical-led.md",
        "patchSetId": 15
      },
      "lineNbr": 147,
      "author": {
        "id": 1001712
      },
      "writtenOn": "2024-07-15T14:18:42Z",
      "side": 1,
      "message": "nevermind, i just tested this on hw and linux does not expose color, function, etc. separately. \n\nIt\u0027s only one directory ```devicename:color:function``` so the parts need to be extracted anyways. There are no separate files for the components üòû",
      "parentUuid": "bc501dbc_0a6400b8",
      "revId": "ab2d1c722ed34497ecd8096fa3007be1a67d2f21",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}