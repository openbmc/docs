{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "c0f91c9a_641142ef",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1001712
      },
      "writtenOn": "2024-10-25T17:56:19Z",
      "side": 1,
      "message": "i think this is difficult conceptually since configuring a systemd target loses all information about what that target is intended to do.\n\nIf the pre- and post-condition is hardcoded in the device-specific firmware update daemon then the potential for misconfiguration is removed.\n\nSince the pre- and post-condition is device specific.\n\nCan you provide any specific example of a use-case for the pre- and post-update target that can or should not be solved inside the device-specific update daemon.",
      "revId": "07111dfc5f8a2bd9a5e49c4e3b66e5ed056edc25",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d66703d4_dfef1e80",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1001758
      },
      "writtenOn": "2024-10-28T06:20:50Z",
      "side": 1,
      "message": "\u003e i think this is difficult conceptually since configuring a systemd target loses all information about what that target is intended to do.\n\nNot sure what you mean by \"configuring a systemd target loses all information about what that target is intended to do.\"?\n\u003e \n\u003e If the pre- and post-condition is hardcoded in the device-specific firmware update daemon then the potential for misconfiguration is removed.\n\nNot all Code Updater deamons are device specific. PLDMd is one such example which can handle update for wide variety of PLDM devices, which can have different pre and post conditions. Also, for same device type pre and post conditions can change depending upon the platform type and where that particular component is positioned.\n\n\u003e \n\u003e Since the pre- and post-condition is device specific.\n\npre and post systemd targets can be device specific too.\n\n\u003e \n\u003e Can you provide any specific example of a use-case for the pre- and post-update target that can or should not be solved inside the device-specific update daemon.\n\nAs i mentioned above, PLDMd is such an example which handles update for all PLDM devices and pre \u0026 post conditions for devices can be different depending upon the platform type.",
      "parentUuid": "c0f91c9a_641142ef",
      "revId": "07111dfc5f8a2bd9a5e49c4e3b66e5ed056edc25",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "cea71d9c_d640e5d9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1002135
      },
      "writtenOn": "2024-10-28T09:06:56Z",
      "side": 1,
      "message": "Hi Jagpal, thanks for your work, I have start implementing the code with this schema, but some of the details might be unclear to me, I have list my questions below.",
      "revId": "07111dfc5f8a2bd9a5e49c4e3b66e5ed056edc25",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c06d5018_27165974",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1002222
      },
      "writtenOn": "2024-10-28T09:12:41Z",
      "side": 1,
      "message": "For me it is not clear in which layer or subrepo this configuration (the JSON-config) shall take place. Can you clearify that?",
      "revId": "07111dfc5f8a2bd9a5e49c4e3b66e5ed056edc25",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5d253b3c_293c0ff2",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1001712
      },
      "writtenOn": "2024-10-28T09:30:38Z",
      "side": 1,
      "message": "\u003e Not sure what you mean by \"configuring a systemd target loses all information about what that target is intended to do.\"?\n\nYou posted a question here but marked my comment as resolved. If there is still questions, my comment is not resolved.\n\nWhat i mean here is that in your proposal, you suggest running configured systemd services before and after the update. The code updater application will have no way to know what these services are doing and thus refactoring the application logic will be very difficult.\n\n\u003e Not all Code Updater deamons are device specific. PLDMd is one such example which can handle update for wide variety of PLDM devices, which can have different pre and post conditions. Also, for same device type pre and post conditions can change depending upon the platform type and where that particular component is positioned.\n\nLooking at pldmd, if it is handling updates for multiple devices, it can handle all the required pre- and post- update logic internally.\n\n\u003e As i mentioned above, PLDMd is such an example which handles update for all PLDM devices and pre \u0026 post conditions for devices can be different depending upon the platform type.\n\nThat\u0027s not a specific example.\n\nAlso, is this change a design for pldmd? If so, maybe we should mark the pldm reviewers aswell to review the change.",
      "parentUuid": "d66703d4_dfef1e80",
      "revId": "07111dfc5f8a2bd9a5e49c4e3b66e5ed056edc25",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4b26ede7_c6841f27",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1002135
      },
      "writtenOn": "2024-10-30T03:23:42Z",
      "side": 1,
      "message": "In our case, we\u0027re currently trying to update BICs for Yosemite4, which would reset itself automatically without a proper controlable and mesureable approaches when update is done, causing bad attempts acquiring active version from BIC, because we\u0027re not able to know when it would complete resetting, adding a brief sleep is okay for scripts and services, but afraidly not appropriate for hard coding.",
      "parentUuid": "5d253b3c_293c0ff2",
      "revId": "07111dfc5f8a2bd9a5e49c4e3b66e5ed056edc25",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c8ef7c62_9eb33e40",
        "filename": "designs/code-update.md",
        "patchSetId": 1
      },
      "lineNbr": 248,
      "author": {
        "id": 1001712
      },
      "writtenOn": "2024-10-28T09:30:38Z",
      "side": 1,
      "message": "Sorry for the dumb question, but which configuration file?\n\nWill it be part of EM configuration? \n\nIf so, why is it not part of a configuration for a device?\nInstead of having all of this as a separate ```Components``` array it\ncould be configured in the json object for the specific device.\n\nThat would make it easier for a code updater daemon to extract the config.\n\nIf it should not be part of EM config, why not?",
      "revId": "07111dfc5f8a2bd9a5e49c4e3b66e5ed056edc25",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0e93042e_09230c64",
        "filename": "designs/code-update.md",
        "patchSetId": 1
      },
      "lineNbr": 268,
      "author": {
        "id": 1001712
      },
      "writtenOn": "2024-10-28T09:30:38Z",
      "side": 1,
      "message": "Above you were referring to \n\n\u003e platform-specific pre and post\nupdate systemd targets \n\nbut now it\u0027s ```PreSetupTarget```, should it not be ```PreUpdateTarget```?",
      "revId": "07111dfc5f8a2bd9a5e49c4e3b66e5ed056edc25",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3af7ca0b_20753cda",
        "filename": "designs/code-update.md",
        "patchSetId": 1
      },
      "lineNbr": 272,
      "author": {
        "id": 1001712
      },
      "writtenOn": "2024-10-28T09:30:38Z",
      "side": 1,
      "message": "Same here, ```PostUpdateTarget```",
      "revId": "07111dfc5f8a2bd9a5e49c4e3b66e5ed056edc25",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d4150283_3b003857",
        "filename": "designs/code-update.md",
        "patchSetId": 1
      },
      "lineNbr": 288,
      "author": {
        "id": 1002135
      },
      "writtenOn": "2024-10-28T09:06:56Z",
      "side": 1,
      "message": "Maybe it\u0027s my problem, but I have not yet found anything defined what `downstream component name` is, neither in the exist code nor DMTF standards, would be grateful if you can point it for me, so that I can follow the definition to inplement the code.\n\nIf the definition is actually not exist, the closest equalivant I\u0027ve found would be `ASCII Model Number`, defined in [DMTF DSP0267 1.1.0 Table 8].\n\nOne more question related to slot number below.\n\n[DMTF DSP0267 1.1.0 Table 8]: https://www.dmtf.org/sites/default/files/standards/documents/DSP0267_1.1.0.pdf",
      "revId": "07111dfc5f8a2bd9a5e49c4e3b66e5ed056edc25",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b770a1f5_9433d958",
        "filename": "designs/code-update.md",
        "patchSetId": 1
      },
      "lineNbr": 300,
      "author": {
        "id": 1002135
      },
      "writtenOn": "2024-10-28T09:06:56Z",
      "side": 1,
      "message": "Some of the service units might be slot-specific, but seems like the schema here doesn\u0027t yet accommodate the slot variable pattern, perhaps we can introduce a wildcard for slot number here in cases, so that the given slot number could correctly match the specific unit file for specific slot.",
      "revId": "07111dfc5f8a2bd9a5e49c4e3b66e5ed056edc25",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}