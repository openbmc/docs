{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "1f97337b_ad5e31cf",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2025-10-24T23:44:23Z",
      "side": 1,
      "message": "I\u0027m pretty sure this can go.",
      "revId": "fdf952af2d184e172743b746b47fd23bdf7deea4",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e3d3368b_a5dca1c8",
        "filename": "style/cpp/.clang-tidy",
        "patchSetId": 5
      },
      "lineNbr": 15,
      "author": {
        "id": 1001712
      },
      "writtenOn": "2025-10-28T09:35:34Z",
      "side": 1,
      "message": "assignment in a conditional may sometimes result in code that is more compact.\n\nPerhaps we should leave this check to a follow-up patch.",
      "revId": "fdf952af2d184e172743b746b47fd23bdf7deea4",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b5cecd42_cf67b5f5",
        "filename": "style/cpp/.clang-tidy",
        "patchSetId": 5
      },
      "lineNbr": 15,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2025-10-28T16:04:32Z",
      "side": 1,
      "message": "I really don\u0027t understand, can you give an example of where this would be correct code, but the check fails?",
      "parentUuid": "e3d3368b_a5dca1c8",
      "revId": "fdf952af2d184e172743b746b47fd23bdf7deea4",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9d4e49e8_f048a7fa",
        "filename": "style/cpp/.clang-tidy",
        "patchSetId": 5
      },
      "lineNbr": 15,
      "author": {
        "id": 1001712
      },
      "writtenOn": "2025-10-29T23:11:07Z",
      "side": 1,
      "message": "```\nbool has_error;\n\nif (has_error \u003d foo()){\n    // unhappy path\n}\n\nbar(has_error);\n```\n\nkeep in mind i did not test this, going off the documentation here.\n\nClosing the comment since it should be easy to refactor cases like that.",
      "parentUuid": "b5cecd42_cf67b5f5",
      "revId": "fdf952af2d184e172743b746b47fd23bdf7deea4",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d7b95d10_8c7c43bb",
        "filename": "style/cpp/.clang-tidy",
        "patchSetId": 5
      },
      "lineNbr": 17,
      "author": {
        "id": 1001712
      },
      "writtenOn": "2025-10-28T09:35:34Z",
      "side": 1,
      "message": "That\u0027s treating `bool` in a special way.\n\nWhy cannot i check a `bool*`? It might be bugprone but it\u0027s a valid code.",
      "revId": "fdf952af2d184e172743b746b47fd23bdf7deea4",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b1242c7b_094942de",
        "filename": "style/cpp/.clang-tidy",
        "patchSetId": 5
      },
      "lineNbr": 17,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2025-10-28T16:04:32Z",
      "side": 1,
      "message": "Right, the whole point of these checks are to avoid valid code that results in more bugs.  I\u0027d prefer this stay.",
      "parentUuid": "d7b95d10_8c7c43bb",
      "revId": "fdf952af2d184e172743b746b47fd23bdf7deea4",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b20ccd3e_cbec64bb",
        "filename": "style/cpp/.clang-tidy",
        "patchSetId": 5
      },
      "lineNbr": 17,
      "author": {
        "id": 1001712
      },
      "writtenOn": "2025-10-29T23:11:07Z",
      "side": 1,
      "message": "i don\u0027t care enough, and i don\u0027t know of any example where we actually do this, so have it your way i guess.",
      "parentUuid": "b1242c7b_094942de",
      "revId": "fdf952af2d184e172743b746b47fd23bdf7deea4",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c5019cc1_20081361",
        "filename": "style/cpp/.clang-tidy",
        "patchSetId": 5
      },
      "lineNbr": 33,
      "author": {
        "id": 1001712
      },
      "writtenOn": "2025-10-28T09:35:34Z",
      "side": 1,
      "message": "incrementing and decrementing in a conditional is well-defined using pre- and post-increment/decrement semantics.\n\nI feel like this could falsely flag a bunch of correct code.",
      "revId": "fdf952af2d184e172743b746b47fd23bdf7deea4",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "34c62958_08eb7a4a",
        "filename": "style/cpp/.clang-tidy",
        "patchSetId": 5
      },
      "lineNbr": 33,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2025-10-28T16:04:32Z",
      "side": 1,
      "message": "That hasn\u0027t been the case in the major repos we\u0027ve enabled this.  Please articulate an example here.",
      "parentUuid": "c5019cc1_20081361",
      "revId": "fdf952af2d184e172743b746b47fd23bdf7deea4",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b6fb9df3_a9eb333b",
        "filename": "style/cpp/.clang-tidy",
        "patchSetId": 5
      },
      "lineNbr": 33,
      "author": {
        "id": 1001712
      },
      "writtenOn": "2025-10-29T23:11:07Z",
      "side": 1,
      "message": "Closing this. It should be easy to rework any such code.",
      "parentUuid": "34c62958_08eb7a4a",
      "revId": "fdf952af2d184e172743b746b47fd23bdf7deea4",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0cee8d96_438f9e66",
        "filename": "style/cpp/.clang-tidy",
        "patchSetId": 5
      },
      "lineNbr": 37,
      "author": {
        "id": 1001712
      },
      "writtenOn": "2025-10-28T09:35:34Z",
      "side": 1,
      "message": "integer division in floating point context can be intended.\n\nThe example\n```\n// Warn, floating-point values expected.\ndouble d;\nint i \u003d 42;\nd \u003d 32 * 8 / (2 + i);\n```\n\nThe suggested fix is to add a cast but that would make the expression less readable.",
      "revId": "fdf952af2d184e172743b746b47fd23bdf7deea4",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f82034be_ff20adea",
        "filename": "style/cpp/.clang-tidy",
        "patchSetId": 5
      },
      "lineNbr": 37,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2025-10-28T16:04:32Z",
      "side": 1,
      "message": "I agree with the check.  Yes, it\u0027s less readable if you put it inline, but you shouldn\u0027t do that, or ideally make sure you use consistent types.  In your code above, you would change \"int i\" to \"double i\" to make the code both readable and correct.",
      "parentUuid": "0cee8d96_438f9e66",
      "revId": "fdf952af2d184e172743b746b47fd23bdf7deea4",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "bdfdc60a_207817be",
        "filename": "style/cpp/.clang-tidy",
        "patchSetId": 5
      },
      "lineNbr": 37,
      "author": {
        "id": 1001712
      },
      "writtenOn": "2025-10-29T23:11:07Z",
      "side": 1,
      "message": "It\u0027s too rare a case for me to worry about it i guess. Closing this one.",
      "parentUuid": "f82034be_ff20adea",
      "revId": "fdf952af2d184e172743b746b47fd23bdf7deea4",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "92b920ae_dc29c6dd",
        "filename": "style/cpp/.clang-tidy",
        "patchSetId": 5
      },
      "lineNbr": 186,
      "author": {
        "id": 1001712
      },
      "writtenOn": "2025-10-28T09:35:34Z",
      "side": 1,
      "message": "We may want to get rid of this check, passing references to coroutines can be perfectly fine.\n\nFor example if we have a local var in `main` function, passing a reference to that var is fine.",
      "range": {
        "startLine": 186,
        "startChar": 0,
        "endLine": 186,
        "endChar": 2
      },
      "revId": "fdf952af2d184e172743b746b47fd23bdf7deea4",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1c47f15b_540a7ee8",
        "filename": "style/cpp/.clang-tidy",
        "patchSetId": 5
      },
      "lineNbr": 186,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2025-10-28T16:04:32Z",
      "side": 1,
      "message": "Can you give an example in our code?",
      "parentUuid": "92b920ae_dc29c6dd",
      "range": {
        "startLine": 186,
        "startChar": 0,
        "endLine": 186,
        "endChar": 2
      },
      "revId": "fdf952af2d184e172743b746b47fd23bdf7deea4",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "15aafb7c_32661192",
        "filename": "style/cpp/.clang-tidy",
        "patchSetId": 5
      },
      "lineNbr": 186,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2025-10-29T16:32:16Z",
      "side": 1,
      "message": "See below.  This is cpp core guidelines.  Unless we think the check itself doesn\u0027t match the intent or guideline, we shouldn\u0027t be disabling things that are already documented.",
      "parentUuid": "1c47f15b_540a7ee8",
      "range": {
        "startLine": 186,
        "startChar": 0,
        "endLine": 186,
        "endChar": 2
      },
      "revId": "fdf952af2d184e172743b746b47fd23bdf7deea4",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "090006b9_0c77b663",
        "filename": "style/cpp/.clang-tidy",
        "patchSetId": 5
      },
      "lineNbr": 186,
      "author": {
        "id": 1001712
      },
      "writtenOn": "2025-10-29T23:11:07Z",
      "side": 1,
      "message": "Example of a coroutine taking reference parameters:\n\nhttps://github.com/openbmc/phosphor-bmc-code-mgmt/blob/de331ae49afd6fe27271c4081ffa239746bda8b5/bios/bios_software_manager.cpp#L22\n\n```\nsdbusplus::async::task\u003cbool\u003e BIOSSoftwareManager::initDevice(\n    const std::string\u0026 service, const std::string\u0026 path, SoftwareConfig\u0026 config)\n{\n    std::string configIface \u003d\n        \"xyz.openbmc_project.Configuration.\" + config.configType;\n\n    std::optional\u003cuint64_t\u003e spiControllerIndex \u003d\n        co_await dbusGetRequiredProperty\u003cuint64_t\u003e(\n            ctx, service, path, configIface, \"SPIControllerIndex\");\n\n    if (!spiControllerIndex.has_value())\n    {\n        error(\"Missing property: SPIControllerIndex\");\n        co_return false;\n    }\n\n    std::optional\u003cuint64_t\u003e spiDeviceIndex \u003d\n        co_await dbusGetRequiredProperty\u003cuint64_t\u003e(\n            ctx, service, path, configIface, \"SPIDeviceIndex\");\n```\n\nIn that case the `const std::string\u0026 service` reference is used across a `co_await` and could theoretically be dangling at that point.\n\nBut it\u0027s working code. If you intend to rework all cases like that to `shared_ptr` then i guess we can keep the check.\n\nBut `shared_ptr` has it\u0027s own problems.",
      "parentUuid": "15aafb7c_32661192",
      "range": {
        "startLine": 186,
        "startChar": 0,
        "endLine": 186,
        "endChar": 2
      },
      "revId": "fdf952af2d184e172743b746b47fd23bdf7deea4",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "07e49255_84092297",
        "filename": "style/cpp/.clang-tidy",
        "patchSetId": 5
      },
      "lineNbr": 186,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2025-10-30T18:04:33Z",
      "side": 1,
      "message": "I think that\u0027s the point of the check, the code \"works\", but it\u0027s highly likely that reference ends up as a use after free at some point in the future.  I suspect that\u0027s the point of the check, to ask you to write that as \n\ninitDevice(std::string service,std::string path, SoftwareConfig config)\n\nTo avoid the use after free footgun.",
      "parentUuid": "090006b9_0c77b663",
      "range": {
        "startLine": 186,
        "startChar": 0,
        "endLine": 186,
        "endChar": 2
      },
      "revId": "fdf952af2d184e172743b746b47fd23bdf7deea4",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "44899105_e474b986",
        "filename": "style/cpp/.clang-tidy",
        "patchSetId": 5
      },
      "lineNbr": 186,
      "author": {
        "id": 1001712
      },
      "writtenOn": "2025-10-30T22:54:23Z",
      "side": 1,
      "message": "I\u0027m closing the comment since you are technically correct about the issue and the code example has this footgun.\n\nThe suggested alternative is also bad since we would be copying everything, but at least it would not crash.",
      "parentUuid": "07e49255_84092297",
      "range": {
        "startLine": 186,
        "startChar": 0,
        "endLine": 186,
        "endChar": 2
      },
      "revId": "fdf952af2d184e172743b746b47fd23bdf7deea4",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1db61c37_3b1b7cbb",
        "filename": "style/cpp/.clang-tidy",
        "patchSetId": 5
      },
      "lineNbr": 189,
      "author": {
        "id": 1001712
      },
      "writtenOn": "2025-10-28T09:35:34Z",
      "side": 1,
      "message": "Always initializing a variable can lead to code bloat.\n\nIt can lead to a situation where an initial value is set but always overwritten in every code path, which is confusing.\n\nThe relevant part is for clang-tidy to figure out if an uninitialized var is used somewhere and there is other checks which can take care of that.\n\n```\n    clang-analyzer-core.uninitialized.ArraySubscript,\n    clang-analyzer-core.uninitialized.Assign,\n    clang-analyzer-core.uninitialized.Branch,\n    clang-analyzer-core.uninitialized.NewArraySize,\n```",
      "range": {
        "startLine": 189,
        "startChar": 0,
        "endLine": 189,
        "endChar": 2
      },
      "revId": "fdf952af2d184e172743b746b47fd23bdf7deea4",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3d5482d2_8b53c40b",
        "filename": "style/cpp/.clang-tidy",
        "patchSetId": 5
      },
      "lineNbr": 189,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2025-10-28T16:04:32Z",
      "side": 1,
      "message": "\u003e Always initializing a variable can lead to code bloat.\n\nPlease articulate this concern using numbers.  We have not seen this, and it\u0027s a very important security issue that we need to catch.",
      "parentUuid": "1db61c37_3b1b7cbb",
      "range": {
        "startLine": 189,
        "startChar": 0,
        "endLine": 189,
        "endChar": 2
      },
      "revId": "fdf952af2d184e172743b746b47fd23bdf7deea4",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c85a5adf_2a6eca7e",
        "filename": "style/cpp/.clang-tidy",
        "patchSetId": 5
      },
      "lineNbr": 189,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2025-10-29T16:32:16Z",
      "side": 1,
      "message": "I\u0027d also point out that this is a cpp core guidelines check, which is directly the standard we follow.  if we think this check is inappropriate, we should either:\n1. Take this up with cpp core guidelines that we think this is wrong\n2. Take this up with OPenBMC that we should ignore cpp core guidelines for this case.",
      "parentUuid": "3d5482d2_8b53c40b",
      "range": {
        "startLine": 189,
        "startChar": 0,
        "endLine": 189,
        "endChar": 2
      },
      "revId": "fdf952af2d184e172743b746b47fd23bdf7deea4",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "35a22e4d_ef7059bd",
        "filename": "style/cpp/.clang-tidy",
        "patchSetId": 5
      },
      "lineNbr": 189,
      "author": {
        "id": 1001712
      },
      "writtenOn": "2025-10-29T23:11:07Z",
      "side": 1,
      "message": "I don\u0027t have a strong opinion here. And not enough examples of code where this would be an issue. Closing.",
      "parentUuid": "c85a5adf_2a6eca7e",
      "range": {
        "startLine": 189,
        "startChar": 0,
        "endLine": 189,
        "endChar": 2
      },
      "revId": "fdf952af2d184e172743b746b47fd23bdf7deea4",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}